/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={value:null,setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n))},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),t&&(n&&t.empty(),t.remove(P)),r||(n&&e.empty(),e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this.get(k),t)},getString:function(e){return this
.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"3.11.0",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,i=e.Lang,s="srcNode",o="contentBox";n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS[s]={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get(o)},_preAddAttrs:function(e,t,n){var r={id:e.id,boundingBox:e.boundingBox,contentBox:e.contentBox,srcNode:e.srcNode};this.addAttrs(r,t,n),delete e.boundingBox,delete e.contentBox,delete e.srcNode,delete e.id,this._applyParser&&this._applyParser(t)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n=this,r=this._getNodeToParse(),s=n._getHtmlParser(),o,u;s&&r&&e.Object.each(s,function(e,t,s){u=null,i.isFunction(e)?u=e.call(n,r):i.isArray(e)?(u=r.all(e[0]),u.isEmpty()&&(u=null)):u=r.one(e),u!==null&&u!==undefined&&(o=o||{},o[t]=u)}),t=n._applyParsedConfig(r,t,o)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t=this._getClasses(),n={},r,i;for(r=t.length-1;r>=0;r--)i=t[r].HTML_PARSER,i&&e.mix(n,i,!0);return n}})},"3.11.0",{requires:["widget-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-skin",function(e,t){var n="boundingBox",r="contentBox",i="skin",s=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(e){var t=this.get(r)||this.get(n),o,u;return e=e||s(i,""),u=new RegExp("\\b"+e+"(\\S+)"),t&&t.ancestor(function(e){return o=e.get("className").match(u),o}),o?o[1]:null}},"3.11.0",{requires:["widget-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-uievents",function(e,t){var n="boundingBox",r=e.Widget,i="render",s=e.Lang,o=":",u=e.Widget._uievts=e.Widget._uievts||{};e.mix(r.prototype,{_destroyUIEvents:function(){var t=e.stamp(this,!0);e.each(u,function(n,r){n.instances[t]&&(delete n.instances[t],e.Object.isEmpty(n.instances)&&(n.handle.detach(),u[r]&&delete u[r]))})},UI_EVENTS:e.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(n)},_createUIEvent:function(t){var n=this._getUIEventNode(),i=e.stamp(n)+t,s=u[i],o;s||(o=n.delegate(t,function(e){var t=r.getByNode(this);t&&t._filterUIEvent(e)&&t.fire(e.type,{domEvent:e})},"."+e.Widget.getClassName()),u[i]=s={instances:{},handle:o}),s.instances[e.stamp(this)]=1},_filterUIEvent:function(e){return e.currentTarget.compareTo(e.container)||e.container.compareTo(this._getUIEventNode())},_getUIEvent:function(e){if(s.isString(e)){var t=this.parseType(e)[1],n,r;return t&&(n=t.indexOf(o),n>-1&&(t=t.substring(n+o.length)),this.UI_EVENTS[t]&&(r=t)),r}},_initUIEvent:function(e){var t=this._getUIEvent(e),n=this._uiEvtsInitQueue||{};t&&!n[t]&&(this._uiEvtsInitQueue=n[t]=1,this.after(i,function(){this._createUIEvent(t),delete this._uiEvtsInitQueue[t]}))},on:function(e){return this._initUIEvent(e),r.superclass.on.apply(this,arguments)},publish:function(e,t){var n=this._getUIEvent(e);return n&&t&&t.defaultFn&&this._initUIEvent(n),r.superclass.publish.apply(this,arguments)}},!0)},"3.11.0",{requires:["node-event-delegate","widget-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-stdmod",function(e,t){function H(e){}var n=e.Lang,r=e.Node,i=e.UA,s=e.Widget,o="",u="hd",a="bd",f="ft",l="header",c="body",h="footer",p="fillHeight",d="stdmod",v="Node",m="Content",g="firstChild",y="childNodes",b="ownerDocument",w="contentBox",E="height",S="offsetHeight",x="auto",T="headerContentChange",N="bodyContentChange",C="footerContentChange",k="fillHeightChange",L="heightChange",A="contentUpdate",O="renderUI",M="bindUI",_="syncUI",D="_applyParsedConfig",P=e.Widget.UI_SRC;H.HEADER=l,H.BODY=c,H.FOOTER=h,H.AFTER="after",H.BEFORE="before",H.REPLACE="replace";var B=H.HEADER,j=H.BODY,F=H.FOOTER,I=B+m,q=F+m,R=j+m;H.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:H.BODY,validator:function(e){return this._validateFillHeight(e)}}},H.HTML_PARSER={headerContent:function(e){return this._parseStdModHTML(B)},bodyContent:function(e){return this._parseStdModHTML(j)},footerContent:function(e){return this._parseStdModHTML(F)}},H.SECTION_CLASS_NAMES={header:s.getClassName(u),body:s.getClassName(a),footer:s.getClassName(f)},H.TEMPLATES={header:'<div class="'+H.SECTION_CLASS_NAMES[B]+'"></div>',body:'<div class="'+H.SECTION_CLASS_NAMES[j]+'"></div>',footer:'<div class="'+H.SECTION_CLASS_NAMES[F]+'"></div>'},H.prototype={initializer:function(){this._stdModNode=this.get(w),e.before(this._renderUIStdMod,this,O),e.before(this._bindUIStdMod,this,M),e.before(this._syncUIStdMod,this,_)},_syncUIStdMod:function(){var e=this._stdModParsed;(!e||!e[I])&&this._uiSetStdMod(B,this.get(I)),(!e||!e[R])&&this._uiSetStdMod(j,this.get(R)),(!e||!e[q])&&this._uiSetStdMod(F,this.get(q)),this._uiSetFillHeight(this.get(p))},_renderUIStdMod:function(){this._stdModNode.addClass(s.getClassName(d)),this._renderStdModSections(),this.after(T,this._afterHeaderChange),this.after(N,this._afterBodyChange),this.after(C,this._afterFooterChange)},_renderStdModSections:function(){n.isValue(this.get(I))&&this._renderStdMod(B),n.isValue(this.get(R))&&this._renderStdMod(j),n.isValue(this.get(q))&&this._renderStdMod(F)},_bindUIStdMod:function(){this.after(k,this._afterFillHeightChange),this.after(L,this._fillHeight),this.after(A,this._fillHeight)},_afterHeaderChange:function(e){e.src!==P&&this._uiSetStdMod(B,e.newVal,e.stdModPosition)},_afterBodyChange:function(e){e.src!==P&&this._uiSetStdMod(j,e.newVal,e.stdModPosition)},_afterFooterChange:function(e){e.src!==P&&this._uiSetStdMod(F,e.newVal,e.stdModPosition)},_afterFillHeightChange:function(e){this._uiSetFillHeight(e.newVal)},_validateFillHeight:function(e){return!e||e==H.BODY||e==H.HEADER||e==H.FOOTER},_uiSetFillHeight:function(e){var t=this.getStdModNode(e),n=this._currFillNode;n&&t!==n&&n.setStyle(E,o),t&&(this._currFillNode=t),this._fillHeight()},_fillHeight:function(){if(this.get(p)){var e=this.get(E);e!=o&&e!=x&&this.fillHeight(this.getStdModNode(this.get(p)))}},_uiSetStdMod:function(e,t,r){if(n.isValue(t)){var i=this.getStdModNode(e,!0);this._addStdModContent(i,t,r),this.set(e+m,this._getStdModContent(e),{src:P})}else this._eraseStdMod(e);this.fire(A)},_renderStdMod:function(e){var t=this.get(w),n=this._findStdModSection(e);return n||(n=this._getStdModTemplate(e)),this._insertStdModSection(t,e,n),this[e+v]=n,this[e+v]},_eraseStdMod:function(e){var t=this.getStdModNode(e);t&&(t.remove(!0),delete this[e+v])},_insertStdModSection:function(e,t,n){var r=e.get(g);if(t===F||!r)e.appendChild(n);else if(t===B)e.insertBefore(n,r);else{var i=this[F+v];i?e.insertBefore(n,i):e.appendChild(n)}},_getStdModTemplate:function(e){return r.create(H.TEMPLATES[e],this._stdModNode.get(b))},_addStdModContent:function(e,t,n){switch(n){case H.BEFORE:n=0;break;case H.AFTER:n=undefined;break;default:n=H.REPLACE}e.insert(t,n)},_getPreciseHeight:function(e){var t=e?e.get(S):0,n="getBoundingClientRect";if(e&&e.hasMethod(n)){var r=e.invoke(n);r&&(t=r.bottom-r.top)}return t},_findStdModSection:function(e){return this.get(w).one("> ."+H.SECTION_CLASS_NAMES[e])},_parseStdModHTML:function(t){var n=this._findStdModSection(t);return n?(this._stdModParsed||(this._stdModParsed={},e.before(this._applyStdModParsedConfig,this,D)),this._stdModParsed[t+m]=1,n.get("innerHTML")):null},_applyStdModParsedConfig:function(e,t,n){var r=this._stdModParsed;r&&(r[I]=!(I in t)&&I in r,r[R]=!(R in t)&&R in r,r[q]=!(q in t)&&q in r)},_getStdModContent:function(e){return this[e+v]?this[e+v].get(y):null},setStdModContent:function(e,t,n){this.set(e+m,t,{stdModPosition:n})},getStdModNode:function(e,t){var n=this[e+v]||null;return!n&&t&&(n=this._renderStdMod(e)),n},fillHeight:function(e){if(e){var t=this.get(w),r=[this.headerNode,this.bodyNode,this.footerNode],s,o,u=0,a=0,f=!1;for(var l=0,c=r.length;l<c;l++)s=r[l],s&&(s!==e?u+=this._getPreciseHeight(s):f=!0);f&&((i.ie||i.opera)&&e.set(S,0),o=t.get(S)-parseInt(t.getComputedStyle("paddingTop"),10)-parseInt(t.getComputedStyle("paddingBottom"),10)-parseInt(t.getComputedStyle("borderBottomWidth"),10)-parseInt(t.getComputedStyle("borderTopWidth"),10),n.isNumber(o)&&(a=o-u,a>=0&&e.set(S,a)))}}},e.WidgetStdMod=H},"3.11.0",{requires:["base-build","widget"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position",function(e,t){function d(e){}var n=e.Lang,r=e.Widget,i="xy",s="position",o="positioned",u="boundingBox",a="relative",f="renderUI",l="bindUI",c="syncUI",h=r.UI_SRC,p="xyChange";d.ATTRS={x:{setter:function(e){this._setX(e)},getter:function(){return this._getX()},lazyAdd:!1},y:{setter:function(e){this._setY(e)},getter:function(){return this._getY()},lazyAdd:!1},xy:{value:[0,0],validator:function(e){return this._validateXY(e)}}},d.POSITIONED_CLASS_NAME=r.getClassName(o),d.prototype={initializer:function(){this._posNode=this.get(u),e.after(this._renderUIPosition,this,f),e.after(this._syncUIPosition,this,c),e.after(this._bindUIPosition,this,l)},_renderUIPosition:function(){this._posNode.addClass(d.POSITIONED_CLASS_NAME)},_syncUIPosition:function(){var e=this._posNode;e.getStyle(s)===a&&this.syncXY(),this._uiSetXY(this.get(i))},_bindUIPosition:function(){this.after(p,this._afterXYChange)},move:function(){var e=arguments,t=n.isArray(e[0])?e[0]:[e[0],e[1]];this.set(i,t)},syncXY:function(){this.set(i,this._posNode.getXY(),{src:h})},_validateXY:function(e){return n.isArray(e)&&n.isNumber(e[0])&&n.isNumber(e[1])},_setX:function(e){this.set(i,[e,this.get(i)[1]])},_setY:function(e){this.set(i,[this.get(i)[0],e])},_getX:function(){return this.get(i)[0]},_getY:function(){return this.get(i)[1]},_afterXYChange:function(e){e.src!=h&&this._uiSetXY(e.newVal)},_uiSetXY:function(e){this._posNode.setXY(e)}},e.WidgetPosition=d},"3.11.0",{requires:["base-build","node-screen","widget"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position-align",function(e,t){function c(e){}var n=e.Lang,r="align",i="alignOn",s="visible",o="boundingBox",u="offsetWidth",a="offsetHeight",f="region",l="viewportRegion";c.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:e.Lang.isArray}},c.TL="tl",c.TR="tr",c.BL="bl",c.BR="br",c.TC="tc",c.RC="rc",c.BC="bc",c.LC="lc",c.CC="cc",c.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"),e.after(this._bindUIPosAlign,this,"bindUI"),e.after(this._syncUIPosAlign,this,"syncUI")},_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange),this.after("alignOnChange",this._afterAlignOnChange),this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var e=this.get(r);this._uiSetVisiblePosAlign(this.get(s)),e&&this._uiSetAlign(e.node,e.points)},align:function(e,t){return arguments.length?this.set(r,{node:e,points:t}):this._syncUIPosAlign(),this},centered:function(e){return this.align(e,[c.CC,c.CC])},_setAlignCenter:function(e){return e&&this.set(r,{node:e===!0?null:e,points:[c.CC,c.CC]}),e},_uiSetAlign:function(t,r){if(!n.isArray(r)||r.length!==2){e.error("align: Invalid Points Arguments");return}var i=this._getRegion(t),s,o,u;if(!i)return;s=r[0],o=r[1];switch(o){case c.TL:u=[i.left,i.top];break;case c.TR:u=[i.right,i.top];break;case c.BL:u=[i.left,i.bottom];break;case c.BR:u=[i.right,i.bottom];break;case c.TC:u=[i.left+Math.floor(i.width/2),i.top];break;case c.BC:u=[i.left+Math.floor(i.width/2),i.bottom];break;case c.LC:u=[i.left,i.top+Math.floor(i.height/2)];break;case c.RC:u=[i.right,i.top+Math.floor(i.height/2)];break;case c.CC:u=[i.left+Math.floor(i.width/2),i.top+Math.floor(i.height/2)];break;default:}u&&this._doAlign(s,u[0],u[1])},_uiSetVisiblePosAlign:function(e){e?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(this._posAlignUIHandles)return;var t=this.get(o),n=e.bind(this._syncUIPosAlign,this),r=[];e.Array.each(this.get(i),function(i){var s=i.eventName,o=e.one(i.node)||t;s&&r.push(o.on(s,n))}),this._posAlignUIHandles=r},_detachPosAlignUIHandles:function(){var t=this._posAlignUIHandles;t&&((new e.EventHandle(t)).detach(),this._posAlignUIHandles=null)},_doAlign:function(e,t,n){var r=this._posNode,i;switch(e){case c.TL:i=[t,n];break;case c.TR:i=[t-r.get(u),n];break;case c.BL:i=[t,n-r.get(a)];break;case c.BR:i=[t-r.get(u),n-r.get(a)];break;case c.TC:i=[t-r.get(u)/2,n];break;case c.BC:i=[t-r.get(u)/2,n-r.get(a)];break;case c.LC:i=[t,n-r.get(a)/2];break;case c.RC:i=[t-r.get(u),n-r.get(a)/2];break;case c.CC:i=[t-r.get(u)/2,n-r.get(a)/2];break;default:}i&&this.move(i)},_getRegion:function(t){var n;return t?(t=e.Node.one(t),t&&(n=t.get(f))):n=this._posNode.get(l),n},_afterAlignChange:function(e){var t=e.newVal;t&&this._uiSetAlign(t.node,t.points)},_afterAlignOnChange:function(e){this._detachPosAlignUIHandles(),this.get(s)&&this._attachPosAlignUIHandles()}},e.WidgetPositionAlign=c},"3.11.0",{requires:["widget-position"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-stack",function(e,t){function O(e){}var n=e.Lang,r=e.UA,i=e.Node,s=e.Widget,o="zIndex",u="shim",a="visible",f="boundingBox",l="renderUI",c="bindUI",h="syncUI",p="offsetWidth",d="offsetHeight",v="parentNode",m="firstChild",g="ownerDocument",y="width",b="height",w="px",E="shimdeferred",S="shimresize",x="visibleChange",T="widthChange",N="heightChange",C="shimChange",k="zIndexChange",L="contentUpdate",A="stacked";O.ATTRS={shim:{value:r.ie==6},zIndex:{value:0,setter:"_setZIndex"}},O.HTML_PARSER={zIndex:function(e){return this._parseZIndex(e)}},O.SHIM_CLASS_NAME=s.getClassName(u),O.STACKED_CLASS_NAME=s.getClassName(A),O.SHIM_TEMPLATE='<iframe class="'+O.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>',O.prototype={initializer:function(){this._stackNode=this.get(f),this._stackHandles={},e.after(this._renderUIStack,this,l),e.after(this._syncUIStack,this,h),e.after(this._bindUIStack,this,c)},_syncUIStack:function(){this._uiSetShim(this.get(u)),this._uiSetZIndex(this.get(o))},_bindUIStack:function(){this.after(C,this._afterShimChange),this.after(k,this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(O.STACKED_CLASS_NAME)},_parseZIndex:function(e){var t;return!e.inDoc()||e.getStyle("position")==="static"?t="auto":t=e.getComputedStyle("zIndex"),t==="auto"?null:t},_setZIndex:function(e){return n.isString(e)&&(e=parseInt(e,10)),n.isNumber(e)||(e=0),e},_afterShimChange:function(e){this._uiSetShim(e.newVal)},_afterZIndexChange:function(e){this._uiSetZIndex(e.newVal)},_uiSetZIndex:function(e){this._stackNode.setStyle(o,e)},_uiSetShim:function(e){e?(this.get(a)?this._renderShim():this._renderShimDeferred(),r.ie==6&&this._addShimResizeHandlers()):this._destroyShim()},_renderShimDeferred:function(){this._stackHandles[E]=this._stackHandles[E]||[];var e=this._stackHandles[E],t=function(e){e.newVal&&this._renderShim()};e.push(this.on(x,t))},_addShimResizeHandlers:function(){this._stackHandles[S]=this._stackHandles[S]||[];var e=this.sizeShim,t=this._stackHandles[S];t.push(this.after(x,e)),t.push(this.after(T,e)),t.push(this.after(N,e)),t.push(this.after(L,e))},_detachStackHandles:function(e){var t=this._stackHandles[e],n;if(t&&t.length>0)while(n=t.pop())n.detach()},_renderShim:function(){var e=this._shimNode,t=this._stackNode;e||(e=this._shimNode=this._getShimTemplate(),t.insertBefore(e,t.get(m)),this._detachStackHandles(E),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get(v).removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles(E),this._detachStackHandles(S))},sizeShim:function(){var e=this._shimNode,t=this._stackNode;e&&r.ie===6&&this.get(a)&&(e.setStyle(y,t.get(p)+w),e.setStyle(b,t.get(d)+w))},_getShimTemplate:function(){return i.create(O.SHIM_TEMPLATE,this._stackNode.get(g))}},e.WidgetStack=O},"3.11.0",{requires:["base-build","widget"],skinnable:!0});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position-constrain",function(e,t){function m(e){}var n="constrain",r="constrain|xyChange",i="constrainChange",s="preventOverlap",o="align",u="",a="bindUI",f="xy",l="x",c="y",h=e.Node,p="viewportRegion",d="region",v;m.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}},v=m._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}},m.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added"),e.after(this._bindUIPosConstrained,this,a)},getConstrainedXY:function(e,t){t=t||this.get(n);var r=this._getRegion(t===!0?null:t),i=this._posNode.get(d);return[this._constrain(e[0],l,i,r),this._constrain(e[1],c,i,r)]},constrain:function(e,t){var r,i,s=t||this.get(n);s&&(r=e||this.get(f),i=this.getConstrainedXY(r,s),(i[0]!==r[0]||i[1]!==r[1])&&this.set(f,i,{constrained:!0}))},_setConstrain:function(e){return e===!0?e:h.one(e)},_constrain:function(e,t,n,r){if(r){this.get(s)&&(e=this._preventOverlap(e,t,n,r));var i=t==l,o=i?r.width:r.height,u=i?n.width:n.height,a=i?r.left:r.top,f=i?r.right-u:r.bottom-u;if(e<a||e>f)u<o?e<a?e=a:e>f&&(e=f):e=a}return e},_preventOverlap:function(e,t,n,r){var i=this.get(o),s=t===l,a,f,c,h,p,d;return i&&i.points&&v[t][i.points.join(u)]&&(f=this._getRegion(i.node),f&&(a=s?n.width:n.height,c=s?f.left:f.top,h=s?f.right:f.bottom,p=s?f.left-r.left:f.top-r.top,d=s?r.right-f.right:r.bottom-f.bottom),e>c?d<a&&p>a&&(e=c-a):p<a&&d>a&&(e=h)),e},_bindUIPosConstrained:function(){this.after(i,this._afterConstrainChange),this._enableConstraints(this.get(n))},_afterConstrainChange:function(e){this._enableConstraints(e.newVal)},_enableConstraints:function(e){e?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on(r,this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(e){e.constrained||(e.newVal=this.getConstrainedXY(e.newVal))},_getRegion:function(e){var t;return e?(e=h.one(e),e&&(t=e.get(d))):t=this._posNode.get(p),t}},e.WidgetPositionConstrain=m},"3.11.0",{requires:["widget-position"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("overlay",function(e,t){e.Overlay=e.Base.create("overlay",e.Widget,[e.WidgetStdMod,e.WidgetPosition,e.WidgetStack,e.WidgetPositionAlign,e.WidgetPositionConstrain])},"3.11.0",{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0});
YUI.add("gallery-popover",function(c){var v="boundingBox",l="contentBox",b="tl",p="t",a="tr",h="rt",k="r",t="rb",u="br",i="b",o="bl",d="lb",m="l",f="lt",w=27,e=50,q=28,s=18;var n={initializer:function(){},bindUI:function(){this.after("arrowPositionChange",function(y){this._arrow.removeClass(this.getClassName("arrow",y.prevVal));this._arrowMask.removeClass(this.getClassName("arrow","mask",y.prevVal));this._arrow.addClass(this.getClassName("arrow",y.newVal));this._arrowMask.addClass(this.getClassName("arrow","mask",y.newVal))})},renderUI:function(){this._arrow=c.Node.create('<span class="'+this.getClassName("arrow")+'">◣</span>');this._arrowMask=c.Node.create('<span class="'+this.getClassName("arrow","mask")+'"></span>');this.get(v).append(this._arrow).append(this._arrowMask);var y=this.get("arrowPosition");this._arrow.addClass(this.getClassName("arrow",y));this._arrowMask.addClass(this.getClassName("arrow","mask",y));if(c.UA.webkit&&c.UA.os==="windows"){this._arrow.addClass("win-webkit");this._arrow.addClass(c.UA.chrome?"win-chrome":"win-safari")}else{if(c.UA.gecko&&c.UA.os==="windows"){this._arrow.addClass("win-gecko");this._arrow.addClass("win-firefox");if(c.UA.gecko>=1.9&&c.UA.gecko<2){this._arrow.addClass("win-firefox-3")}}}},syncUI:function(){},alignToElement:function(A,N){var z,B,K,M,C,I,D=this.get("arrowPosition"),y,H,J,G,L;if(this.get("showSquare")){s=8}switch(D){case b:z=[c.WidgetPositionAlign.TL,c.WidgetPositionAlign.BC];B={x:-q,y:s};break;case p:z=[c.WidgetPositionAlign.TC,c.WidgetPositionAlign.BC];B={x:0,y:s};break;case a:z=[c.WidgetPositionAlign.TR,c.WidgetPositionAlign.BC];B={x:q,y:s};break;case h:z=[c.WidgetPositionAlign.TR,c.WidgetPositionAlign.LC];B={x:-s,y:-q};break;case k:z=[c.WidgetPositionAlign.RC,c.WidgetPositionAlign.LC];B={x:-s,y:0};break;case t:z=[c.WidgetPositionAlign.BR,c.WidgetPositionAlign.LC];B={x:-s,y:q};break;case u:z=[c.WidgetPositionAlign.BR,c.WidgetPositionAlign.TC];B={x:q,y:-s};break;case i:z=[c.WidgetPositionAlign.BC,c.WidgetPositionAlign.TC];B={x:0,y:-s};break;case o:z=[c.WidgetPositionAlign.BL,c.WidgetPositionAlign.TC];B={x:-q,y:-s};break;case d:z=[c.WidgetPositionAlign.BL,c.WidgetPositionAlign.RC];B={x:s,y:q};break;case m:z=[c.WidgetPositionAlign.LC,c.WidgetPositionAlign.RC];B={x:s,y:0};break;case f:z=[c.WidgetPositionAlign.TL,c.WidgetPositionAlign.RC];B={x:s,y:-q}}x(this._arrow);x(this._arrowMask);this.align(A,z);K=this._posNode.get("region");M=[K.left+B.x,K.top+B.y];this.move(M);if(N){this.constrain(null,N);K=this._posNode.get("region");C=[K.left,K.top];if(D===b||D===p||D===a||D===o||D===i||D===u){if(M[0]!==C[0]){I=M[0]-C[0];this._arrow.setX(this._arrow.getX());this._arrow.setStyle("right","auto");y=this._arrow.getX()+I;if(y+w>K.right){y=K.right-w}else{if(y<K.left){y=K.left}}this._arrow.setX(y);this._arrowMask.setX(this._arrowMask.getX());this._arrowMask.setStyle("right","auto");H=this._arrowMask.getX()+I;if(H+e>K.right){H=K.right-e}else{if(H<K.left){H=K.left}}this._arrowMask.setX(H)}if(M[1]!==C[1]){I=M[1]-C[1];K=this._posNode.get("region");M=[K.left,K.top+I];this.move(M)}}else{if(D===f||D===m||D===d||D===h||D===k||D===t){if(M[1]!==C[1]){I=M[1]-C[1];this._arrow.setY(this._arrow.getY());this._arrow.setStyle("bottom","auto");J=this._arrow.getY()+I;if(J+w>K.bottom){J=K.bottom-w}else{if(J<K.top){J=K.top}}this._arrow.setY(J);this._arrowMask.setY(this._arrowMask.getY());this._arrowMask.setStyle("bottom","auto");G=this._arrowMask.getY()+I;if(G+e>K.bottom){G=K.bottom-e}else{if(G<K.top){G=K.top}}this._arrowMask.setY(J)}if(M[0]!==C[0]){I=M[0]-C[0];K=this._posNode.get("region");M=[K.left+I,K.top];this.move(M)}}}}if(!this._positionMarkerNode){this._positionMarkerNode=c.DOM.create('<div class="popover-position-marker"></div>');c.one("body").append(this._positionMarkerNode)}if(this.get("arrowPosition")==="br"&&this.get("accordian")){this.get("srcNode").getDOMNode().parentNode.style.bottom=""}c.DOM.setXY(this._positionMarkerNode,this._posNode.get("region"));this.align(this._positionMarkerNode,[c.WidgetPositionAlign.TL,c.WidgetPositionAlign.BL]);if(this.get("arrowPosition")==="br"){var E=this;if(!this.get("isRefresh")||!this.get("refreshBottom")||!this.get("refreshRight")){j(E,A)}else{g(E,A)}}if(this.get("extraCSS")){this.get("srcNode").ancestor(".yui3-popover").addClass(this.get("extraCSS"))}}};var r={TOPLEFT:b,TOP:p,TOPRIGHT:a,RIGHTTOP:h,RIGHT:k,RIGHTBOTTOM:t,BOTTOMRIGHT:u,BOTTOM:i,BOTTOMLEFT:o,LEFTBOTTOM:d,LEFT:m,LEFTTOP:f,CSS_PREFIX:"yui3-popover",ATTRS:{arrowPosition:{value:a,validator:function(y){return(y===b||y===p||y===a||y===o||y===i||y===u||y===f||y===m||y===d||y===h||y===k||y===t)}},accordian:{value:false,validator:function(y){return(typeof y==="boolean")}},isRefresh:{value:false},refreshBottom:{value:null},refreshRight:{value:null},extraCSS:{value:""},showSquare:{value:false}}};function x(y){y.setStyle("top","").setStyle("right","").setStyle("bottom","").setStyle("left","")}function j(z,y){(function(){var C=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(E){window.setTimeout(E,1000/60)}})();var D=function(E){return parseInt(E.replace("px",""),10)};var A=z.get("srcNode").getDOMNode();var B=A.parentNode;C(function(){if(!B.style.bottom){var G=D(B.style.top),E;E=310;B.style.bottom=(-1*G)-E+"px"}C(function(){B.style.top=""})})})()}function g(z,y){(function(){var C=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(E){window.setTimeout(E,1000/60)}})();var D=function(E){return parseInt(E.replace("px",""),10)};var A=z.get("srcNode").getDOMNode();var B=A.parentNode;B.style.display="none";C(function(){B.style.top="";B.style.left="";B.style.bottom=z.get("refreshBottom");B.style.right=z.get("refreshRight");C(function(){B.style.display="block"})})})()}c.Popover=c.Base.create("popover",c.Widget,[c.WidgetStdMod,c.WidgetPosition,c.WidgetStack,c.WidgetPositionAlign,c.WidgetPositionConstrain],n,r)},"0.0.1",{requires:F.config.modules["gallery-popover"].requires||[],optional:F.config.modules["gallery-popover"].optional||[]});YUI.add("menus",function(e){var a={};function d(f){a[f.id]=new c(f);return a[f.id]}function b(){e.fire("flickr-menus:hide")}e.menus={add:d,hide:b};function c(f){c.superclass.constructor.apply(this,arguments)}c.NAME="Menu";c.ATTRS={id:{value:""},popover:{},context:{},button_node:{},constrain_node:{},open_on_hover:{value:false},hide_delay:{},scroll:{value:false},button_evt_listeners:{},click_to_hide_handle:{},escape_key_listener:{},use_touch_events:{value:("ontouchstart" in document.documentElement)},show_timer:{},hide_timer:{},hidden_prop:{value:""},onHide:{}};e.extend(c,e.Base,{initializer:function(f){this.set("scroll",f.scroll);this.set("id",f.id);this.set("popover",f.popover);this.set("context",f.context);if(f.button_node instanceof e.Node){this.set("button_node",f.button_node)}else{f.button_node=undefined;delete f.button_node}if(f.constrain_node instanceof e.Node){this.set("constrain_node",f.constrain_node)}else{f.constrain_node=undefined;delete f.constrain_node}e.on("flickr-menus:hide",function(g){if(g==="source:nav-selecta-container"){return}this.hide()},this);this.attachWindowHideHandler();this.attachButtonActionHandler();this.after("button_nodeChange",this.attachButtonActionHandler,this)},show:function(){if(this.get("popover").get("visible")){return false}if(this.get("button_node")){this.get("button_node").addClass("ActiveButt")}e.fire("flickr-menus:hide");if(this.get("button_node")){this.get("popover").alignToElement(this.get("button_node"),this.get("constrain_node")||e.one("#main"))}this.get("popover").show();e.PageContext.set(this.get("context"));e.later(20,this,function(){var g,f;if(!this.get("click_to_hide_handle")){g=e.one("body").on(this.get("use_touch_events")?"touchstart":"click",function(h){if(this.get("popover").get("boundingBox").contains(h.target)||!h.target.ancestor("body",true)){return}this.hide()},this);this.set("click_to_hide_handle",g)}if(!this.get("escape_key_listener")){f=e.keyboardShortcutManager.register({keystring:"27",handler:function(h){this.hide()},context:this.get("context"),scope:this});this.set("escape_key_listener",f)}});if(this.get("scroll")){e.one("#"+this.get("id")).vis.animScrollIntoView(true,40,true)}e.fire("menus:show")},hide:function(){if(!this.get("popover").get("visible")){return false}if(this.get("button_node")){this.get("button_node").removeClass("ActiveButt")}this.get("popover").hide();e.PageContext.unset(this.get("context"));if(this.get("escape_key_listener")){this.get("escape_key_listener").detach();this.set("escape_key_listener",undefined)}if(this.get("click_to_hide_handle")){this.get("click_to_hide_handle").detach();this.set("click_to_hide_handle",undefined)}e.fire("menus:hide");if(typeof this.get("onHide")==="function"){this.get("onHide")()}},toggle:function(){if(this.get("popover").get("visible")){this.hide()}else{this.show()}},attachButtonActionHandler:function(){var g,f,k,j,h=[];if(this.get("button_evt_listeners")){g=this.get("button_evt_listeners");for(f=g.length-1;f>=0;f--){g[f].detach()}this.set("button_evt_listeners",[])}if(this.get("open_on_hover")){j=function(i){if(i.currentTarget.hasClass("DisabledButt")){return}if(i.type==="mouseenter"&&i.currentTarget.hasClass("open")){var l=e.focusTracker.get();if(l.getDOMNode().tagName!=="BODY"){l.blur();this.show()}}if(i.type==="mouseenter"){this.show();return}if(i.type==="touchstart"){i.stopImmediatePropagation()}if(i.type==="mousemove"&&!i.currentTarget.hasClass("open")){this.show();return}if(i.type==="focus"&&document[this.get("hidden_prop")]){return}if(!i.currentTarget.hasClass("open")||i.type==="mouseleave"||i.type==="blur"){this.toggle();i.halt()}};h.push(this.get("button_node").on("focus",j,this));h.push(this.get("button_node").on("blur",j,this));if(this.get("use_touch_events")){h.push(this.get("button_node").on("touchstart",j,this))}h.push(this.get("button_node").on("mouseenter",j,this));h.push(this.get("button_node").on("mouseleave",j,this));h.push(this.get("button_node").once("mousemove",j,this))}else{k=function(l){l.preventDefault();if(l.currentTarget.hasClass("DisabledButt")){return}this.toggle();try{l.currentTarget.blur()}catch(i){}};h.push(this.get("button_node").on("click",k,this))}this.set("button_evt_listeners",h)},attachWindowHideHandler:function(){if(typeof document.hidden!=="undefined"){this.set("hidden_prop","hidden")}else{if(typeof document.mozHidden!=="undefined"){this.set("hidden_prop","mozHidden")}else{if(typeof document.msHidden!=="undefined"){this.set("hidden_prop","msHidden")}else{if(typeof document.webkitHidden!=="undefined"){this.set("hidden_prop","webkitHidden")}}}}}})},"0.0.1",{requires:F.config.modules.menus.requires||[],optional:F.config.modules.menus.optional||[]});YUI.add("share-menu-transjax",function(b){var a=null;b.transjax.add("share-menu",{menu_fragment_error:"Sorry, there was a problem loading the sharing menu.",services_fragment_error:"Sorry, we couldn't find any services for you to share with.",grab_the_link_fragment_error:'There was an error',share_blog_no_blogs:"Sorry, we couldn't find any blogs for your account.",share_blog_choose_blog:"Choose a blog below:",sharing_email_error:"Oops! That doesn't look like a real email address. Try again?",sharing_no_contact:"Hmm... we couldn't find %s in your contacts list. Do you want to try entering their email address instead?",sharing_no_member:"Hmm... we couldn't find %s on Flickr. Do you want to try entering their email address instead?",uber_contact_list_default_text:"screen name, real name, or email",uber_contact_list_max_results:"Showing [results_shown] of [total_results] results. <a href='[url]'>See all...</a>",uber_contact_list_no_realname:"No real name given",generating_guest_pass_msg:"Generating Guest Pass...",sharing_initial_instructions:"Enter email addresses or a contact's screen name",sharing_instructions_one_added:"1 recipient so far... add another?",sharing_instructions_many_added:"%s recipients so far... add another?",sharing_msg_over_limit:"Please limit your message to %s characters or fewer.",spam_url_warning:"Hey! A URL or phrase that you tried to post has been used for abuse on Flickr before. (ex. SPAM) If that's you, stop it! If that's not you, sorry, but you can't post it.",spam_share_warning:"Slow down, partner! To protect the Flickr community against spam, we place a few restrictions on new accounts. You can read more about these restrictions in <a href=\'/help/website/#870679\'>this FAQ</a>.",status_sending_msg:"Sending message..."})},"0.0.1",{requires:["transjax-base"]});(function(){var a="flanal";YUI.add(a,function(c){function b(e,g,d){d=d||{};var f="/flanal_event.gne?target="+e+"&title="+g+("value" in d?"&value="+d.value:"")+("units" in d?"&units="+d.units:"")+"&rand="+Math.random();if(d.sync){c.use("io",function(h){h.io(f,{sync:true})})}else{(new Image()).src=f}c.log(e+" ("+g+")","info","flanal")}c.flanal=b},"0.0.1",{requires:F.config.modules[a].requires||[],optional:F.config.modules[a].optional||[]})}());YUI.add("share-this-v3-dialog-transjax",function(a){a.transjax.add("share-this-v3-dialog",{try_again_later:"D'oh! That didn't work. Please try again later.",following_flickr_waiting:"Following...",following_flickr_success:"Awesome, you're following <a href='http://twitter.com/Flickr' target='_blank'>@Flickr</a>!"})},"0.0.1",{requires:["transjax-base"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("array-extras",function(e,t){var n=e.Array,r=e.Lang,i=Array.prototype;n.lastIndexOf=r._isNative(i.lastIndexOf)?function(e,t,n){return n||n===0?e.lastIndexOf(t,n):e.lastIndexOf(t)}:function(e,t,n){var r=e.length,i=r-1;if(n||n===0)i=Math.min(n<0?r+n:n,r);if(i>-1&&r>0)for(;i>-1;--i)if(i in e&&e[i]===t)return i;return-1},n.unique=function(e,t){var n=0,r=e.length,i=[],s,o,u,a;e:for(;n<r;n++){a=e[n];for(s=0,u=i.length;s<u;s++){o=i[s];if(t){if(t.call(e,a,o,n,e))continue e}else if(a===o)continue e}i.push(a)}return i},n.filter=r._isNative(i.filter)?function(e,t,n){return i.filter.call(e,t,n)}:function(e,t,n){var r=0,i=e.length,s=[],o;for(;r<i;++r)r in e&&(o=e[r],t.call(n,o,r,e)&&s.push(o));return s},n.reject=function(e,t,r){return n.filter(e,function(e,n,i){return!t.call(r,e,n,i)})},n.every=r._isNative(i.every)?function(e,t,n){return i.every.call(e,t,n)}:function(e,t,n){for(var r=0,i=e.length;r<i;++r)if(r in e&&!t.call(n,e[r],r,e))return!1;return!0},n.map=r._isNative(i.map)?function(e,t,n){return i.map.call(e,t,n)}:function(e,t,n){var r=0,s=e.length,o=i.concat.call(e);for(;r<s;++r)r in e&&(o[r]=t.call(n,e[r],r,e));return o},n.reduce=r._isNative(i.reduce)?function(e,t,n,r){return i.reduce.call(e,function(e,t,i,s){return n.call(r,e,t,i,s)},t)}:function(e,t,n,r){var i=0,s=e.length,o=t;for(;i<s;++i)i in e&&(o=n.call(r,o,e[i],i,e));return o},n.find=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e))return e[r];return null},n.grep=function(e,t){return n.filter(e,function(e,n){return t.test(e)})},n.partition=function(e,t,r){var i={matches:[],rejects:[]};return n.each(e,function(n,s){var u=t.call(r,n,s,e)?i.matches:i.rejects;u.push(n)}),i},n.zip=function(e,t){var r=[];return n.each(e,function(e,n){r.push([e,t[n]])}),r},n.flatten=function(e){var t=[],i,s,o;if(!e)return t;for(i=0,s=e.length;i<s;++i)o=e[i],r.isArray(o)?t.push.apply(t,n.flatten(o)):t.push(o);return t}},"3.11.0",{requires:["yui-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-base",function(e,t){function T(){}var n=e.Escape,r=e.Lang,i=e.Array,s=e.Object,o=r.isFunction,u=r.isString,a=r.trim,f=e.Attribute.INVALID_VALUE,l="_functionValidator",c="_sourceSuccess",h="allowBrowserAutocomplete",p="inputNode",d="query",v="queryDelimiter",m="requestTemplate",g="results",y="resultListLocator",b="value",w="valueChange",E="clear",S=d,x=g;T.prototype={initializer:function(){e.before(this._bindUIACBase,this,"bindUI"),e.before(this._syncUIACBase,this,"syncUI"),this.publish(E,{defaultFn:this._defClearFn}),this.publish(S,{defaultFn:this._defQueryFn}),this.publish(x,{defaultFn:this._defResultsFn})},destructor:function(){this._acBaseEvents&&this._acBaseEvents.detach(),delete this._acBaseEvents,delete this._cache,delete this._inputNode,delete this._rawSource},clearCache:function(){return this._cache&&(this._cache={}),this},sendRequest:function(t,n){var r,i=this.get("source");return t||t===""?this._set(d,t):t=this.get(d)||"",i&&(n||(n=this.get(m)),r=n?n.call(this,t):t,i.sendRequest({query:t,request:r,callback:{success:e.bind(this._onResponse,this,t)}})),this},_bindUIACBase:function(){var t=this.get(p),n=t&&t.tokenInput;n&&(t=n.get(p),this._set("tokenInput",n));if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._acBaseEvents=new e.EventHandle([t.on(w,this._onInputValueChange,this),t.on("blur",this._onInputBlur,this),this.after(h+"Change",this._syncBrowserAutocomplete),this.after("sourceTypeChange",this._afterSourceTypeChange),this.after(w,this._afterValueChange)])},_syncUIACBase:function(){this._syncBrowserAutocomplete(),this.set(b,this.get(p).get(b))},_createArraySource:function(e){var t=this;return{type:"array",sendRequest:function(n){t[c](e.concat(),n)}}},_createFunctionSource:function(e){var t=this;return{type:"function",sendRequest:function(n){function i(e){t[c](e||[],n)}var r;(r=e(n.query,i))&&i(r)}}},_createObjectSource:function(e){var t=this;return{type:"object",sendRequest:function(n){var r=n.query;t[c](s.owns(e,r)?e[r]:[],n)}}},_functionValidator:function(e){return e===null||o(e)},_getObjectValue:function(e,t){if(!e)return;for(var n=0,r=t.length;e&&n<r;n++)e=e[t[n]];return e},_parseResponse:function(e,t,r){var i={data:r,query:e,results:[]},s=this.get(y),o=[],u=t&&t.results,a,f,l,c,h,p,d,v,m,g,b;u&&s&&(u=s.call(this,u));if(u&&u.length){a=this.get("resultFilters"),b=this.get("resultTextLocator");for(p=0,d=u.length;p<d;++p)m=u[p],g=b?b.call(this,m):m.toString(),o.push({display:n.html(g),raw:m,text:g});for(p=0,d=a.length;p<d;++p){o=a[p].call(this,e,o.concat());if(!o)return;if(!o.length)break}if(o.length){l=this.get("resultFormatter"),h=this.get("resultHighlighter"),v=this.get("maxResults"),v&&v>0&&o.length>v&&(o.length=v);if(h){c=h.call(this,e,o.concat());if(!c)return;for(p=0,d=c.length;p<d;++p)m=o[p],m.highlighted=c[p],m.display=m.highlighted}if(l){f=l.call(this,e,o.concat());if(!f)return;for(p=0,d=f.length;p<d;++p)o[p].display=f[p]}}}i.results=o,this.fire(x,i)},_parseValue:function(e){var t=this.get(v);return t&&(e=e.split(t),e=e[e.length-1]),r.trimLeft(e)},_setEnableCache:function(e){this._cache=e?{}:null},_setLocator:function(e){if(this[l](e))return e;var t=this;return e=e.toString().split("."),function(n){return n&&t._getObjectValue(n,e)}},_setRequestTemplate:function(e){return this[l](e)?e:(e=e.toString(),function(t){return r.sub(e,{query:encodeURIComponent(t)})})},_setResultFilters:function(t){var n,s;return t===null?[]:(n=e.AutoCompleteFilters,s=function(e){return o(e)?e:u(e)&&n&&o(n[e])?n[e]:!1},r.isArray(t)?(t=i.map(t,s),i.every(t,function(e){return!!e})?t:f):(t=s(t),t?[t]:f))},_setResultHighlighter:function(t){var n;return this[l](t)?t:(n=e.AutoCompleteHighlighters,u(t)&&n&&o(n[t])?n[t]:f)},_setSource:function(t){var n=this.get("sourceType")||r.type(t),i;return t&&o(t.sendRequest)||t===null||n==="datasource"?(this._rawSource=t,t):(i=T.SOURCE_TYPES[n])?(this._rawSource=t,r.isString(i)?this[i](t):i(t)):(e.error("Unsupported source type '"+n+"'. Maybe autocomplete-sources isn't loaded?"),f)},_sourceSuccess:function(e,t){t.callback.success({data:e,response:{results:e}})},_syncBrowserAutocomplete:function(){var e=this.get(p);e.get("nodeName").toLowerCase()==="input"&&e.setAttribute("autocomplete",this.get(h)?"on":"off")},_updateValue:function(e){var t=this.get(v),n,s,o;e=r.trimLeft(e),t&&(n=a(t),o=i.map(a(this.get(b)).split(t),a),s=o.length,s>1&&(o[s-1]=e,e=o.join(n+" ")),e=e+n+" "),this.set(b,e)},_afterSourceTypeChange:function(e){this._rawSource&&this.set("source",this._rawSource)},_afterValueChange:function(e){var t=e.newVal,n=this,r=e.src===T.UI_SRC,i,s,o,u;r||n._inputNode.set(b,t),o=n.get("minQueryLength"),u=n._parseValue(t)||"",o>=0&&u.length>=o?r?(i=n.get("queryDelay"),s=function(){n.fire(S,{inputValue:t,query:u,src:e.src})},i?(clearTimeout(n._delay),n._delay=setTimeout(s,i)):s()):n._set(d,u):(clearTimeout(n._delay),n.fire(E,{prevVal:e.prevVal?n._parseValue(e.prevVal):null,src:e.src}))},_onInputBlur:function(e){var t=this.get(v),n,i,s;if(t&&!this.get("allowTrailingDelimiter")){t=r.trimRight(t),s=i=this._inputNode.get(b);if(t)while((i=r.trimRight(i))&&(n=i.length-t.length)&&i.lastIndexOf(t)===n)i=i.substring(0,n);else i=r.trimRight(i);i!==s&&this.set(b,i)}},_onInputValueChange:function(e){var t=e.newVal;t!==this.get(b)&&this.set(b,t,{src:T.UI_SRC})},_onResponse:function(e,t){e===(this.get(d)||"")&&this._parseResponse(e||"",t.response,t.data)},_defClearFn:function(){this._set(d,null),this._set(g,[])},_defQueryFn:function(e){this.sendRequest(e.query)},_defResultsFn:function(e){this._set(g,e[g])}},T.ATTRS={allowBrowserAutocomplete:{value:!1},allowTrailingDelimiter:{value:!1},enableCache:{lazyAdd:!1,setter:"_setEnableCache",value:!0},inputNode:{setter:e.one,writeOnce:"initOnly"},maxResults:{value:0},minQueryLength:{value:1},query:{readOnly:!0,value:null},queryDelay:{value:100},queryDelimiter:{value:null},requestTemplate:{setter:"_setRequestTemplate",value:null},resultFilters:{setter:"_setResultFilters",value:[]},resultFormatter
:{validator:l,value:null},resultHighlighter:{setter:"_setResultHighlighter",value:null},resultListLocator:{setter:"_setLocator",value:null},results:{readOnly:!0,value:[]},resultTextLocator:{setter:"_setLocator",value:null},source:{setter:"_setSource",value:null},sourceType:{value:null},tokenInput:{readOnly:!0},value:{value:""}},T._buildCfg={aggregates:["SOURCE_TYPES"],statics:["UI_SRC"]},T.SOURCE_TYPES={array:"_createArraySource","function":"_createFunctionSource",object:"_createObjectSource"},T.UI_SRC=e.Widget&&e.Widget.UI_SRC||"ui",e.AutoCompleteBase=T},"3.11.0",{optional:["autocomplete-sources"],requires:["array-extras","base-build","escape","event-valuechange","node-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-sources",function(e,t){var n=e.AutoCompleteBase,r=e.Lang,i="_sourceSuccess",s="maxResults",o="requestTemplate",u="resultListLocator";e.mix(n.prototype,{_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_beforeCreateObjectSource:function(t){return t instanceof e.Node&&t.get("nodeName").toLowerCase()==="select"?this._createSelectSource(t):e.JSONPRequest&&t instanceof e.JSONPRequest?this._createJSONPSource(t):this._createObjectSource(t)},_createIOSource:function(t){function a(n){var o=n.request;if(r._cache&&o in r._cache){r[i](r._cache[o],n);return}s&&s.isInProgress()&&s.abort(),s=e.io(r._getXHRUrl(t,n),{on:{success:function(t,s){var u;try{u=e.JSON.parse(s.responseText)}catch(a){e.error("JSON parse error",a)}u&&(r._cache&&(r._cache[o]=u),r[i](u,n))}}})}var n={type:"io"},r=this,s,o,u;return n.sendRequest=function(t){o=t;if(u)return;u=!0,e.use("io-base","json-parse",function(){n.sendRequest=a,a(o)})},n},_createJSONPSource:function(t){function u(e){var n=e.request,s=e.query;if(r._cache&&n in r._cache){r[i](r._cache[n],e);return}t._config.on.success=function(t){r._cache&&(r._cache[n]=t),r[i](t,e)},t.send(s)}var n={type:"jsonp"},r=this,s,o;return n.sendRequest=function(i){s=i;if(o)return;o=!0,e.use("jsonp",function(){t instanceof e.JSONPRequest||(t=new e.JSONPRequest(t,{format:e.bind(r._jsonpFormatter,r)})),n.sendRequest=u,u(s)})},n},_createSelectSource:function(e){var t=this;return{type:"select",sendRequest:function(n){var r=[];e.get("options").each(function(e){r.push({html:e.get("innerHTML"),index:e.get("index"),node:e,selected:e.get("selected"),text:e.get("text"),value:e.get("value")})}),t[i](r,n)}}},_createStringSource:function(e){return this._YQL_SOURCE_REGEX.test(e)?this._createYQLSource(e):e.indexOf("{callback}")!==-1?this._createJSONPSource(e):this._createIOSource(e)},_createYQLSource:function(t){function c(o){var u=o.query,a=n.get("yqlEnv"),f=n.get(s),c,h,p;p=r.sub(t,{maxResults:f>0?f:1e3,request:o.request,query:u});if(n._cache&&p in n._cache){n[i](n._cache[p],o);return}c=function(e){n._cache&&(n._cache[p]=e),n[i](e,o)},h={proto:n.get("yqlProtocol")},l?(l._callback=c,l._opts=h,l._params.q=p,a&&(l._params.env=a)):l=new e.YQLRequest(p,{on:{success:c},allowCache:!1},a?{env:a}:null,h),l.send()}var n=this,o={type:"yql"},a,f,l;return n.get(u)||n.set(u,n._defaultYQLLocator),o.sendRequest=function(t){a=t,f||(f=!0,e.use("yql",function(){o.sendRequest=c,c(a)}))},o},_defaultYQLLocator:function(t){var n=t&&t.query&&t.query.results,i;return n&&r.isObject(n)?(i=e.Object.values(n)||[],n=i.length===1?i[0]:i,r.isArray(n)||(n=[n])):n=[],n},_getXHRUrl:function(e,t){var n=this.get(s);return t.query!==t.request&&(e+=t.request),r.sub(e,{maxResults:n>0?n:1e3,query:encodeURIComponent(t.query)})},_jsonpFormatter:function(e,t,n){var i=this.get(s),u=this.get(o);return u&&(e+=u(n)),r.sub(e,{callback:t,maxResults:i>0?i:1e3,query:encodeURIComponent(n)})}}),e.mix(n.ATTRS,{yqlEnv:{value:null},yqlProtocol:{value:"http"}}),e.mix(n.SOURCE_TYPES,{io:"_createIOSource",jsonp:"_createJSONPSource",object:"_beforeCreateObjectSource",select:"_createSelectSource",string:"_createStringSource",yql:"_createYQLSource"},!0)},"3.11.0",{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("lang/autocomplete-list_en",function(e){e.Intl.add("autocomplete-list","en",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use up and down arrows to select."})},"3.11.0");
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("selector-css2",function(e,t){var n="parentNode",r="tagName",i="attributes",s="combinator",o="pseudos",u=e.Selector,a={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:!0,_isXML:function(){var t=e.config.doc.createElement("div").tagName!=="DIV";return t}(),shorthand:{"\\#(-?[_a-z0-9]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(t,n){return e.DOM.getAttribute(t,n)!==""},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(t){return e.DOM._children(t[n])[0]===t}},_bruteQuery:function(t,n,r){var i=[],s=[],o,a=u._tokenize(t),f=a[a.length-1],l=e.DOM._getDoc(n),c,h,p,d,v;if(f){h=f.id,p=f.className,d=f.tagName||"*";if(n.getElementsByTagName)h&&(n.all||n.nodeType===9||e.DOM.inDoc(n))?s=e.DOM.allById(h,n):p?s=n.getElementsByClassName(p):s=n.getElementsByTagName(d);else{o=[],c=n.firstChild,v=d==="*";while(c){while(c)c.tagName>"@"&&(v||c.tagName===d)&&s.push(c),o.push(c),c=c.firstChild;while(o.length>0&&!c)c=o.pop().nextSibling}}s.length&&(i=u._filterNodes(s,a,r))}return i},_filterNodes:function(t,n,r){var i=0,s,o=n.length,a=o-1,f=[],l=t[0],c=l,h=e.Selector.getters,p,d,v,m,g,y,b,w;for(i=0;c=l=t[i++];){a=o-1,m=null;e:while(c&&c.tagName){v=n[a],b=v.tests,s=b.length;if(s&&!g)while(w=b[--s]){p=w[1],h[w[0]]?y=h[w[0]](c,w[0]):(y=c[w[0]],w[0]==="tagName"&&!u._isXML&&(y=y.toUpperCase()),typeof y!="string"&&y!==undefined&&y.toString?y=y.toString():y===undefined&&c.getAttribute&&(y=c.getAttribute(w[0],2)));if(p==="="&&y!==w[2]||typeof p!="string"&&p.test&&!p.test(y)||!p.test&&typeof p=="function"&&!p(c,w[0],w[2])){if(c=c[m])while(c&&(!c.tagName||v.tagName&&v.tagName!==c.tagName))c=c[m];continue e}}a--;if(!!g||!(d=v.combinator)){f.push(l);if(r)return f;break}m=d.axis,c=c[m];while(c&&!c.tagName)c=c[m];d.direct&&(m=null)}}return l=c=null,f},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:!0},"+":{axis:"previousSibling",direct:!0}},_parsers:[{name:i,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(t,n){var r=t[2]||"",i=u.operators,s=t[3]?t[3].replace(/\\/g,""):"",o;if(t[1]==="id"&&r==="="||t[1]==="className"&&e.config.doc.documentElement.getElementsByClassName&&(r==="~="||r==="="))n.prefilter=t[1],t[3]=s,n[t[1]]=t[1]==="id"?t[3]:s;r in i&&(o=i[r],typeof o=="string"&&(t[3]=s.replace(u._reRegExpTokens,"\\$1"),o=new RegExp(o.replace("{val}",t[3]))),t[2]=o);if(!n.last||n.prefilter!==t[1])return t.slice(1)}},{name:r,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(e,t){var n=e[1];u._isXML||(n=n.toUpperCase()),t.tagName=n;if(n!=="*"&&(!t.last||t.prefilter))return[r,"=",n];t.prefilter||(t.prefilter="tagName")}},{name:s,re:/^\s*([>+~]|\s)\s*/,fn:function(e,t){}},{name:o,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(e,t){var n=u[o][e[1]];return n?(e[2]&&(e[2]=e[2].replace(/\\/g,"")),[e[2],n]):!1}}],_getToken:function(e){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]}},_tokenize:function(t){t=t||"",t=u._parseSelector(e.Lang.trim(t));var n=u._getToken(),r=t,i=[],o=!1,a,f,l,c;e:do{o=!1;for(l=0;c=u._parsers[l++];)if(a=c.re.exec(t)){c.name!==s&&(n.selector=t),t=t.replace(a[0],""),t.length||(n.last=!0),u._attrFilters[a[1]]&&(a[1]=u._attrFilters[a[1]]),f=c.fn(a,n);if(f===!1){o=!1;break e}f&&n.tests.push(f);if(!t.length||c.name===s)i.push(n),n=u._getToken(n),c.name===s&&(n.combinator=e.Selector.combinators[a[1]]);o=!0}}while(o&&t.length);if(!o||t.length)i=[];return i},_replaceMarkers:function(e){return e=e.replace(/\[/g,"\ue003"),e=e.replace(/\]/g,"\ue004"),e=e.replace(/\(/g,"\ue005"),e=e.replace(/\)/g,"\ue006"),e},_replaceShorthand:function(t){var n=e.Selector.shorthand,r;for(r in n)n.hasOwnProperty(r)&&(t=t.replace(new RegExp(r,"gi"),n[r]));return t},_parseSelector:function(t){var n=e.Selector._replaceSelector(t),t=n.selector;return t=e.Selector._replaceShorthand(t),t=e.Selector._restore("attr",t,n.attrs),t=e.Selector._restore("pseudo",t,n.pseudos),t=e.Selector._replaceMarkers(t),t=e.Selector._restore("esc",t,n.esc),t},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(t,n){return e.DOM.getAttribute(t,n)},id:function(t,n){return e.DOM.getId(t)}}};e.mix(e.Selector,a,!0),e.Selector.getters.src=e.Selector.getters.rel=e.Selector.getters.href,e.Selector.useNative&&e.config.doc.querySelector&&(e.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]")},"3.11.0",{requires:["selector-native"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("selector-css3",function(e,t){e.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/,e.Selector._getNth=function(t,n,r,i){e.Selector._reNth.test(n);var s=parseInt(RegExp.$1,10),o=RegExp.$2,u=RegExp.$3,a=parseInt(RegExp.$4,10)||0,f=[],l=e.DOM._children(t.parentNode,r),c;u?(s=2,c="+",o="n",a=u==="odd"?1:0):isNaN(s)&&(s=o?1:0);if(s===0)return i&&(a=l.length-a+1),l[a-1]===t?!0:!1;s<0&&(i=!!i,s=Math.abs(s));if(!i){for(var h=a-1,p=l.length;h<p;h+=s)if(h>=0&&l[h]===t)return!0}else for(var h=l.length-a,p=l.length;h>=0;h-=s)if(h<p&&l[h]===t)return!0;return!1},e.mix(e.Selector.pseudos,{root:function(e){return e===e.ownerDocument.documentElement},"nth-child":function(t,n){return e.Selector._getNth(t,n)},"nth-last-child":function(t,n){return e.Selector._getNth(t,n,null,!0)},"nth-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName)},"nth-last-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName,!0)},"last-child":function(t){var n=e.DOM._children(t.parentNode);return n[n.length-1]===t},"first-of-type":function(t){return e.DOM._children(t.parentNode,t.tagName)[0]===t},"last-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n[n.length-1]===t},"only-child":function(t){var n=e.DOM._children(t.parentNode);return n.length===1&&n[0]===t},"only-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n.length===1&&n[0]===t},empty:function(e){return e.childNodes.length===0},not:function(t,n){return!e.Selector.test(t,n)},contains:function(e,t){var n=e.innerText||e.textContent||"";return n.indexOf(t)>-1},checked:function(e){return e.checked===!0||e.selected===!0},enabled:function(e){return e.disabled!==undefined&&!e.disabled},disabled:function(e){return e.disabled}}),e.mix(e.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"}),e.Selector.combinators["~"]={axis:"previousSibling"}},"3.11.0",{requires:["selector-native","selector-css2"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("shim-plugin",function(e,t){function n(e){this.init(e)}n.CLASS_NAME="yui-node-shim",n.TEMPLATE='<iframe class="'+n.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"'+'src="javascript:false" tabindex="-1" role="presentation"'+'style="position:absolute; z-index:-1;"></iframe>',n.prototype={init:function(e){this._host=e.host,this.initEvents(),this.insert(),this.sync()},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this)},getShim:function(){return this._shim||(this._shim=e.Node.create(n.TEMPLATE,this._host.get("ownerDocument")))},insert:function(){var e=this._host;this._shim=e.insertBefore(this.getShim(),e.get("firstChild"))},sync:function(){var e=this._shim,t=this._host;e&&e.setAttrs({width:t.getStyle("width"),height:t.getStyle("height")})},destroy:function(){var e=this._shim;e&&e.remove(!0),this._resizeHandle.detach()}},n.NAME="Shim",n.NS="shim",e.namespace("Plugin"),e.Plugin.Shim=n},"3.11.0",{requires:["node-style","node-pluginhost"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-list",function(e,t){var n=e.Lang,r=e.Node,i=e.Array,s=e.UA.ie&&e.UA.ie<7,o=9,u="_CLASS_ITEM",a="_CLASS_ITEM_ACTIVE",f="_CLASS_ITEM_HOVER",l="_SELECTOR_ITEM",c="activeItem",h="alwaysShowList",p="circular",d="hoveredItem",v="id",m="item",g="list",y="result",b="results",w="visible",E="width",S="select",x=e.Base.create("autocompleteList",e.Widget,[e.AutoCompleteBase,e.WidgetPosition,e.WidgetPositionAlign],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",UI_EVENTS:function(){var t=e.merge(e.Node.DOM_EVENTS);return delete t.valuechange,delete t.valueChange,t}(),initializer:function(){var t=this.get("inputNode");if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._listEvents=[],this.DEF_PARENT_NODE=t.get("parentNode"),this[u]=this.getClassName(m),this[a]=this.getClassName(m,"active"),this[f]=this.getClassName(m,"hover"),this[l]="."+this[u],this.publish(S,{defaultFn:this._defSelectFn})},destructor:function(){while(this._listEvents.length)this._listEvents.pop().detach();this._ariaNode&&this._ariaNode.remove().destroy(!0)},bindUI:function(){this._bindInput(),this._bindList()},renderUI:function(){var t=this._createAriaNode(),n=this.get("boundingBox"),r=this.get("contentBox"),i=this._inputNode,o=this._createListNode(),u=i.get("parentNode");i.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":g,"aria-expanded":!1,"aria-owns":o.get("id")}),u.append(t),s&&n.plug(e.Plugin.Shim),this._ariaNode=t,this._boundingBox=n,this._contentBox=r,this._listNode=o,this._parentNode=u},syncUI:function(){this._syncResults(),this._syncVisibility()},hide:function(){return this.get(h)?this:this.set(w,!1)},selectItem:function(e,t){if(e){if(!e.hasClass(this[u]))return this}else{e=this.get(c);if(!e)return this}return this.fire(S,{itemNode:e,originEvent:t||null,result:e.getData(y)}),this},_activateNextItem:function(){var e=this.get(c),t;return e?t=e.next(this[l])||(this.get(p)?null:e):t=this._getFirstItemNode(),this.set(c,t),this},_activatePrevItem:function(){var e=this.get(c),t=e?e.previous(this[l]):this.get(p)&&this._getLastItemNode();return this.set(c,t||null),this},_add:function(t){var r=[];return i.each(n.isArray(t)?t:[t],function(e){r.push(this._createItemNode(e).setData(y,e))},this),r=e.all(r),this._listNode.append(r.toFrag()),r},_ariaSay:function(e,t){var r=this.get("strings."+e);this._ariaNode.set("text",t?n.sub(r,t):r)},_bindInput:function(){var e=this._inputNode,t,n,r;this.get("align")===null&&(r=this.get("tokenInput"),t=r&&r.get("boundingBox")||e,this.set("align",{node:t,points:["tl","bl"]}),!this.get(E)&&(n=t.get("offsetWidth"))&&this.set(E,n)),this._listEvents=this._listEvents.concat([e.after("blur",this._afterListInputBlur,this),e.after("focus",this._afterListInputFocus,this)])},_bindList:function(){this._listEvents=this._listEvents.concat([e.one("doc").after("click",this._afterDocClick,this),e.one("win").after("windowresize",this._syncPosition,this),this.after({mouseover:this._afterMouseOver,mouseout:this._afterMouseOut,activeItemChange:this._afterActiveItemChange,alwaysShowListChange:this._afterAlwaysShowListChange,hoveredItemChange:this._afterHoveredItemChange,resultsChange:this._afterResultsChange,visibleChange:this._afterVisibleChange}),this._listNode.delegate("click",this._onItemClick,this[l],this)])},_clear:function(){this.set(c,null),this._set(d,null),this._listNode.get("children").remove(!0)},_createAriaNode:function(){var e=r.create(this.ARIA_TEMPLATE);return e.addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",role:"status"})},_createItemNode:function(t){var n=r.create(this.ITEM_TEMPLATE);return n.addClass(this[u]).setAttrs({id:e.stamp(n),role:"option"}).setAttribute("data-text",t.text).append(t.display)},_createListNode:function(){var t=this.get("listNode")||r.create(this.LIST_TEMPLATE);return t.addClass(this.getClassName(g)).setAttrs({id:e.stamp(t),role:"listbox"}),this._set("listNode",t),this.get("contentBox").append(t),t},_getFirstItemNode:function(){return this._listNode.one(this[l])},_getLastItemNode:function(){return this._listNode.one(this[l]+":last-child")},_syncPosition:function(){this._syncUIPosAlign(),this._syncShim()},_syncResults:function(e){e||(e=this.get(b)),this._clear(),e.length&&(this._add(e),this._ariaSay("items_available")),this._syncPosition(),this.get("activateFirstItem")&&!this.get(c)&&this.set(c,this._getFirstItemNode())},_syncShim:s?function(){var e=this._boundingBox.shim;e&&e.sync()}:function(){},_syncVisibility:function(t){this.get(h)&&(t=!0,this.set(w,t)),typeof t=="undefined"&&(t=this.get(w)),this._inputNode.set("aria-expanded",t),this._boundingBox.set("aria-hidden",!t),t?this._syncPosition():(this.set(c,null),this._set(d,null),this._boundingBox.get("offsetWidth")),e.UA.ie===7&&e.one("body").addClass("yui3-ie7-sucks").removeClass("yui3-ie7-sucks")},_afterActiveItemChange:function(t){var n=this._inputNode,r=t.newVal,i=t.prevVal,s;i&&i._node&&i.removeClass(this[a]),r?(r.addClass(this[a]),n.set("aria-activedescendant",r.get(v))):n.removeAttribute("aria-activedescendant"),this.get("scrollIntoView")&&(s=r||n,(!s.inRegion(e.DOM.viewportRegion(),!0)||!s.inRegion(this._contentBox,!0))&&s.scrollIntoView())},_afterAlwaysShowListChange:function(e){this.set(w,e.newVal||this.get(b).length>0)},_afterDocClick:function(e){var t=this._boundingBox,n=e.target;n!==this._inputNode&&n!==t&&n.ancestor("#"+t.get("id"),!0)&&this.hide()},_afterHoveredItemChange:function(e){var t=e.newVal,n=e.prevVal;n&&n.removeClass(this[f]),t&&t.addClass(this[f])},_afterListInputBlur:function(){this._listInputFocused=!1,this.get(w)&&!this._mouseOverList&&(this._lastInputKey!==o||!this.get("tabSelect")||!this.get(c))&&this.hide()},_afterListInputFocus:function(){this._listInputFocused=!0},_afterMouseOver:function(e){var t=e.domEvent.target.ancestor(this[l],!0);this._mouseOverList=!0,t&&this._set(d,t)},_afterMouseOut:function(){this._mouseOverList=!1,this._set(d,null)},_afterResultsChange:function(e){this._syncResults(e.newVal
),this.get(h)||this.set(w,!!e.newVal.length)},_afterVisibleChange:function(e){this._syncVisibility(!!e.newVal)},_onItemClick:function(e){var t=e.currentTarget;this.set(c,t),this.selectItem(t,e)},_defSelectFn:function(e){var t=e.result.text;this._inputNode.focus(),this._updateValue(t),this._ariaSay("item_selected",{item:t}),this.hide()}},{ATTRS:{activateFirstItem:{value:!1},activeItem:{setter:e.one,value:null},alwaysShowList:{value:!1},circular:{value:!0},hoveredItem:{readOnly:!0,value:null},listNode:{writeOnce:"initOnly",value:null},scrollIntoView:{value:!1},strings:{valueFn:function(){return e.Intl.get("autocomplete-list")}},tabSelect:{value:!0},visible:{value:!1}},CSS_PREFIX:e.ClassNameManager.getClassName("aclist")});e.AutoCompleteList=x,e.AutoComplete=x},"3.11.0",{lang:["en","es","hu","it"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:!0});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-plugin",function(e,t){function r(e){e.inputNode=e.host,!e.render&&e.render!==!1&&(e.render=!0),r.superclass.constructor.apply(this,arguments)}var n=e.Plugin;e.extend(r,e.AutoCompleteList,{},{NAME:"autocompleteListPlugin",NS:"ac",CSS_PREFIX:e.ClassNameManager.getClassName("aclist")}),n.AutoComplete=r,n.AutoCompleteList=r},"3.11.0",{requires:["autocomplete-list","node-pluginhost"]});
YUI.add("bo-selecta-transjax",function(a){a.transjax.add("bo-selecta",{me:'me',loading:'Loading...',uber_contact_list_view_profile:'View Profile',uber_contact_list_friend_and_family:'Friend &amp; Family',uber_contact_list_friend:'Friend',uber_contact_list_family:'Family',uber_contact_list_contact:'Contact',uber_contact_list_removed:'Removed',uber_contact_list_edit:'Edit',uber_contact_list_default_text:'screen name, real name, or email',uber_contact_list_max_results:'Showing [results_shown] of [total_results] results. <a href="[url]">See all...</a>',uber_contact_list_no_realname:'No real name given',bo_selecta_no_contacts_found:'No contacts found.',bo_selecta_no_members_found:'No members found.',bo_selecta_global_search_msg:'Search through all Flickr members?',bo_selecta_global_search_msg_2:'Search all Flickr members?',too_many_results:'We found too many results to display here. Please type a few more characters.'})},"0.0.1",{requires:["transjax-base"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-local",function(e,t){var n=e.Lang,r=function(){r.superclass.constructor.apply(this,arguments)};e.mix(r,{NAME:"dataSourceLocal",ATTRS:{source:{value:null}},_tId:0,transactions:{},issueCallback:function(e,t){var n=e.on||e.callback,r=n&&n.success,i=e.details[0];i.error=e.error||e.response.error,i.error&&(t.fire("error",i),r=n&&n.failure),r&&r(i)}}),e.extend(r,e.Base,{initializer:function(e){this._initEvents()},_initEvents:function(){this.publish("request",{defaultFn:e.bind("_defRequestFn",this),queuable:!0}),this.publish("data",{defaultFn:e.bind("_defDataFn",this),queuable:!0}),this.publish("response",{defaultFn:e.bind("_defResponseFn",this),queuable:!0})},_defRequestFn:function(e){var t=this.get("source"),r=e.details[0];n.isUndefined(t)&&(r.error=new Error("Local source undefined")),r.data=t,this.fire("data",r)},_defDataFn:function(e){var t=e.data,r=e.meta,i={results:n.isArray(t)?t:[t],meta:r?r:{}},s=e.details[0];s.response=i,this.fire("response",s)},_defResponseFn:function(e){r.issueCallback(e,this)},sendRequest:function(e){var t=r._tId++,n;return e=e||{},n=e.on||e.callback,this.fire("request",{tId:t,request:e.request,on:n,callback:n,cfg:e.cfg||{}}),t}}),e.namespace("DataSource").Local=r},"3.11.0",{requires:["base"]});
YUI.add("bo-selecta-global-search-datasource",function(a){a.BoSelectaGlobalSearchDataSource=function(b){a.BoSelectaGlobalSearchDataSource.superclass.constructor.apply(this,arguments);this.request=null;this.selector=b.selector};a.extend(a.BoSelectaGlobalSearchDataSource,a.DataSource.Local,{_defRequestFn:function(d){var c,b=this;if(this.request&&this.request.readyState<4){this.request.abort()}this.selector.loadingBox.setStyle("display","block");c=decodeURIComponent(d.request);this.request=a.flickrAPI.callMethod("flickr.people.search",{username:c},{success:function(j,p){var q=j.data,i=j.params;if(!b.selector.searchingGlobally){b.selector.loadingBox.setStyle("display","none");return}var l=[];var r=q.people.person;var k,h;for(var g=0,m=r.length;g<m;g++){h=r[g];k={n:h.nsid,e:h.email,u:h.username,r:h.realname,a:h.path_alias,d:h.friend,y:h.family,s:h.iconserver,f:h.iconfarm};k[0]=h.name;k.i=(k.f&&k.f!==0&&k.s&&k.s!==0)?"http://farm"+k.f+".static"+(a.config.flickr.dev?"-dev":"")+".flickr.com/"+k.s+"/buddyicons/"+k.n+".jpg":"http://www.flickr.com/images/buddyicon.gif";l.push(k)}if(l.length===0){if(!b.selector.hideNoContactMessage){l.push({message:a.transjax.get("bo-selecta","bo_selecta_no_members_found"),disableActive:true})}if(b.selector.zeroResultsMessages.length>0){var f,o,e;for(var g=0,m=b.selector.zeroResultsMessages.length;g<m;g++){f=b.selector.zeroResultsMessages[g];if(f.validator(b.selector)){l.push(f)}}}}b.selector.loadingBox.setStyle("display","none");b.fire("data",a.mix({data:l},d))},failure:function(g,f){var e=g.data,i=g.params,h=[];h.push({message:a.transjax.get("bo-selecta","too_many_results"),totalResultsMessage:true});b.selector.loadingBox.setStyle("display","none");b.fire("data",a.mix({data:h},d))}});return d.tId}})},"0.0.1",{requires:["bo-selecta-transjax","datasource-local","gallery-flickr-api"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-function",function(e,t){var n=e.Lang,r=function(){r.superclass.constructor.apply(this,arguments)};e.mix(r,{NAME:"dataSourceFunction",ATTRS:{source:{validator:n.isFunction}}}),e.extend(r,e.DataSource.Local,{_defRequestFn:function(e){var t=this.get("source"),n=e.details[0];if(t)try{n.data=t(e.request,this,e)}catch(r){n.error=r}else n.error=new Error("Function data failure");return this.fire("data",n),e.tId}}),e.DataSource.Function=r},"3.11.0",{requires:["datasource-local"]});
YUI.add("image-fader",function(b){function a(c,d){d=b.Lang.isNumber(d)?d:1;if(b.Lang.isString(c)){c=b.all(c)}c.on("load",function(g){var f;if(g.target.inDoc()){f=new b.Anim({node:g.target,to:{opacity:d},duration:0.2});f.run()}})}b.imageFader={attach:a}},"0.0.1",{requires:["node","anim"]});YUI.add("bo-selecta-3",function(b){b.BoSelecta3=function(d,c){c=c||{};this.showUsername=c.showUsername||true;this.showSubtitle=c.showSubtitle||false;this.showIcon=c.showIcon||false;this.showRelationship=c.showRelationship||false;this.usePersonMenu=c.usePersonMenu||false;this.linkUsernameToPhotostream=c.linkUsernameToPhotostream||false;this.linkSubtitle=c.linkSubtitle||false;this.showEditRelationshipLink=c.showEditRelationshipLink||false;this.searchOnUsername=c.searchOnUsername||true;this.searchOnRealname=c.searchOnRealname||false;this.searchOnEmail=c.searchOnEmail||false;this.searchOnPathAlias=c.searchOnPathAlias||false;this.searchUsingSoundex=c.searchUsingSoundex||false;this.includeUser=c.includeUser||false;this.includeAddressBook=c.includeAddressBook||false;this.maxResultsDisplayed=c.maxResultsDisplayed||5;this.globalMaxResultsDisplayed=c.globalMaxResultsDisplayed||10;this.showTotalResults=c.showTotalResults||false;this.disableMouseHover=c.disableMouseHover||false;this.selectFirstItem=c.selectFirstItem||false;this.hideNoContactMessage=c.hideNoContactMessage||false;this.zeroResultsMessages=c.zeroResultsMessages||[];this.preloadText=c.preloadText||"";this.defaultText=c.defaultText||"";this.loadingText=c.loadingText||b.transjax.get("bo-selecta","loading");this.focusOnFetch=c.focusOnFetch||false;this.fetchDataImmediately=c.fetchDataImmediately||false;this.allowNoContacts=c.allowNoContacts||false;this.allowFormSubmit=c.allowFormSubmit||false;this.respectCanTagFlag=c.respectCanTagFlag||false;this.apiURL=c.apiURL||b.config.flickr.people.api_url;this.enableGlobalSearch=c.enableGlobalSearch||false;this.defaultContainerWidth=c.defaultContainerWidth||250;this.minListWidth=c.minListWidth||228;this.maxListWidth=c.maxListWidth||500;this.loadTransparently=c.loadTransparently||false;if(this.includeUser){this.meString=b.transjax.get("bo-selecta","me").toLowerCase()}this.contacts=null;this.skipList={};this.shadowInit=false;this.fetchingData=false;this.haveTriedToFetchData=false;this.searchingGlobally=false;this._initHTML(d);this._initAutoComplete();if(this.fetchDataImmediately){this.fetchData()}};b.augment(b.BoSelecta3,b.EventTarget);b.BoSelecta3.prototype._initHTML=function(e){if(b.Lang.isString(e)){e=b.one(e)}if(!e instanceof b.Node){e=b.one("#BoSelecta_input")}this.inputField=e;this.container=this.inputField.get("parentNode");var c=this.container.all(".no-js-fallback");c.setStyle("display","none");this.container.addClass("bo-selecta-3");this.container.addClass("yui-skin-sam");this.containerId=b.stamp(this.container);this.inputField.addClass("input");var d=this.container.all(".loading");if(d.size()>0){this.loadingBox=d.item(0);this.loadingBox.setStyle("display",this.fetchDataImmediately&&!this.loadTransparently?"block":"none")}else{this.loadingBox=b.Node.create('<div class="loading">'+this.loadingText+"</div>");this.loadingBox.setStyle("display",this.fetchDataImmediately&&!this.loadTransparently?"block":"none");this.container.append(this.loadingBox)}this.inputField.set("disabled",false);this.inputField.set("value",this.preloadText);this.inputField.addClass("grey");this.inputField.on("focus",this.clearDefaultText,this,true);this.inputField.on("blur",function(f){if(this.inputField.get("value")===""){this.restoreDefaultText()}},this,true);if(!this.allowFormSubmit){this.form=this.container.ancestor("form",true);if(this.form){this.form.on("submit",function(f){f.halt()})}}this.maxInputWidth=parseInt(this.container.getStyle("width"),10)||this.defaultContainerWidth;this.defaultInputWidth=parseInt(this.inputField.getStyle("width"),10)||this.defaultContainerWidth};b.BoSelecta3.prototype._initAutoComplete=function(){var c=this;this.contactsCacheDataSource=new b.DataSource.Function({source:function(d){return c._searchContacts(d)}});this.globalSearchDataSource=new b.BoSelectaGlobalSearchDataSource({selector:this});this.autoComp=new b.AutoComplete({inputNode:this.inputField,source:this.contactsCacheDataSource,resultTextLocator:function(d){if(d&&d.u){return b.BoSelecta3.sanitizeString(d.u)}return""},resultFormatter:function(f,d,e){return c._formatResult(f,d,e)},activateFirstItem:this.selectFirstItem,queryDelay:0,render:true});this.autoComp.on("select",this._onItemSelectEvent,this,true);this.autoComp.on("query",this._handleQueryChange,this,true);this.autoComp.after("query",this._resizeListToFit,this,true);this.inputField.on("keydown",this._onInputFieldKeyDown,this,true);this.inputField.on("focus",function(f){var d=c.getQuery();if(d){c.autoComp.sendRequest(d)}});this.inputField.on("blur",function(d){var f=c.autoComp.get("visible");if(f){if(!c.resultsHideHandler){c.resultsHideHandle=b.one("document").on("click",function(g){if(g.target.ancestor(".yui3-aclist-item")){return}b.fire("BoSelecta:widgetBlur");b.fire("flickr-menus:hide");c.resultsHideHandle.detach()})}}else{b.fire("BoSelecta:widgetBlur")}});b.on("flickr-menus:hide",this.hideResults,this,true)};b.BoSelecta3.prototype._fetchData=function(){if(this.fetchingData){return}this.fetchingData=true;this.haveTriedToFetchData=true;this.fire("BoSelecta:dataFetchStart");if(!this.loadTransparently){this.inputField.setStyle("display","none");this.loadingBox.setStyle("display","block")}var c=this.apiURL;var d=this;var e={success:function(f,g,l){if(g.responseText==="-1"||g.responseText===""){if(d.allowNoContacts){d.contacts=[];if(!d.loadTransparently){d.restoreDefaultText();d.loadingBox.setStyle("display","none");d.inputField.setStyle("display","inline");if(d.inputField.get("value")===""||d.focusOnFetch){d.clear(true)}}d.fire("BoSelecta:dataFetchComplete")}else{e.failure()}return}var k=g.responseText.split("\u0002")[1];var p="\u0003";var m="\u0001";d.contacts=k.split(p);var i;for(var h=0,j=d.contacts.length;h<j;h++){i=d.contacts[h].split(m);if(i.length===0){continue}d.contacts[h]={};d.contacts[h].n=i[0];d.contacts[h].e=i[1];d.contacts[h].u=i[2];d.contacts[h].r=i[3];d.contacts[h].s=i[4];d.contacts[h].f=i[5];d.contacts[h].a=i[6];d.contacts[h].d=i[7];d.contacts[h].y=i[8];d.contacts[h].c=i[9];d.contacts[h].us=b.StringFilters.soundex(d.contacts[h].u);d.contacts[h].rs=b.StringFilters.soundex(d.contacts[h].r);d.contacts[h][0]=d.contacts[h].u}if(!d.loadTransparently){d.restoreDefaultText();d.loadingBox.setStyle("display","none");d.inputField.setStyle("display","inline");if(d.focusOnFetch){d.clear(true)}}d.fetchingData=false;d.fire("BoSelecta:dataFetchComplete")},failure:function(i,h,g){d.autoComp.destroy();if(d.form&&d.form.get("tagName").toLowerCase()==="form"){b.Event.purgeElement(d.form)}var f=d.inputField.get("parentNode");f.all(".no-js-fallback").setStyle("display","");d._destroy();d.fetchingData=false;d.fire("BoSelecta:dataError")}};if(!c){e.failure();return}b.io(c,{method:"GET",on:e})};b.BoSelecta3.prototype._destroy=function(d){var c=this.inputField.get("parentNode");b.Event.purgeElement(this.inputField);this.inputField.removeClass("grey");this.inputField.removeClass("yui-ac-input");this.inputField.set("value","");this.inputField.setStyle("display","");this.inputField.removeClass("input");if(d){this.inputField.remove()}this.loadingBox.remove();c.removeClass("yui-skin-sam");c.removeClass("bo-selecta-3")};b.BoSelecta3.prototype._searchContacts=function(g){var v,e=[],o,j=this;if(g===""||(g&&g===this.defaultText)){return e}if(g&&typeof g==="string"&&this.contacts){o=g;g=this._escapeForRegEx(g);g=b.StringFilters.substitute_equivalent_chars(g);var d=new RegExp(g,"i"),u=b.StringFilters.soundex(o),s,k;for(var q=0,t=this.contacts.length;q<t;q++){k=false;s=this.contacts[q];s.matched=null;if(s.n&&(!this.includeUser||o===this.meString)&&s.n===b.config.flickr.user.nsid){if(o===this.meString&&!this.skipList[s.n]){v=s}continue}if(this.skipList&&(this.skipList[s.n]||this.skipList[s.e])){continue}if(this.searchOnUsername&&s.u&&s.u.search(d)!==-1){k=true;s.matched="username";s.matchedPos=s.u.search(d)}if(!k&&this.searchOnRealname&&s.r&&s.r.search(d)!==-1){k=true;s.matched="realname";s.matchedPos=s.r.search(d)}if(!k&&this.searchOnEmail&&s.e&&g!=="@"&&s.e.search(d)!==-1){k=true;s.matched="email";s.matchedPos=s.e.search(d)}if(!k&&this.searchOnPathAlias&&s.a&&s.a.search(d)!==-1){k=true;s.matched="path_alias";s.matchedPos=s.a.search(d)}if(this.searchUsingSoundex){if(!k&&this.searchOnUsername&&s.us&&b.StringFilters.isEqualSoundex(s.us,u)){k=true;s.matched="username-soundex";s.matchedPos=(s.us===u)?0:b.StringFilters.isEqualSoundex(s.us,u)}if(!k&&this.searchOnRealname&&s.rs&&b.StringFilters.isEqualSoundex(s.rs,u)){k=true;s.matched="realname-soundex";s.matchedPos=(s.rs===u)?0:b.StringFilters.isEqualSoundex(s.rs,u)}}if(k){e.push(s)}}}if(e.length===0&&!(o===this.meString&&v)){if(!this.hideNoContactMessage){e.push({message:b.transjax.get("bo-selecta","bo_selecta_no_contacts_found"),notFoundLink:true,disableActive:true});if(this.enableGlobalSearch){e.push({globalSearchLink:true,query:o,message:b.transjax.get("bo-selecta","bo_selecta_global_search_msg")})}}if(this.zeroResultsMessages.length>0){var h,p,c;for(var q=0,t=this.zeroResultsMessages.length;q<t;q++){h=this.zeroResultsMessages[q];if(h.validator(this)){e.push(h)}}}}else{for(var q=0,t=e.length;q<t;q++){if(!e[q].n&&!e[q].u){for(var r=0,t=e.length;r<t;r++){if(q!==r&&e[q]&&e[r]&&e[q].e===e[r].e){delete e[q];break}}}}for(var q=0,t=e.length;q<t;){if(!e[q]){e.splice(q,1);t--}else{q++}}var i={username:0,realname:1,email:2,path_alias:3,"username-soundex":4,"realname-soundex":5};e.sort(function(x,m){var w=(x.n&&x.u)?"contact":"addressBookEntry";var y=(m.n&&m.u)?"contact":"addressBookEntry";if(w!==y){return(w==="contact")?-1:1}if(x.matchedPos===m.matchedPos){if(i[x.matched]===i[m.matched]){var z=x.u.charCodeAt(0),n=m.u.charCodeAt(0);if(z===n){return 0}else{if(z<n){return -1}else{return 1}}}else{if(i[x.matched]<i[m.matched]){return -1}else{return 1}}}else{if(x.matchedPos<m.matchedPos){return -1}else{return 1}}});if(o===this.meString&&v){v.matched="username";e.unshift(v)}var l=e.length;e=e.splice(0,this.maxResultsDisplayed);if(this.showTotalResults){var f="/search/people/?q=%s&m=names&see=all";e.push({message:b.transjax.get("bo-selecta","uber_contact_list_max_results").replace(/\[results_shown\]/,Math.min(e.length,this.maxResultsDisplayed)).replace(/\[total_results\]/,l).replace(/\[url\]/,f),totalResultsMessage:true})}}if(this.showEditRelationshipLink&&!this.relationshipLinksInitialized){b.use("contact-changer",function(m){j.container.delegate("click",function(n){m.contact_changer.show(n.target.getAttribute("data-nsid"));n.preventDefault()},".edit-rel a");j.relationshipLinksInitialized=true})}return e};b.BoSelecta3.prototype._formatResult=function(h,q,i){var j=this,s,l=[],v,e,d,m,c=!h?null:new RegExp(b.StringFilters.substitute_equivalent_chars(j._escapeForRegEx(h)),"gi"),k,g,o,u,r,f;if(!h){h=""}for(var p=0,t=q.length;p<t;p++){s=q[p].raw;if(!s){continue}if(s.globalSearchLink){v='<p class="bs-global-search-link bs-message bs-onclick"><span>'+s.message+"</span></p>";l.push(v);continue}if(s.totalResultsMessage){v='<p class="bs-message bs-total-results bs-disable-active"><span>'+s.message+"</span></p>";l.push(v);continue}if(s.message){v='<p class="bs-message'+(s.notFoundLink?"":" bs-onclick")+(s.disableActive?" bs-disable-active":"")+(s.className?" "+s.className:"")+'">'+s.message+"</p>";l.push(v);continue}m=(j.respectCanTagFlag&&s.c==="0")?' class="disabled"':"";if(s.e&&!s.u&&!s.n){if(!s.i){s.i="/images/icon_unread.gif"}e=j.showIcon?'<img src="'+s.i+'" width="16" height="16" class="BuddyIconX bs-email-icon">':"";d='<p email="'+s.e+'"'+m+'><span class="name name-email">'+e+'<strong class="username">'+a(j._sanitizeString(s.e),c)+'</strong></span><span class="relationship"></span></p>';l.push(d);continue}k=(s.a)?s.a:s.n;g=' / <a href="/people/'+k+'/">'+b.transjax.get("bo-selecta","uber_contact_list_view_profile")+"</a>";if(!s.i){s.i=(s.f&&s.f!==0&&s.s&&s.s!==0)?"http://farm"+s.f+".static"+(b.config.flickr.dev?"-dev":"")+".flickr.com/"+s.s+"/buddyicons/"+s.n+".jpg":"http://www.flickr.com/images/buddyicon.gif"}if(F.config.flickr.is_secure){s.i=s.i.replace("http:","https:")}o="";if(j.showRelationship){if(s.d==="1"&&s.y==="1"){o+=b.transjax.get("bo-selecta","uber_contact_list_friend_and_family")}else{if(s.d==="1"){o+=b.transjax.get("bo-selecta","uber_contact_list_friend")}else{if(s.y==="1"){o+=b.transjax.get("bo-selecta","uber_contact_list_family")}else{if(s.removed==="1"){o+='<em class="contact-removed">'+b.transjax.get("bo-selecta","uber_contact_list_removed")+"</em>"}else{if(j.searchingGlobally){o+=""}else{o+=b.transjax.get("bo-selecta","uber_contact_list_contact")}}}}}if(j.showEditRelationshipLink&&!j.searchingGlobally){o+=' <span class="edit-rel">(<a href="/people/'+k+'/relationship/" data-nsid="'+s.n+'">'+b.transjax.get("bo-selecta","uber_contact_list_edit")+"</a>)</span>"}}e=j.showIcon?'<img src="'+s.i+'" width="24" height="24" class="BuddyIconX fade-in" nsid="'+s.n+'">':"";e=j.linkUsernameToPhotostream?'<a href="/photos/'+k+'/">'+e+"</a>":e;u=j.showUsername?a(j._sanitizeString(s.u),c):"";u=j.linkUsernameToPhotostream?'<strong class="username"><a href="/photos/'+k+'/">'+u+"</a></strong>":'<strong class="username">'+u+"</strong>";r="";if(j.showSubtitle){if(!s.matched||s.matched==="realname"||s.matched==="realname-soundex"){r=s.r?a(j._sanitizeString(s.r),c):b.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(s.matched==="username"||s.matched==="username-soundex"){r=s.r?j._sanitizeString(s.r):b.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(s.matched==="email"){r=a(j._sanitizeString(s.e),c)}else{if(s.matched==="path_alias"&&s.a){r="flickr.com/people/"+a(j._sanitizeString(s.a),c)+"/"}}}}r=j.linkSubtitle?'<a title="'+b.transjax.get("bo-selecta","uber_contact_list_view_profile")+'" href="/people/'+k+'/" class="realname">'+r+"</a>":'<span class="realname">'+r+"</span>"}f=b.Node.create('<p nsid="'+s.n+'"'+m+'><span class="name">'+e+u+r+'</span><span class="relationship">'+o+"</span></p>");b.imageFader.attach(f.all("img"));l.push(f)}return l};function a(g,e){if(!g){return g}var c,d,f;g=b.StringFilters.unescape_entities(g,true);d=e?g.search(e):-1;if(d===-1){return b.BoSelecta3.sanitizeString(g)}c=g.match(e);f=d+c[0].length;return b.StringFilters.escape_entities(g.substring(0,d),true)+'<span class="term-highlight">'+b.StringFilters.escape_entities(g.substring(d,f),true)+"</span>"+b.StringFilters.escape_entities(g.substring(f,g.length),true)}b.BoSelecta3.prototype._resizeListToFit=function(j){var h,g,d=this.minListWidth,f=this.maxListWidth,i,k,c;if(j.type==="autocompleteList:query"||(j.type==="autocompleteList:visibleChange"&&j.newVal===true)){h=j.currentTarget;g=h.get("listNode");g.all("li p").each(function(e){i=e.one(".name");k=e.one(".relationship");if(i&&k){c=i.get("offsetWidth")+k.get("offsetWidth")+12;if(c>d){d=c}}});if(!this.baseListWidth){this.baseListWidth=h.get("width")}if(d>f){d=f}if(d<this.baseListWidth){d=this.baseListWidth}h.set("width",d)}};b.BoSelecta3.prototype._attachIconEvents=function(e){if(!personmenu_process_img||typeof personmenu_process_img!=="function"){return}var g=e.all("img"),d;for(var f=0,c=g.size();f<c;f++){d=b.Node.getDOMNode(g.item(f));if(g.item(f).hasClass("BuddyIconX")){d.nsid=g.item(f).getAttribute("nsid");personmenu_process_img(d)}}};b.BoSelecta3.prototype._useGlobalSearch=function(d){var c=this;this.searchingGlobally=true;if(d){this.inputField.set("value",decodeURIComponent(d))}this.autoComp.set("source",this.globalSearchDataSource);this.autoComp.set("minQueryLength",2);this.autoComp.set("maxResultsDisplayed",this.globalMaxResultsDisplayed);this.autoComp.set("queryDelay",600);this.loadingBox.addClass("loading-global").removeClass("loading");this.loadingBox.set("innerHTML","");this.globalSearchRemover=this.inputField.on("keyup",function(f){if(c.inputField.get("value")===""){c.globalSearchRemover.detach();c._useContactsCache()}});d=this.getQuery();this.autoComp.sendRequest(d)};b.BoSelecta3.prototype._useContactsCache=function(c){this.searchingGlobally=false;if(c){this.inputField.set("value",decodeURIComponent(c))}this.autoComp.set("source",this.contactsCacheDataSource);this.autoComp.set("minQueryLength",1);this.autoComp.set("maxResultsDisplayed",0);this.autoComp.set("queryDelay",0)};b.BoSelecta3.prototype._onItemSelectEvent=function(f,d){var c=f.result.raw;if(c.message){if(c.globalSearchLink){this._useGlobalSearch(c.query)}else{if(c.onclick&&typeof c.onclick==="function"){c.onclick(f,this)}else{this.clear()}}f.preventDefault();return}this.fire("BoSelecta:resultSelect",c,c.query);if(this.searchingGlobally){this._useContactsCache()}};b.BoSelecta3.prototype._handleQueryChange=function(c){this.fire("BoSelecta:queryChange",c.query)};b.BoSelecta3.prototype._onInputFieldKeyDown=function(d){if(d.keyCode===13&&this.autoComp){var f=false;if(this.autoComp._oCurItem){var c=b.one(this.autoComp._oCurItem).all("p");if(c.size()>0){f=(c.item(0).hasClass("bs-message")&&!c.item(0).hasClass("bs-onclick"))}}if(!this.autoComp._oCurItem||f){this.fire("BoSelecta:inputEnter")}}};b.BoSelecta3.prototype._sanitizeString=function(c){c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;");return c};b.BoSelecta3.prototype._unsanitizeString=function(c){c=c.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");return c};b.BoSelecta3.prototype._escapeForRegEx=function(c){c=decodeURIComponent(c);c=c.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/\?/g,"\\?");c=c.replace(/\|/g,"\\|").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]");return c};b.BoSelecta3.prototype.fetchData=function(){if(!this.contacts&&!this.haveTriedToFetchData){this._fetchData()}};b.BoSelecta3.prototype.refreshData=function(){this._fetchData()};b.BoSelecta3.prototype.hideResults=function(){if(this.autoComp&&this.autoComp.hide){this.autoComp.hide()}if(this.resultsHideHandle&&this.resultsHideHandle.detach){this.resultsHideHandle.detach()}};b.BoSelecta3.prototype.clear=function(c){this.inputField.removeClass("grey");this.inputField.set("value","");if(c){try{this.inputField.focus()}catch(d){}}this.hideResults()};b.BoSelecta3.prototype.clearDefaultText=function(c){if(this.inputField.hasClass("grey")){this.clear(c)}};b.BoSelecta3.prototype.restoreDefaultText=function(){this.clear();this.inputField.addClass("grey");this.inputField.set("value",this.defaultText);this.inputField.blur()};b.BoSelecta3.prototype.getQuery=function(){if(this.inputField.hasClass("grey")){return""}return this.inputField.get("value")};b.BoSelecta3.prototype.refreshResults=function(){if(this.autoComp&&this.getQuery()){this.autoComp.sendRequest(this.getQuery())}};b.BoSelecta3.prototype.skipContact=function(c){this.skipList[(c.n?c.n:c.e)]=true};b.BoSelecta3.prototype.unskipContact=function(c){this.skipList[(c.n?c.n:c.e)]=false};b.BoSelecta3.prototype.unskipAll=function(){this.skipList={}};b.BoSelecta3.prototype.showInFieldLoading=function(){this.loadingBox.addClass("loading-global");this.loadingBox.removeClass("loading");this.loadingBox.setStyle("display","block")};b.BoSelecta3.prototype.hideInFieldLoading=function(){this.loadingBox.setStyle("display","")};b.BoSelecta3.prototype.destroy=function(){this._destroy(true)};b.BoSelecta3.sanitizeString=b.BoSelecta3.prototype._sanitizeString;b.BoSelecta3.unsanitizeString=b.BoSelecta3.prototype._unsanitizeString},"0.0.1",{requires:F.config.modules["bo-selecta-3"].requires||[],optional:F.config.modules["bo-selecta-3"].optional||[]});YUI.add("share-this-v3-service-email-transjax",function(a){a.transjax.add("share-this-v3-service-email",{email_field_default_text:"screen name, real name, or email",send_an_email:"Send an email to this address",no_realname:"No real name given",sharing_email_error:"Oops! That doesn't look like a real email address. Try again?",sharing_no_contact:"Hmm... we couldn't find %s in your contacts list. Do you want to try entering their email address instead?"})},"0.0.1",{requires:["transjax-base"]});YUI.add("share-this-v3-service-twitter-transjax",function(a){a.transjax.add("share-this-v3-service-twitter",{over_limit_1:"%s whoa!",over_limit_5:"%s too much!",over_limit_10:"%s less is more!",over_limit_20:"%s way over!",over_limit_30:"%s booooring!"})},"0.0.1",{requires:["transjax-base"]});YUI.add("share-this-v3-services",function(e){var d={};function c(f){d[f.name]=f}function b(){return d}function a(g){var f,h;for(f in d){if(d.hasOwnProperty(f)){if(d[f].id===g){h=true;break}}}return h?d[f]:undefined}e.shareThisV3Services={add_service:c,get_services:b,get_service:a}},"0.0.1",{requires:[]});YUI.add("share-this-v3-service-blogger",function(b){var a=b.shareThisV3Services;if(!a){b.log("Y.shareThisV3Services null/undefined?")}else{a.add_service({name:"blogger",id:3,setup_url:"/share.gne?action=setup&service_type_id=3",use_popup:true,popup_params:{width:780,height:480},default_text:null,on_window_closed:function(){var c=b.shareThisV3Dialog.get_current_service();b.log("auth (maybe) complete for "+c.name);b.shareThisV3Dialog.fetch_sharing_fragment({on_complete:function(){b.shareThisV3Dialog.refresh_dialog_state();b.fire("shareDialog:servicesAuthComplete")}})},on_show_screen:{setup:function(){b.log("blogger: setup screen")},setup_choose_a_blog:function(){b.log("blogger: setup_choose_a_blog()")},share:function(){b.log("blogger: share screen");var d=b.shareThisV3Dialog.get_current_service(),e=b.shareThisV3Dialog.service_helpers;b.global_dialog.show();var c=b.one("#blogger-text");d.default_text=c.getAttribute("data-default-text");c.on("focus",b.shareThisV3Dialog.service_helpers.maybeClearText);c.on("blur",b.shareThisV3Dialog.service_helpers.maybeRestoreText);e.addDescriptionEvents(b.one("#share-this-v3-dialog .add-object-description"),c)},share_confirmblog:function(){b.log("share_confirmblog()");b.global_dialog.show()}},on_auth_failed:function(){b.log("on_auth_failed");set_dialog_state("state-setup state-setup-error");b.global_dialog.reposition()},on_submit_form:{share:function(){b.shareThisV3Dialog.service_helpers.maybeClearText({target:b.one("#blogger-text")})},share_chooseblog:function(){b.global_dialog.hide();b.global_dialog.set_loading(true)}},misc:{maybe_highlight_endpoint:function(f){var g=f.target,h=f.target.getAttribute("data-default-url"),c=f.target.get("value"),d=c.indexOf(h);if(d!==-1){b.shareThisV3Dialog.service_helpers.setSelectionRange(b.Node.getDOMNode(g),d,d+h.length)}}}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-service-email",function(c){c.config.flickr.user.apiURL=null;var q=c.shareThisV3Services,o,h={},v=false,p="#share-form-email",k=false;function a(){if(!v){c.shareThisV3Dialog.service_helpers.disableForm(c.one(p));v=true}}function g(){if(v){c.shareThisV3Dialog.service_helpers.enableForm(c.one(p));v=false}}function u(){var x=c.shareThisV3Dialog.service_helpers,z=x.is_guestpass_required(),y=x.is_guestpass_automatic(),w=s(),A=false;if(!z||y){if(w){g()}else{a()}}else{if(!w){a()}else{A=x.is_guestpass_chosen();if(A){g()}else{a()}}}}function s(){var w=c.one("#sharing-email-input"),y=w.get("value"),x=(m(y)||j());return x}function n(){var z=b();var x=c.shareThisV3Dialog.get_form_params();z=c.merge(z,x);var w=c.one("#email-text");var y=w.get("value");if(y&&y!==w.getAttribute("data-default-text")){z.message_text=y}return z}if(!q){c.log("Y.shareThisV3Services null/undefined?")}else{q.add_service({name:"email",id:130,default_text:null,on_show_screen:{share:function(){var z=c.shareThisV3Dialog.service_helpers,x=c.one("#sharing-email-input"),y=c.one("#email-text"),w=c.shareThisV3Dialog.get_current_service();k=false;w.default_text=y.getAttribute("data-default-text");y.on("focus",z.maybeClearText);y.on("blur",z.maybeRestoreText);c.one("#to-flickr").set("value","");c.one("#to-email").set("value","");h={};add_by_email=function(A){if(r()){i();c.global_dialog.reposition()}};o=new c.BoSelecta3(x,{showSubtitle:true,showIcon:true,maxResultsDisplayed:4,includeAddressBook:!!(c.config.flickr.user.nsid),searchOnUsername:true,searchOnRealname:true,searchOnEmail:true,searchOnPathAlias:true,showTotalResults:true,allowNoContacts:true,defaultText:c.transjax.get("share-this-v3-service-email","email_field_default_text"),purgeFormOnDataFailure:false,focusOnFetch:true,fetchDataImmediately:true,selectFirstItem:true,allowFormSubmit:false,hideNoContactMessage:true,enableGlobalSearch:false,zeroResultsMessages:[{message:"<span>"+c.transjax.get("share-this-v3-service-email","send_an_email")+"</span>",className:"bs-send-email-link",onclick:add_by_email,validator:function(A){var B=A.getQuery(),C=(t(B)&&m(B)&&!A.searchingGlobally);return C}}],apiURL:(c.config.flickr.user.nsid?x.getAttribute("data-api-url"):null)});o.on("BoSelecta:resultSelect",d);o.on("BoSelecta:resultClick",d);c.one(p).one('.Butt[type="submit"]').on("mousedown",function(A){k=true});c.one(p).on("submit",i);if(z.is_guestpass_required()){c.all('#guestpass-box input[type="checkbox"]').on("click",u)}v=false;a();c.one("#sharing-email-input").on("keyup",u);c.delegate("click",f,"#bo-selecta-results-box","a.delete-x")}},on_submit_form:{share:function(w){var x=b();c.one("#to-flickr").set("value",x.to_flickr||null);c.one("#to-email").set("value",x.to_email||null);if(c.config.flickr.flags.enable_grease&&!c.config.flickr.user.nsid){w.preventDefault();return false}else{c.shareThisV3Dialog.service_helpers.maybeClearText({target:c.one("#email-text")})}}}})}function d(w){if(typeof h[(w.n?w.n:w.e)]==="undefined"){h[(w.n?w.n:w.e)]=w;o.skipContact(w);if(F.config.flickr.is_secure){w.i=w.i.replace("http:","https:")}var x=c.one("#bo-selecta-results-box"),z,y;liEl=document.createElement("li");liEl.innerHTML=(w.n)?'<p nsid="'+w.n+'"><span class="name"><img src="'+w.i+'" width="24" height="24" class="BuddyIconX" nsid="'+w.n+'" id="pt-icon-'+w.n+'"><strong class="username">'+o._sanitizeString(w.u)+'</strong><span class="realname">'+(w.r?o._sanitizeString(w.r):c.transjax.get("share-this-v3-service-email","no_realname"))+'</span></span><span class="controls"><a href="#" class="delete-x" class="pt-remove" id="pt-remove-'+w.n+'"><span>[x]</span></a></span></p>':'<p email="'+o._sanitizeString(w.e)+'" class="email-contact"><span class="name"><img src="'+w.i+'" width="16" height="16" class="BuddyIconX bs-email-icon"><strong class="username email">'+o._sanitizeString(w.e)+'</strong></span><span class="controls"><a href="#" class="delete-x" class="pt-remove" id="pt-remove-'+o._sanitizeString(w.e)+'"><span>[x]</span></a></span></p>';x.appendChild(liEl);x.addClass("not-empty");if(c.is_ie){x.setStyle("display","block")}y=x.all("li.last");if(y){y.each(function(){this.removeClass("last")})}c.one(liEl).addClass("last");if(x.getElementsByTagName("li").length>5){x.addClass("overflow")}x.set("scrollTop",x.get("scrollHeight"))}setTimeout(function(){o.clear(true)},1);u();c.global_dialog.reposition();if(typeof e!=="undefined"){e.preventDefault()}return false}function i(B){var C=o.getQuery(),x=c.one("#sharing-email-input"),A,w,z,y;w=C.replace(/([\;\s<>]+)/g,",");A=w.split(",");if(!A.length){return l(false,B)}else{for(z=0,y=A.length;z<y;z++){if(A[z]){x.set("value",A[z]);l(true,B)}}x.set("value","")}}function l(z,B){var A=o.getQuery();if(r(z)){var x={e:o.getQuery()};if(typeof h[x.e]==="undefined"){h[x.e]=x;var y=c.one("#bo-selecta-results-box");var w=document.createElement("li");w.innerHTML='<p email="'+o._sanitizeString(x.e)+'" class="email-contact"><span class="name"><img src="/images/icon_unread.gif" width="16" height="16" class="BuddyIconX bs-email-icon"><strong class="username email">'+o._sanitizeString(x.e)+'</strong></span><span class="controls"><a href="#" class="pt-remove delete-x" id="pt-remove-'+o._sanitizeString(x.e)+'"><span>[x]</span></a></span></p>';y.appendChild(w);y.addClass("not-empty");if(c.UA.ie){y.setStyle("display","block")}y.all("li").removeClass("last");c.one(w).addClass("last");if(y.all("li").size()>5){y.addClass("overflow")}y.set("scrollTop",y.get("scrollHeight"));o.clear(true)}u()}if(B&&A&&!k){B.halt();return false}else{if(c.config.flickr.flags.enable_grease&&!c.config.flickr.user.nsid){c.use("grease",function(D){var C=n();D.grease.shareV3(C);D.grease.authenticate(function(E){})});if(B){B.preventDefault()}return false}}}function m(w){var x=/[a-z_0-9\.\-\+\']+@[a-z_0-9\.\-\+]+\.[a-z]/i;return x.test(w)}function t(x){var w=/\.|@/;return w.test(x)}function r(w){var x=o.getQuery();if(x!==""){if(!m(x)){var y=c.config.flickr.flags.enable_grease?c.transjax.get("share-this-v3-service-email","sharing_email_error",x):c.transjax.get("share-this-v3-service-email","sharing_no_contact",x);if(t(x)){y=c.transjax.get("share-this-v3-service-email","sharing_email_error")}if(!w){alert(y)}return false}else{return true}}return false}function f(A){A.halt();var z=A.target.ancestor("p");var B=z.getAttribute("nsid")?z.getAttribute("nsid"):z.getAttribute("email");o.unskipContact(h[B]);delete h[B];var w=z.get("parentNode");var x=c.one("#bo-selecta-results-box");x.removeChild(w);o.clear(true);var y=x.all("li");if(y.size()===0){x.removeClass("not-empty");if(c.is_ie){x.setStyle("display","")}}else{y.removeClass("last");if(y.size()){x.all("li:list-child").addClass("last")}}if(y.size()<=5){x.removeClass("overflow")}u()}function b(){var z={},x=[],y=[],w;for(w in h){if(h.hasOwnProperty(w)){if(h[w].n){y.push(h[w].n)}else{if(h[w].e){x.push(h[w].e)}}}}if(x.length>0){z.to_email=x.join()}if(y.length>0){z.to_flickr=y.join()}return z}function j(){var w=b();return(w.to_email||w.to_flickr)}},"0.0.1",{requires:F.config.modules["share-this-v3-service-email"].requires||[],optional:F.config.modules["share-this-v3-service-email"].optional||[]});YUI.add("share-this-v3-service-facebook",function(a){var g=a.shareThisV3Services;var b,c,l,o,h,k,e;var m=false;var n="#share-form-facebook";var f="#guestpass-box";var d=false;function j(){c=a.one(n);l=a.one(f);o=a.shareThisV3Dialog.service_helpers.is_guestpass_required();h=a.shareThisV3Dialog.service_helpers.is_guestpass_automatic();k=null;e=0;if(!o||h){if(m){a.shareThisV3Dialog.service_helpers.enableForm(c);m=false}return false}if(l){k=l.all('input[type="checkbox"]');if(k){k.each(function(){if(this.get("checked")){e++}});if(e&&m){a.shareThisV3Dialog.service_helpers.enableForm(c);m=false}else{if(!e&&!m){a.shareThisV3Dialog.service_helpers.disableForm(c);m=true}}}else{}}}function i(){a.all(f+' input[type="checkbox"]').on("change",j)}if(!g){a.log("Y.shareThisV3Services null/undefined?")}else{g.add_service({name:"facebook",id:128,setup_url:"/share.gne?action=setup&service_type_id=128",use_popup:true,signed_out_url:"/share.gne?action=signedOutShare&service_type_id=128",popup_params:{width:780,height:500},default_text:null,setup_only:false,share_signed_out:function(s){var q=a.shareThisV3Dialog.get_current_service(),p="&"+a.shareThisV3Dialog.get_share_this_data(true).join("&"),r=q.signed_out_url+"&"+p;a.shareThisV3Dialog.webCirca1999(r,{width:640,height:320});return false},on_window_closed:function(){var p=a.shareThisV3Dialog.get_current_service();a.log("auth (maybe) complete for "+p.name);if(p.setup_only){a.shareThisV3Dialog.service_helpers.setupOnly()}else{a.shareThisV3Dialog.fetch_sharing_fragment()}},on_auth_failed:function(){a.log("D'oh, auth did not work, or something. Retry?")},on_show_screen:{share:function(){if(m){m=false;a.shareThisV3Dialog.service_helpers.enableForm(c)}var p=a.one("#facebook-text");var q=a.shareThisV3Dialog.get_current_service();q.default_text=p.getAttribute("data-default-text");p.on("focus",a.shareThisV3Dialog.service_helpers.maybeClearText);p.on("blur",a.shareThisV3Dialog.service_helpers.maybeRestoreText);i();j();a.log("on_show_screen.share()")},error:function(){a.fire("shareDialog:servicesAuthComplete")}},on_submit_form:{share:function(){a.shareThisV3Dialog.service_helpers.maybeClearText({target:a.one("#facebook-text")})}}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-service-livejournal",function(d){var b=d.shareThisV3Services;var c,e,a;if(!b){d.log("Y.shareThisV3Services null/undefined?")}else{b.add_service({name:"livejournal",id:5,use_setup_dialog:true,default_text:null,on_show_screen:{setup:function(){d.log("livejournal: setup screen");var f=d.shareThisV3Dialog.get_current_service();c=d.one("#lj-setup-api-endpoint");e=d.one("#lj-setup-username");a=d.one("#lj-setup-password");if(a){a.on("focus",f.misc.set_password_field)}if(e){e.on("keypress",f.misc.update_endpoint_url);e.on("keyup",f.misc.update_endpoint_url)}},setup_choose_a_blog:function(){d.log("livejournal: setup_choose_a_blog()")},share:function(){var g=d.shareThisV3Dialog.get_current_service(),h=d.shareThisV3Dialog.service_helpers,f=d.one("#livejournal-text");g.default_text=f.getAttribute("data-default-text");f.on("focus",h.maybeClearText);f.on("blur",h.maybeRestoreText);h.addDescriptionEvents(d.one("#share-this-v3-dialog .add-object-description"),f)},password:function(){var g=d.shareThisV3Dialog.get_current_service(),f=d.one("#lj-setup-password");if(f){f.focus()}}},on_submit_form:{share:function(){d.shareThisV3Dialog.service_helpers.maybeClearText({target:d.one("#livejournal-text")})}},on_auth_failed:function(){d.shareThisV3Dialog.set_dialog_state("state-setup state-setup-error");d.global_dialog.reposition()},misc:{update_endpoint_url:function(f){c.set("value",c.getAttribute("data-default-url").replace("%s",e.get("value")))},set_password_field:function(f){var g=f.target;if(g){d.shareThisV3Dialog.service_helpers.setPasswordField(g)}}}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-service-pinterest",function(b){var a=b.shareThisV3Services;if(!a){b.log("Y.shareThisV3Services null/undefined?")}else{a.add_service({name:"pinterest",id:132,use_popup:true,signed_out_url:"/share.gne?action=signedOutShare&service_type_id=132",share_signed_out:function(g){var d=b.shareThisV3Dialog.get_current_service(),c="&"+b.shareThisV3Dialog.get_share_this_data(true).join("&"),f=d.signed_out_url+c;b.shareThisV3Dialog.webCirca1999(f,{width:685,height:520});b.fire("flickr-menus:hide");return false}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-service-tumblr",function(b){var a=b.shareThisV3Services;if(!a){b.log("Y.shareThisV3Services null/undefined?")}else{a.add_service({name:"tumblr",id:12,setup_url:"/share.gne?action=setup&service_type_id=12",use_popup:true,popup_params:{width:920,height:600},signed_out_url:"/share.gne?action=signedOutShare&service_type_id=12",default_text:null,share_signed_out:function(g){var d=b.shareThisV3Dialog.get_current_service(),c="&"+b.shareThisV3Dialog.get_share_this_data(true).join("&"),f=d.signed_out_url+c;b.shareThisV3Dialog.webCirca1999(f,{width:788,height:375});return false},on_window_closed:function(){var c=b.shareThisV3Dialog.get_current_service();b.log("auth (maybe) complete for "+c.name);if(c.setup_only){b.shareThisV3Dialog.fetch_sharing_fragment()}else{b.shareThisV3Dialog.fetch_sharing_fragment()}},on_auth_failed:function(){b.log("D'oh, auth did not work, or something. Retry?")},on_show_screen:{share:function(){b.log("on_show_screen:share");b.global_dialog.show();var d=b.shareThisV3Dialog.get_current_service(),f=b.shareThisV3Dialog.service_helpers,c=b.one("#tumblr-text"),e=b.one("#tumblr-butt-post");if(!c){b.log("Warn: could not find textarea");return false}f.addDescriptionEvents(b.one("#share-this-v3-dialog .add-object-description"),c);f.addMoreOptionsEvents();d.default_text=c.getAttribute("data-default-text");c.on("focus",f.maybeClearText);c.on("blur",f.maybeRestoreText)}},on_submit_form:{share:function(){b.shareThisV3Dialog.service_helpers.maybeClearText({target:b.one("#tumblr-text")})},setup_choose_a_blog:function(){b.global_dialog.hide();b.global_dialog.set_loading(true)}}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-service-twitter",function(b){var a=b.shareThisV3Services;if(!a){b.log("Y.shareThisV3Services null/undefined?")}else{a.add_service({name:"twitter",id:9,setup_url:"/share.gne?action=setup&service_type_id=9",use_popup:true,popup_params:{width:780,height:500},signed_out_url:"/share.gne?action=signedOutShare&service_type_id=9",max_tweet_length:140,default_text:null,flickr_shorturl_length:null,over_limit_classname:"over-limit",share_signed_out:function(g){var d=b.shareThisV3Dialog.get_current_service(),c="&"+b.shareThisV3Dialog.get_share_this_data(true).join("&"),f=d.signed_out_url+c;b.shareThisV3Dialog.webCirca1999(f,{width:780,height:425});return false},on_window_closed:function(){var c=b.shareThisV3Dialog.get_current_service();b.log("auth (maybe) complete for "+c.name);if(c.setup_only){b.shareThisV3Dialog.service_helpers.setupOnly()}else{b.shareThisV3Dialog.fetch_sharing_fragment()}},on_auth_failed:function(){b.log("D'oh, auth did not work, or something. Retry?")},on_show_screen:{share:function(){b.log("on_show_screen:share");var k=b.shareThisV3Dialog.get_current_service();var l=b.one("#tweet-text"),c=b.one("#tweet-characters"),m=null,g=false,h,n,i={"1":"over_limit_1","5":"over_limit_5","10":"over_limit_10","20":"over_limit_20","30":"over_limit_30"},j=b.one("#twitter-butt-post");if(!l){b.log("Warn: could not find textarea");return false}function o(r,s,p){if(r._node.setSelectionRange){r._node.focus();r._node.setSelectionRange(s,p)}else{if(r._node.createTextRange){var q=r._node.createTextRange();q.collapse(true);q.moveStart("character",s);q.moveEnd("character",p);q.select()}}}var e=b.Lang.trim(b.one("#tweet-shorturl").get("title"));var f=l.get("value");l.set("text",f+" "+e);o(l,0,f.length);k.max_tweet_length=parseInt(l.getAttribute("data-available-chars"),10);k.default_text=l.getAttribute("data-default-text");function d(){var q=parseInt(l.get("value").length,10),p=(140-parseInt(q,10)),r;if(!isNaN(p)&&p!==m){m=p;if(p<0&&!g){g=true;c.addClass(k.over_limit_classname);j.replaceClass("Butt","DisabledButt");j.set("disabled",true)}else{if(p>=0&&g){g=false;c.removeClass(k.over_limit_classname);j.replaceClass("DisabledButt","Butt");j.set("disabled",false);c.setStyle("fontSize","11px")}}if(p>=0){c.set("innerHTML",p)}else{r=Math.abs(p);if(r>=1&&r<5){h="1";n=1}else{if(r>=5&&r<10){h="5";n=1.25}else{if(r>=10&&r<20){h="10";n=1.5}else{if(r>=20&&r<30){h="20";n=1.75}else{if(r>=30){h="30";n=2}}}}}over_limit_string=b.transjax.get("share-this-v3-service-twitter",i[h],p);c.set("innerHTML",over_limit_string);c.setStyle("fontSize",Math.min(32,parseInt(11*n+(r>30?(r-30)/10:0),10))+"px")}}else{if(isNaN(p)){c.setStyle("display","none")}}b.one("#tweet-shorturl a").on("click",function(u){var t=/([^\s^]*)([http\:\/\/]+)?flic\.kr([\/a-zA-Z0-9]+)?([^\s$]*)/;if(l.get("value").search(t)>0){l.set("value",l.get("value").replace(t,e))}else{l.set("value",l.get("value")+" "+e)}o(l,l.get("value").length,l.get("value").length);u.preventDefault()});var s=new RegExp("(^|\\s)"+e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"($|\\s)");if(l.get("value").search(s)<0){b.one("#tweet-shorturl span").show();j.replaceClass("Butt","DisabledButt");j.set("disabled",true)}else{b.one("#tweet-shorturl span").hide();if(!g){j.replaceClass("DisabledButt","Butt");j.set("disabled",false)}}}b.shareThisV3Dialog.service_helpers.addMoreOptionsEvents();l.on("focus",b.shareThisV3Dialog.service_helpers.maybeClearText);l.on("focus",d);l.on("blur",b.shareThisV3Dialog.service_helpers.maybeRestoreText);l.on("keyup",d);l.on("change",d);d()},success:function(){var f=b.one(".flickr-follow-yes");var d=b.one(".flickr-follow-no");if(f&&d){f.on("click",e);d.on("click",e)}function e(k){var j=k.target.getAttribute("data-action");var i=b.shareThisV3Dialog.get_current_service();var g=[];g.push("action="+j);g.push("service_type_id=9");g.push("service_id="+i.service_id);g.push("magic_cookie="+b.config.flickr.magic_cookie);g=g.join("&");var h="/share.gne";if(j=="followFlickr"){b.one("#follow-flickr").set("innerHTML",'<p class="follow-working">'+b.transjax.get("share-this-v3-dialog","following_flickr_waiting")+"</p>")}else{b.one("#follow-flickr").remove();b.one(".follow-flickr-headline").remove()}b.io(h,{method:"POST",data:g,on:{complete:function(n,l,m){if(c(l.responseText)){b.one("#follow-flickr").set("innerHTML",'<p class="follow-error">'+b.transjax.get("share-this-v3-dialog","try_again_later")+"</p>")}else{if(j=="followFlickr"){b.one("#follow-flickr").set("innerHTML",'<p class="follow-success">'+b.transjax.get("share-this-v3-dialog","following_flickr_success")+"</p>")}}}}});k.preventDefault();return}function c(g){return(g&&g.match(/state-error/i))}}},on_submit_form:{share:function(){b.shareThisV3Dialog.service_helpers.maybeClearText({target:b.one("#tweet-text")})}}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-service-wordpress",function(c){var b=c.shareThisV3Services;function a(){var e=c.one("#share-form-wordpress"),g=c.one("#wp-setup-api-endpoint"),d=c.one("#wp-setup-username"),f=false;if(d.get("value")!==""&&g.get("value")!==""){f=true}if(f){c.shareThisV3Dialog.service_helpers.enableForm(e)}else{c.shareThisV3Dialog.service_helpers.disableForm(e)}}if(!b){c.log("Y.shareThisV3Services null/undefined?")}else{b.add_service({name:"wordpress",id:7,use_setup_dialog:true,default_text:null,on_show_screen:{setup:function(){c.log("wordpress: setup screen");var e=c.shareThisV3Dialog.get_current_service(),f=c.one("#wp-setup-api-endpoint"),d=c.one("#wp-setup-username");if(f){f.on("focus",e.misc.maybe_highlight_endpoint);f.focus();f.on("keypress",a);f.on("keyup",a)}if(d){d.on("keypress",a);d.on("keyup",a)}a()},setup_choose_a_blog:function(){c.log("wordpress: choose_a_blog()")},share:function(){c.log("wordpress: share screen");var g=c.shareThisV3Dialog.service_helpers,e=c.shareThisV3Dialog.get_current_service(),d=c.one("#wordpress-text"),f=c.one("#wordpress-subject");c.global_dialog.set_loading(false);c.global_dialog.show();e.default_text=d.getAttribute("data-default-text");g.addDescriptionEvents(c.one("#share-this-v3-dialog .add-object-description"),d);d.on("focus",g.maybeClearText);d.on("blur",g.maybeRestoreText);if(f){f.focus()}},password:function(){c.log("wordpress: password screen");var e=c.shareThisV3Dialog.get_current_service(),d=c.one("#wp-setup-password");if(d){d.focus()}}},on_submit_form:{share:function(){c.shareThisV3Dialog.service_helpers.maybeClearText({target:c.one("#wordpress-text")})},setup_choose_a_blog:function(){c.global_dialog.hide();c.global_dialog.set_loading(true)}},on_auth_failed:function(){c.log("on_auth_failed");set_dialog_state("state-setup state-setup-error");c.global_dialog.reposition();c.log("setup screen shown - now what, complain?")},misc:{maybe_highlight_endpoint:function(g){var h=g.target,i=g.target.getAttribute("data-default-url"),d=g.target.get("value"),f=d.indexOf(i);if(f!==-1){c.shareThisV3Dialog.service_helpers.setSelectionRange(c.Node.getDOMNode(h),f,f+i.length)}}}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-service-yahoo-pulse",function(c){var b=c.shareThisV3Services,d="#pulse-text",a;if(!b){c.log("Y.shareThisV3Services null/undefined?")}else{b.add_service({name:"yahoo",id:129,default_text:null,flickr_shorturl_length:null,share_signed_out:function(f){},on_show_screen:{share:function(){c.log("on_show_screen:share");var f=c.shareThisV3Dialog.get_current_service(),e=c.one(d);f.default_text=e.getAttribute("data-default-text");e.on("focus",c.shareThisV3Dialog.service_helpers.maybeClearText);e.on("blur",c.shareThisV3Dialog.service_helpers.maybeRestoreText)}},on_submit_form:{share:function(){c.shareThisV3Dialog.service_helpers.maybeClearText({target:c.one(d)});c.fire("shareDialog:servicesAuthComplete")}}})}},"0.0.1",{requires:["share-this-v3-services"]});YUI.add("share-this-v3-dialog",function(c){var O=null;var L=null;var S=null;var b=null;var z=null;var B=null;var C=[];var n="state-";var Q="share-this-v3-dialog";var d=(function(){var ac="#guestpass-box",ag="data-required",ad="data-auto-guestpass";function ai(){var an=c.one(ac);if(!an){return false}return(an.getAttribute(ag)==="true")}function ak(){var ap=c.one(ac),an=(ap?ap.all('input[type="checkbox"]'):null),ao=false;if(an){an.each(function(){if(this.get("checked")){ao=true}})}return ao}function U(){var an=c.one(ac);if(!an){return false}return(an.getAttribute(ad)==="true")}var aa={setup:function(){},share:function(){if(c.one(ac)){r()}},success:function(){c.use("flanal",function(an){an.flanal("flickr.sharing."+B.name+"_share_complete",B.name+"_share_complete")})}};function aj(){v();M()}function V(){if(typeof B.setup_only!=="undefined"&&B.setup_only){c.global_dialog.hide();c.global_dialog.set_loading(true);setTimeout(function(){window.location.href="/account/?tab=extend"},20);return true}else{return false}}function Z(ao){var an=ao.target,ap=an.get("value");if(ap===B.default_text){an.set("value","");an.removeClass("default-text");if(typeof updateWhileTyping!=="undefined"){updateWhileTyping()}}}function al(an){}function af(at){var ar=at,ao=ar.get("type");if(ao!=="password"){if(c.UA.ie){var aq=c.Node.getDOMNode(ar),ap=aq.cloneNode(true),an;ap.type="password";ap.value="";an=aq.parentNode.insertBefore(ap,aq);aq.parentNode.removeChild(aq);setTimeout(function(){try{an.focus()}catch(au){}},10)}else{ar.set("type","password");ar.set("value","")}}}function ae(ao,ap,aq){if(ao.setSelectionRange){ao.focus();ao.setSelectionRange(ap,aq)}else{if(ao.createTextRange){var an=ao.createTextRange();an.collapse(true);an.moveEnd("character",aq);an.moveStart("character",ap);an.select()}}}function Y(an){var ao=(an?an:c.one("#share-this-v3-dialog textarea.share-object-description"));if(ao){return(ao.get("value"))}}function am(an,ap){Z({target:an});var aq=Y(),ao=an.get("value");if(aq){an.set("value",(ao?ao+"\n\n":"")+aq)}ap.preventDefault();return false}function ah(ao,an){if(ao){ao.on("click",function(ap){c.shareThisV3Dialog.service_helpers.addObjectDescription(an,ap);ap.target.ancestor(".add-description").addClass("description-added")})}}function W(){var ao=c.one("#share-this-v3-dialog"),ap=ao.one(".more-options"),an=ao.one(".more-options-toggler");if(ap&&an&&an.one("a")){an.one("a").on("click",function(aq){aq.preventDefault();ap.toggleClass("more-options-open");an.toggleClass("more-options-toggler-open")})}}function T(ao){var an=ao.all('input[type="submit"]');an.each(function(){this.replaceClass("Butt","DisabledButt");this.setAttribute("disabled","disabled")})}function X(ao){var an=ao.all('input[type="submit"]');an.each(function(){this.replaceClass("DisabledButt","Butt");this.removeAttribute("disabled")})}function ab(){c.global_dialog.remove_existing_dialog();c.global_dialog.set_loading(false);c.global_dialog.create_alert_dialog("<b>"+c.transjax.get("share-this-v3-dialog","try_again_later")+"</b>",function(){c.global_dialog.hide()})}return{assign_events:aj,addDescriptionEvents:ah,addObjectDescription:am,addMoreOptionsEvents:W,disableForm:T,enableForm:X,genericError:ab,is_guestpass_automatic:U,is_guestpass_chosen:ak,is_guestpass_required:ai,on_show_screen:aa,maybeClearText:Z,maybeRestoreText:al,setupOnly:V,setPasswordField:af,setSelectionRange:ae}}());var k={};function q(U){var V,T=null;U=parseInt(U,10);for(V in k){if(k.hasOwnProperty(V)&&k[V].id===U){T=k[V].name;break}}return T}function P(T){var U,W=[],V={object_id:y(),owner_nsid:a(),object_type:w()};if(!T){return V}for(U in V){if(V.hasOwnProperty(U)){W.push(U+"="+V[U])}}return W}function y(){if(c.config&&c.config.flickr&&c.config.flickr.sharing&&c.config.flickr.sharing.object){return c.config.flickr.sharing.object.id}else{return null}}function a(){if(c.config&&c.config.flickr&&c.config.flickr.sharing&&c.config.flickr.sharing.object){return c.config.flickr.sharing.object.owner_nsid}else{return null}}function w(){if(c.config&&c.config.flickr&&c.config.flickr.sharing&&c.config.flickr.sharing.object){return c.config.flickr.sharing.object.type}else{return null}}function D(){var U=c.one("#share-this-v3-dialog"),T=null;if(U){T=U.getAttribute("data-state")}return T}function l(V){var U="#share-this-dialog-state",T;if(c.one(U)){c.one(U).setAttribute("class",V)}if(V&&V.length>n.length){V=V.substr(n.length);if(V!=="working"){m()}T=c.one("#share-this-v3-dialog .auto-focus");if(T){T.focus()}if(d.on_show_screen&&d.on_show_screen[V]){d.on_show_screen[V]()}if(B&&B.on_show_screen&&B.on_show_screen[V]){B.on_show_screen[V]()}}}function A(){l("state-setup")}function H(){function U(W){return(parseInt(W.get("offsetHeight"),10)-20)}var T={left:c.one("#global-dialog-container .left-item"),right:c.one("#global-dialog-container .right-item")},V={};if(T.left&&T.right){V={left:U(T.left),right:U(T.right)};if(V.left>V.right){T.right.setStyle("minHeight",V.left+"px")}else{T.left.setStyle("minHeight",V.right+"px")}}c.global_dialog.reposition()}function i(T){j()}function p(T){C.push(T)}function m(){for(var T=C.length;T--;){C[T].detach()}C=[]}function r(){p(c.all('#guestpass-box input[type="checkbox"]').on("click",i))}function M(){p(c.all("#global-dialog-container form.share-form").on("submit",o))}function v(){var T="#global-dialog-container a, #global-dialog-container input",V=c.one(".fb-needs-reconnect");function U(X){var W=X.target;if(W&&(W.hasClass("close-x")||W.hasClass("CancelButt")||W.hasClass("dismissDialog"))){c.global_dialog.hide();X.preventDefault();if(c.PageContext){c.PageContext.unset(Q)}return false}}c.all(T).on("click",U);if(V){V.on("click",function(W){W.preventDefault();c.global_dialog.hide();if(c.PageContext){c.PageContext.unset(Q)}c.shareThisV3Dialog.share_by_service(B.id,B.service_type_id,true,false,null,W)},this)}}function I(){B.needs_setup=true;if(B.on_auth_failed){B.on_auth_failed()}}function K(W,X,T){var V;if(B&&B.needs_setup){if(X.responseText){c.one("#share-this-v3-dialog").get("parentNode").set("innerHTML",X.responseText);V=D();if(V&&V.match(/share/i)){c.fire("shareDialog:servicesAuthComplete")}l(V)}else{var U=d.setupOnly();if(!U){I()}}}else{if(G(X.responseText)){if(c.one("#share-this-v3-dialog")){c.one("#share-this-v3-dialog").get("parentNode").set("innerHTML",X.responseText);V=D();l(V)}else{d.genericError()}}else{d.genericError()}}d.assign_events()}function E(){var T=D();if(T){l(T)}}function o(V){var W=V.target,U,T;if(W.hasClass("scrumjax-exclude")){c.global_dialog.hide();c.global_dialog.set_loading(true);return true}if(B){T=D();if(T){U=T.substr(n.length);if(B.on_submit_form&&B.on_submit_form[U]){B.on_submit_form[U](V)}}}c.use("io-form",function(){var X={method:"POST",form:{id:W.getAttribute("id"),useDisabled:false},on:{success:K,failure:K,timeout:K}};if(B&&B.setup_only){l("state-working setup-only")}else{l("state-working")}var Y=W.getAttribute("action");if(!Y){Y=W.getAttribute("data-ie-action")}if(c.one("#"+W.getAttribute("id"))){c.io(Y,X)}});V.preventDefault();return false}function G(T){return(T&&T.match(/share\-this\-v3/i))}function e(W,U,V,T){var Y={success:function(ad,ab,ac){var Z=ab.responseText,aa;if(G(Z)){c.global_dialog.remove_existing_dialog();c.global_dialog.create_dialog(Z);aa=D();c.global_dialog.show({modal:true,width:(!c.UA.ie||c.config.is_zeus?422:440)});if(V&&V.on_complete){V.on_complete()}else{l(aa)}c.global_dialog.reposition();c.global_dialog.set_loading(false);c.global_dialog.set_modal(true);d.assign_events()}else{if(B&&B.setup_only){d.setupOnly()}else{d.genericError()}}},failure:function(ab,Z,aa){if(Z.statusText==="timeout"){if(B&&B.needs_auth&&B.on_auth_failed){B.on_auth_failed()}}else{if(B&&B.needs_auth&&B.on_auth_failed){B.on_auth_failed()}else{c.global_dialog.hide();d.genericError()}}}};var X=(typeof T!=="undefined"?T:Y);c.global_dialog.set_loading(true);c.io(W,{method:"POST",data:U,on:X,"arguments":U})}function x(U){var W=(U||null),V="/share.gne",T=[];T.push("action=delete");if(U.service_id){T.push("service_id="+U.service_id)}if(U.service_type_id){T.push("service_type_id="+U.service_type_id)}T.push("cachebust="+(new Date()).getTime());T=T.join("&");W={on_complete:function(){var Y=c.one("#share-confirm-delete");if(Y){try{Y.focus()}catch(X){}}p(c.one("#global-dialog-container form.scrumjax-exclude").on("submit",o))}};e(V,T,W)}function h(U){var W=(U||null),V="/share.gne",T=[];T.push("action=retrieve_fragments");if(B.needs_setup){T.push("fragments[]=dialog-setup")}else{T.push("fragments[]=dialog-share")}if(L){T.push("service_name="+L)}if(S){T.push("object_id="+S)}if(b){T.push("object_type="+b)}if(z){T.push("owner_nsid="+z)}T.push("cachebust="+(new Date()).getTime());if(B){if(B.setup_only){T.push("setup_only=1")}if(B.service_id){T.push("service_id="+B.service_id)}if(B.service_type_id){T.push("service_type_id="+B.service_type_id)}}T=T.join("&");e(V,T,W)}function j(U){var W=(U||null),V="/share.gne",T=[];T.push("action=retrieve_fragments");T.push("fragments[]=dialog-share-thumbnails");if(L){T.push("service_name="+L)}if(S){T.push("object_id="+S)}if(b){T.push("object_type="+b)}if(z){T.push("owner_nsid="+z)}if(B){if(B.service_id){T.push("service_id="+B.service_id)}if(B.service_type_id){T.push("service_type_id="+B.service_type_id)}}c.one("#global_dialog").all("input.gp-type:checked").each(function(Y){T.push(Y.getAttribute("name")+"=1")});T=T.join("&");W={on_complete:function(){}};var X={success:function(ab,Z,aa){var Y=Z.responseText;c.one("#share-this-thumbnail").get("parentNode").set("innerHTML",Y)}};c.one("#share-this-thumbnail-loading").setStyle("display","block");e(V,T,W,X)}function g(V,Z,U,X,W,T){if(c.PageContext){c.PageContext.set(Q)}S=y();b=w();z=a();L=q(Z);if(!k[L]){return false}else{B=k[L]}var Y=T&&typeof c.config.flickr.user.admin_user!=="undefined"?T.altKey:false;if(!W&&!Y&&c.config&&c.config.flickr&&c.config.flickr.user&&c.config.flickr.user.nsid){}else{if(!W&&!Y&&typeof global_nsid!=="undefined"&&global_nsid){}else{if(B.share_signed_out){B.share_signed_out(T);T.preventDefault();return false}}}c.fire("flickr-menus:hide");B.needs_setup=U;B.service_id=V;B.service_type_id=Z;B.setup_only=X;if(U){if(B.use_popup&&B.setup_url){s(B.setup_url,B.popup_params,function(){if(B.on_window_closed){B.on_window_closed();c.fire("shareDialog:servicesAuthComplete")}})}else{if(B.use_setup_dialog){h({on_complete:function(){if(B.needs_setup){A()}}})}else{h({on_complete:function(){if(B.needs_setup){A()}}})}}return false}else{h()}return false}function u(){return B}function N(){c.global_dialog.set_loading(true)}function t(T){if(O&&O.closed){T()}else{setTimeout(function(){t(T)},1000)}}function s(V,T,W){var X,U=[];for(X in T){if(T.hasOwnProperty(X)){U.push(X+"="+T[X])}}U.push("resizable=1");U.push("scrollbars=1");try{O=window.open(V,"newWindow",U.join(","));if(O.focus){O.focus()}}catch(Y){return true}if(W){N();t(W)}return false}function f(){var U={},T;U.service_type_id=c.one("#form_service_type_id").get("value");U.object_type=c.one("#form_object_type").get("value");U.object_id=c.one("#form_object_id").get("value");T=c.one("#form_owner_nsid");if(T){U.owner_nsid=T.get("value")}return U}function R(U){var W=[];for(var V in U){if(U.hasOwnProperty(V)){W.push(V+"="+encodeURIComponent(U[V]))}}var T={method:"POST",data:W.join("&"),on:{complete:function(Z,X){var Y=X.responseText;if(G(Y)){c.global_dialog.create_dialog(Y).show({modal:true,width:(!c.UA.ie||c.config.is_zeus?422:440)});v()}else{c.shareThisV3Dialog.service_helpers.genericError()}}}};c.io("/share.gne",T)}function J(){if(c.shareThisV3Services){k=c.shareThisV3Services.get_services()}}J();c.shareThisV3Dialog={assign_dialog_dismiss_events:v,confirm_delete:x,do_share_action:R,fetch_sharing_fragment:h,get_current_service:u,get_form_params:f,init:J,refresh_dialog_state:E,services:k,service_helpers:d,get_share_this_data:P,share_by_service:g,set_dialog_state:l,show_setup_state:A,webCirca1999:s}},"0.0.1",{requires:F.config.modules["share-this-v3-dialog"].requires||[],optional:F.config.modules["share-this-v3-dialog"].optional||[]});YUI.add("share-this-v3-triggers",function(c){function b(d){d.on("click",a)}function a(j){var f,m,k,i,o,l,d,n,g,h;f=j.target.ancestor("a.share-dialog-action",true);if(!f&&j.target.hasClass("Butt")){f=j.target.one("a.share-dialog-action")}if(!f){return}if(f.hasClass("share-disabled")){j.preventDefault();return}k=f.getAttribute("data-service-id");i=f.getAttribute("data-service-type-id");if(!i){j.preventDefault();return}l=f.getAttribute("data-setup-only");d=(f.getAttribute("data-service-needs-setup")==="true");n=(f.getAttribute("data-service-always-use-popup")==="true");if(!d&&j.shiftKey){c.log("Allowing set-up override");d=true}if(!l){m=c.shareThisV3Services.get_service(parseInt(i,10));o=m&&m.name&&m.name.replace(/[^a-zA-Z0-9_\-]/g,"_");if(o){if(c.config.flickr.user.nsid){if(d){h=o+"_button_needs_setup"}else{h=o+"_button_already_setup"}}else{h=o+"_button_signed_out"}g="flickr.sharing_triggers."+h;c.flanal(g,h)}}c.shareThisV3Dialog.share_by_service(k,i,d,l,n,j);j.preventDefault();return false}c.shareThisV3Triggers={listen:b,handleClick:a}},"0.0.1",{requires:F.config.modules["share-this-v3-triggers"].requires||[],optional:F.config.modules["share-this-v3-triggers"].optional||[]});YUI.add("cache-simple",function(a){CacheSimple=function(){};CacheSimple.prototype={cache:{},add:function(b,c,d){this.cache[b]={response:c,payload:d}},retrieve:function(b){return this.cache[b]},clear:function(){this.cache={}}};a.CacheSimple=CacheSimple},"0.0.1");YUI.add("node-visibility",function(b){var p,n,g,l,o,a,q,r,e=window,t=window.document,s,i;n={resize:[],scroll:[]};i=(F.config.flickr.flags.enable_uh_eyebrow&&b.one("#eyebrow"))?b.one("#eyebrow").get("offsetHeight"):0;s=(F.config.flickr.flags.enable_global_nav&&b.one("#global-nav"))?b.one("#global-nav").get("offsetHeight")+i:0;function k(u){b.Array.each(n.scroll,function(v){v(u)})}function c(u){b.Array.each(n.resize,function(v){v(u)})}g={register:function(v,w){var u=n[v].push(w);return{detach:function(){n[v][u]=function(){}}}}};b.on("scroll",b.betterThrottle(k,50));b.on("resize",b.betterThrottle(c,50));function j(){var u=j.region;if(!u){u={};u.height=b.DOM.winHeight();u.width=b.DOM.winWidth();u.top=Math.max(t.body.scrollTop||0,t.documentElement.scrollTop||0,e.pageYOffset||0);u.left=Math.max(t.body.scrollLeft||0,t.documentElement.scrollLeft||0,e.pageXOffset||0);u.right=u.left+u.width;u.bottom=u.top+u.height;u[0]=u.top;u[1]=u.left;j.region=u}return u}function d(){j.region=undefined}g.register("resize",d);g.register("scroll",d);function m(v,u){var w={};if(b.Lang.isNumber(u[0])){w.left=v.left-u[0];w.right=v.right+u[0];w.width=v.width+u[0]*2;if(w.width<1){w.width=1;w.left=Math.floor((v.right+v.left)/2);w.right=w.left+1}w[0]=w.top}if(b.Lang.isNumber(u[1])){w.top=v.top-u[1];w.bottom=v.bottom+u[1];w.height=v.height+u[1]*2;if(w.height<1){w.height=1;w.top=Math.floor((v.bottom+v.top)/2);w.bottom=w.top+1}w[1]=w.left}return w}l=function(w,v){var u,x;for(u=w.ancestor();u;u=u.ancestor()){x=u.getStyle("overflow");if(x!==""&&x!=="visible"){v=v||w.get("region");if(!w.inRegion(u,false,v)){return true}}}return false};function f(v){var u,w;if(!f.cache){f.cache=new b.CacheSimple()}u=f.cache;if(b.Lang.isString(v)){w=u.retrieve(v);if(w&&w.response&&(new Date()).getTime()<w.payload.expires){return w.response}else{return null}}else{return u}}function h(u,w){var v=500;if(!b.Lang.isString(u)){return false}f().add(u,w,{expires:(new Date()).getTime()+v});return true}o=function(x,u){var v,A,y,w,z;v=true;u=u?q(u):[0,0];y=x.toString();z=f(y);w=z||{};if(v){if(!b.Lang.isString(w.display)){w.display=x.getStyle("display")}if(!b.Lang.isNumber(w.offsetHeight)){w.offsetHeight=x.get("offsetHeight")}if(!b.Lang.isNumber(w.offsetWidth)){w.offsetWidth=x.get("offsetWidth")}if(w.display==="block"&&(w.offsetHeight===0||w.offsetWidth===0)){v=false}}if(v){A=j();if(!w.region){w.region=x.get("region")}if(!x.inRegion(m(A,u),false,w.region)){v=false}}if(v){if(!b.Lang.isBoolean(w.hidden_by_overflow)){w.hidden_by_overflow=l(x,w.region)}if(w.hidden_by_overflow){v=false}}if(!z){h(y,w)}return v};a=(function(){var u=false,w={},C,v,D,B,y,x,A,z;C=function(){if(!u){A=g.register("scroll",y);z=g.register("resize",y);u=true}};v=function(){if(u){A.detach();z.detach();u=false}};D=function(H){var E,G;if(w[H]){delete w[H];G=true;for(E in w){if(w.hasOwnProperty(E)){G=false;break}}if(G){v()}return true}return undefined};B=function(G){var E=w[G];if(b.Lang.isObject(E)){if(o(E.node,E.threshold)){E.callback.call(E.oScope,E.arg);D(G)}}};y=function(){for(var E in w){if(w.hasOwnProperty(E)){B(E)}}};x=function(H,G,E){if(b.Lang.isObject(w[H])){w[H][G]=E;return true}return undefined};return function(J,L,G,E,H){var I,K;J=b.one(J);if(!b.Lang.isObject(J)||!b.Lang.isFunction(L)){return false}G=G?q(G):[0,0];if(!E){E=J}if(H===true){H=E}if(!b.Lang.isObject(H)){H=window}C();I={node:J,callback:L,threshold:G,arg:E,oScope:H};K=b.guid();w[K]=I;b.later(0,window,B,K);return{cancel:function(){return D(K)},set:function(N,M){return x(K,N,M)},check:function(){return B(K)}}}}());q=function(u){if(b.Lang.isNumber(u)){u=[u,u]}if(!b.Lang.isArray(u)||!b.Lang.isNumber(u[0])||!b.Lang.isNumber(u[1])){u=[0,0]}return u};r=function(v,u,A,z,x){var w,B;if(!v instanceof b.Node){return false}if(!v.inViewportRegion(true)||x){if(typeof u==="object"){align_to_bottom=u.bottom;z=u.onfinish;u=u.top}else{u=!!u}A=b.Lang.isNumber(A)?A:0;e.setTimeout(function(){if(!b.Anim){v.scrollIntoView(u);if(z&&typeof z==="function"){z()}}else{if(u){B=v.getY()-A}else{if(align_to_bottom){B=v.getY()-v.get("winHeight")+5+(2*v.get("offsetHeight"))+A}else{B=v.getY()+v.get("offsetHeight")-v.get("winHeight")+5}}B-=s;w=new b.Anim({node:b.one("window"),to:{scroll:[0,B]},duration:0.3,easing:b.Easing.easeOut});w.on("end",function(){if(z&&typeof z==="function"){z()}});w.run()}},0)}return v};p=function(u){this._node=u.host};p.NS="vis";p.NAME="NodeVisibilityPlugin";p.prototype={isVisible:function(u){return o(this._node,u)},onVisible:function(x,v,u,w){return a(this._node,x,v,u,w)},animScrollIntoView:function(u,w,v){return r(this._node,u,w,null,v)},destroy:function(){}};b.Node.plug(p);b.NodeVisibility=p},"0.0.1",{requires:["node","node-pluginhost","better-throttle","cache-simple"],optional:["anim","anim-scroll"]});YUI.add("share-this-v3-menu",function(c){var T,P,I,M,e,w="share-options-open",b="share-options-deferred",t="share-options-placeholder",B="share-menu",K={},m=false,E=c.config.flickr.page_type==="photo",J=c.config.flickr.page_type==="faves",p=c.config.flickr.flags.enable_2013_photo_page_extras,x=c.config.flickr.page_type==="sihp",g=c.config.flickr.page_type==="photostream",G=c.config.flickr.page_type==="set",s=c.config.flickr.page_type==="faves",k=c.config.flickr.page_type==="group_pool",D=p&&(E||J),C=D||x||(p&&(g||G||s)),v;function N(X){var Y,V,Z,W=X||{};V=W.localPlacement||"#photo-actions #stats_ul";function U(){P=c.menus.add({id:"share-menu-v3",popover:Z,context:B,button_node:W.button_node||q(),constrain_node:D?c.one(document.body):null,scroll:p&&(!(g||G||s||k)||c.config.flickr.flags.enable_justified_view_inline_sharing)?W.scroll:null,onHide:function(){if(W&&W.onHide){W.onHide()}}})}T=c.one("#share-menu-v3");if(!T){c.log("share menu v3:: WARN: Could not find menuNode","error","share-this-v3-menu")}e=c.one("#post-upload-actions");if(e){c.shareThisV3Triggers.listen(e)}M=c.one("#share-buttons, "+(D&&E?"#stats_ul":"#button-bar"));if(M){c.shareThisV3Triggers.listen(M);if(!c.config.flickr.is_touch_device){Y=M.on("mouseover",function(aa){if(q().contains(aa.target)){Y.detach();u()}})}}if(T){T.on("click",n);T.on("mousedown",o);T.on("mouseup",l);if(!c.config.flickr.is_touch_device){T.on("mouseover",c.betterThrottle(function(ab){var aa=ab.target.ancestor("li."+b,true);if(aa){u(aa)}},100))}i();Z=new c.Popover({srcNode:"#share-menu-v3",visible:false,width:"400px",accordian:true,arrowPosition:W.arrowPosition||"tr",isRefresh:W.overrideRefresh||D,refreshBottom:W.bottom||"37px",refreshRight:W.right||"66px",showSquare:C,extraCSS:C?"square-menu-css":""});Z.on("visibleChange",function(aa){if(aa.newVal){a();u()}});Z.render((D&&!W.overrideRefresh)?c.one(V):undefined);if(c.one("#post-upload-share-more-button")){I=c.menus.add({id:"share-menu-v3",popover:Z,context:B,button_node:c.one("#post-upload-share-more-button")});c.on("postUploadSharing:close",U)}else{U()}}c.on("shareDialog:servicesAuthComplete",function(){if(P){P.hide()}y();window.setTimeout(function(){A((p?["menu-services"]:["buttons","menu-services"]),{reload:true})},1000)});if(c.config.flickr.sharing.shareability_is_unknown){A((p?["menu-full"]:["buttons","menu-full"]),{menuCallback:W.afterInit})}if(F.actionQueue&&c.Lang.isObject(F.actionQueue)){F.actionQueue["share-this-v3-more-button"]={display_share:function(){if(P){P.show()}}};F.actionQueue.module_loaded("share-this-v3-more-button")}c.fire("shareMenu:initialized");m=true}function o(U){if(U.target.test("#share-options-grablink-input")||U.target.test(".embed-markup")){U.target.select()}}function l(U){if(U.target.test("#share-options-grablink-input")||U.target.test(".embed-markup")){U.preventDefault()}}function n(U){if(U.target.test("#share-options-grablink-input")||U.target.test(".embed-markup")){U.target.select();U.preventDefault()}else{if(U.target.ancestor("li.share-options div.share-options-header",true)){U.preventDefault();j(U.target.ancestor("li"))}else{if(U.target.ancestor(".share-more-ways",true)){U.preventDefault();T.one(".share-services-small").toggleClass("share-hidden")}else{if(U.target.ancestor("ul.share-options-list li, ul.share-services li, ul.share-services-small li",true)){c.shareThisV3Triggers.handleClick(U)}else{if(U.target.ancestor("form#grab-link input",true)){L(U)}else{if(U.target.ancestor("form#sharing-get-html-form input",true)){z(U)}}}}}}}function a(U){U=U||T.one("."+w);if(U&&U.getAttribute("data-panel-name")==="services"){d(U)}}function u(U){U=U||T.one("."+w);if(U&&U.hasClass(b)){if(U.get("id")==="share-options-grablink"){A(["menu-grab-the-link"])}else{if(U.get("id")==="share-options-services"){A(["menu-services"])}}U.removeClass(b)}}function j(V){var Z,U,ae,ab,ag,W,af,ad,Y,ac,X,ah,aa;if(!V||V.hasClass(w)){return false}ae=T.one("."+w);a(ae);u(V);U=V.one(".share-options-header");Z=V.one(".share-options-inner");Z.setStyle("display","block");W=Z.get("offsetHeight")+parseInt(Z.getComputedStyle("marginTop"),10)+parseInt(Z.getComputedStyle("marginBottom"),10)+U.get("offsetHeight")+parseInt(U.getComputedStyle("marginTop"),10)+parseInt(U.getComputedStyle("marginBottom"),10);ad=new c.Anim({node:V,to:{height:W},duration:0.42,easing:c.Easing.easeBoth});ad.on("end",function(){V.setStyle("height","");V.addClass(w)});if(!c.UA.ie||c.UA.ie>=8){Y=new c.Anim({node:U,from:{backgroundColor:"#0063DC",color:"#ffffff"},to:{backgroundColor:"#ffffff",color:"#000000"},duration:0.42,easing:c.Easing.easeBoth});Y.on("end",function(){U.setStyle("backgroundColor","");U.setStyle("color","")})}if(ae){ag=ae.one(".share-options-header");ab=ae.one(".share-options-inner");af=ag.get("offsetHeight")+parseInt(ag.getComputedStyle("marginTop"),10)+parseInt(ag.getComputedStyle("marginBottom"),10);ac=new c.Anim({node:ae,to:{height:af},duration:0.25,easing:c.Easing.easeBoth});ac.on("end",function(){ae.setStyle("height","");ae.removeClass(w);ab.setStyle("display","none")});if(!c.UA.ie||c.UA.ie>=8){X=new c.Anim({node:ag,from:{backgroundColor:"#ffffff",color:"#000000"},to:{backgroundColor:"#F6F6F6",color:"#0063dc"},duration:0.25,easing:c.Easing.easeBoth});X.on("end",function(){ag.setStyle("backgroundColor","");ag.setStyle("color","")})}ac.run();if(X){X.run()}}ah=V.getAttribute("data-panel-name");ad.run();if(Y){Y.run()}a(V);aa={services:1,link:2,embed:3,party:0};if(ah&&aa[ah]){if(j.pending){window.clearTimeout(j.pending);j.pending=undefined}j.pending=window.setTimeout(function(){c.flickrAPI.callMethod("flickr.prefs.setPrefs",{share_this_panel:aa[ah]})},2000)}}function q(){return M&&M.one(".share-dropdown-arrow")}function Q(){var U,W,V;U=T.one("#share-options-grablink-input");W=T.one("#short-url input");if(W){V=W.get("checked")?W.getAttribute("data-url-short"):W.getAttribute("data-url-long")}if(V){U.set("value",V);U.select()}}function L(U){if(U.target.get("id")==="gp-short-url"){Q()}else{if(U.target.hasClass("gp-type")){if(T.one("form#grab-link input.gp-type:checked")){T.one("#gp-add-button").replaceClass("DisabledButt","Butt")}else{T.one("#gp-add-button").replaceClass("Butt","DisabledButt")}}else{if(U.target.get("id")==="gp-add-button"){U.preventDefault();if(!U.target.hasClass("DisabledButt")){window.setTimeout(function(){A(["menu-grab-the-link"],{reload:true,guestpass:true})},10)}}}}}function z(V){var U=V.target.get("id");if(U==="code-type-bbcode"||U==="code-type-html"||U==="code-type-playr"){h()}}function h(){var V,Y,X,U,W,Z;V={playr:{Thumbnail:"share-options-embed-textarea-t-playr",Square:"share-options-embed-textarea-sq-playr","Large Square":"share-options-embed-textarea-q-playr",Small:"share-options-embed-textarea-s-playr","Small 320":"share-options-embed-textarea-n-playr",Medium:"share-options-embed-textarea-m-playr","Medium 640":"share-options-embed-textarea-z-playr","Medium 800":"share-options-embed-textarea-c-playr",Large:"share-options-embed-textarea-l-playr","Large 1600":"share-options-embed-textarea-h-playr","Large 2048":"share-options-embed-textarea-k-playr",Original:"share-options-embed-textarea-o-playr"},html:{Thumbnail:"share-options-embed-textarea-t",Square:"share-options-embed-textarea-sq","Large Square":"share-options-embed-textarea-q",Small:"share-options-embed-textarea-s","Small 320":"share-options-embed-textarea-n",Medium:"share-options-embed-textarea-m","Medium 640":"share-options-embed-textarea-z","Medium 800":"share-options-embed-textarea-c",Large:"share-options-embed-textarea-l","Large 1600":"share-options-embed-textarea-h","Large 2048":"share-options-embed-textarea-k",Original:"share-options-embed-textarea-o"},bbcode:{Thumbnail:"share-options-embed-textarea-t-bbcode",Square:"share-options-embed-textarea-sq-bbcode","Large Square":"share-options-embed-textarea-q-bbcode",Small:"share-options-embed-textarea-s-bbcode","Small 320":"share-options-embed-textarea-n-bbcode",Medium:"share-options-embed-textarea-m-bbcode","Medium 640":"share-options-embed-textarea-z-bbcode","Medium 800":"share-options-embed-textarea-c-bbcode",Large:"share-options-embed-textarea-l-bbcode","Large 1600":"share-options-embed-textarea-h-bbcode","Large 2048":"share-options-embed-textarea-k-bbcode",Original:"share-options-embed-textarea-o-bbcode"}};Y={html:0,bbcode:1};if(c.config.flickr.flags.enable_playr){Y={html:2,bbcode:1,playr:0}}X={Square:1,Thumbnail:2,Small:3,Medium:4,"Medium 640":5,Large:6,Original:7,"Large Square":8,"Small 320":9,"Medium 800":10,"Large 1600":11,"Large 2048":12};U=c.one("#sharing_size").get("value");if(c.one("#code-type-bbcode").get("checked")){W="bbcode"}else{if(c.one("#code-type-playr")&&c.one("#code-type-playr").get("checked")){W="playr"}else{W="html"}}Z=V[W][U];c.all(".embed-markup").each(function(aa){aa.setStyle("display","none")});c.one("#"+Z).setStyle("display","block");if(h.pending){window.clearTimeout(h.pending);h.pending=undefined}h.pending=window.setTimeout(function(){c.flickrAPI.callMethod("flickr.prefs.setPrefs",{photo_embed_type:Y[W],photo_embed_size_new:X[U]})},2000)}function i(){if(!K.embed_size_change_handle&&c.one("#sharing_size")){K.embed_size_change_handle=c.one("#sharing_size").on("change",function(U){h()})}}function f(){c.Object.each(K,function(V,U){if(V&&V.detach){V.detach();K[U]=undefined}})}function y(){var U;if(M){U=M.all(".share-this-v3");if(U&&U.size()){U.each(function(X){var V=X.one(".Butt, .DisabledButt"),W;if(V){V.removeClass("Butt").addClass("DisabledButt share-disabled");W=V.one("a");if(W){W.removeAttribute("data-service-type-id");W.removeAttribute("data-service-id");W.removeAttribute("data-service-needs-setup")}}})}}}function O(V,X,ab){var ac="...",Y=ab.get("innerHTML"),Z=Y.match(/\.\.\./),U=Y.length-(Z?3:0),aa=8,W=V.get("offsetWidth");if(W>X&&U>aa){ab.set("innerHTML",Y.substr(0,Y.length-(Z?4:1))+ac);O.apply(this,arguments)}V.setAttribute("data-truncated",1)}function d(U){if(U&&U.one("li")){var V=U.one("li").get("offsetWidth"),W=U.all(".service-username");if(W){W.each(function(){if(!this.getAttribute("data-truncated")){O(this,V,this.one(".service-truncated"))}})}}}function S(){return c.JSON.stringify(c.config.flickr.sharing.object)}function R(W,V){var U=V?["menu-full"]:["buttons","menu-full"];A(U,{menuCallback:W})}function H(){var U;if(M){U=M.all(".share-this-v3");if(U&&U.size()){U.remove()}}}function A(aa,X){var W,ab,U,Z=[],V="/share.gne",ac=[],Y;if(!aa){return false}if(c.Lang.isString(aa)){aa=[aa]}if(!c.Lang.isArray(aa)){return false}X=X||{};W=S();U={buttons:{on:{start:function(){if(!M){return false}if(p){return false}y();return true},success:function(ad){var ae;if(M){ae=c.Node.create(ad);if(ae){M.all(".share-this-v3").remove();if(c.config.flickr.flags.enable_2013_photo_page&&(E||J)){M.all(".divider").insert(ae,"before")}else{M.append(ae)}P.set("button_node",q());if(I){I.set("button_node",c.one("#post-upload-share-more-button"))}}}}}},"menu-grab-the-link":{on:{start:function(){if(X.reload){if(!ab["menu-grab-the-link"].placeholder_node){ab["menu-grab-the-link"].placeholder_node=T.one("#share-options-grablink ."+t);if(!ab["menu-grab-the-link"].placeholder_node){ab["menu-grab-the-link"].placeholder_node=T.one("#share-options-grablink .share-options-inner")}}if(X.guestpass){ac.push("guestpass=1");ab["menu-grab-the-link"].placeholder_node.all("form#grab-link input.gp-type:checked").each(function(ad){ac.push(ad.getAttribute("name")+"=1")})}ab["menu-grab-the-link"].loaded=false;ab["menu-grab-the-link"].placeholder_node.addClass(t);ab["menu-grab-the-link"].placeholder_node.set("innerHTML","")}if(ab["menu-grab-the-link"].loaded){return false}if(T.one("form#grab-link")){ab["menu-grab-the-link"].loaded=true;return false}if(!ab["menu-grab-the-link"].placeholder_node){ab["menu-grab-the-link"].placeholder_node=T.one("#share-options-grablink ."+t);if(!ab["menu-grab-the-link"].placeholder_node){c.log("Missing placeholder node","error","share-this-v3-menu");return false}}ab["menu-grab-the-link"].placeholder_node.set("innerHTML","").addClass(t);return true},success:function(ad){ab["menu-grab-the-link"].loaded=true;ab["menu-grab-the-link"].placeholder_node.set("innerHTML",ad);if(X.guestpass){if(c.config.flickr.page_type==="photo"&&c.photo&&c.photo.getCurrentPhoto){c.use("photo-data",function(af){var ae=af.photo.getCurrentPhoto();if(ae){ae.increment("guestpass_count")}})}}},failure:function(){ab["menu-grab-the-link"].placeholder_node.set("innerHTML",c.transjax.get("share-menu","grab_the_link_fragment_error"))},complete:function(){ab["menu-grab-the-link"].placeholder_node.removeClass(t)}}},"menu-services":{on:{start:function(){if(X.reload){if(!ab["menu-services"].placeholder_node){ab["menu-services"].placeholder_node=T.one("#share-options-services ."+t);if(!ab["menu-services"].placeholder_node){ab["menu-services"].placeholder_node=T.one("#share-options-services .share-options-inner")}}ab["menu-services"].loaded=false;ab["menu-services"].placeholder_node.addClass(t);ab["menu-services"].placeholder_node.set("innerHTML","")}if(ab["menu-services"].loaded){return false}if(T.one("ul.share-services")){ab["menu-services"].loaded=true;return false}if(!ab["menu-services"].placeholder_node){ab["menu-services"].placeholder_node=T.one("#share-options-services ."+t);if(!ab["menu-services"].placeholder_node){c.log("Missing placeholder node","error","share-this-v3-menu");return false}}return true},success:function(ad){ab["menu-services"].loaded=true;ab["menu-services"].placeholder_node.removeClass(t);ab["menu-services"].placeholder_node.set("innerHTML",ad)},failure:function(af,ae,ad){ab["menu-services"].placeholder_node.set("innerHTML",c.transjax.get("share-menu","services_fragment_error"))},complete:function(){ab["menu-services"].placeholder_node.removeClass(t)}}},"menu-full":{on:{start:function(){f();return true},success:function(ad){if(T){T.set("innerHTML",ad)}i();if(X.menuCallback){X.menuCallback()}}}}};if(!A.memo){A.memo={};c.Object.each(U,function(ae,ad){A.memo[ad]={fetching:{}}})}ab=A.memo;c.Array.each(aa,function(af,ad){var ae;if(ab[af].fetching[W]){return false}ae=U[af].on.start.apply(window);if(ae){Z.push(af)}});if(Z.length===0){return false}if(c.config.flickr.sharing.object.id){ac.push("object_id="+c.config.flickr.sharing.object.id)}if(c.config.flickr.sharing.object.type){ac.push("object_type="+c.config.flickr.sharing.object.type)}if(c.config.flickr.sharing.object.owner_nsid){ac.push("owner_nsid="+c.config.flickr.sharing.object.owner_nsid);ac.push("object_owner_nsid="+c.config.flickr.sharing.object.owner_nsid)}ac.push("cachebust="+(new Date()).getTime());ac.push("action=retrieve_fragments");c.Array.each(Z,function(ad){ac.push("fragments[]="+ad)});if(F.config.flickr.page_type==="photo"){ac.push("is_photo_page=true")}ac=ac.join("&");V=V+"?"+ac;Y={on:{success:function(af,ae){var ad=ae.responseText.split("<!-- Fragment -->");c.Array.each(Z,function(ah,ag){if(W===S()){if(c.Lang.isFunction(U[ah].on.success)){U[ah].on.success.apply(window,[ad[ag]])}if(c.Lang.isFunction(U[ah].on.complete)){U[ah].on.complete.apply(window,[])}}delete ab[ah].fetching[W]})},failure:function(af,ae){var ad=arguments;c.Array.each(Z,function(ag){if(W===S()){if(c.Lang.isFunction(U[ag].on.failure)){U[ag].on.failure.apply(window,ad)}if(c.Lang.isFunction(U[ag].on.complete)){U[ag].on.complete.apply(window,[])}}delete ab[ag].fetching[W]})}}};c.Array.each(Z,function(ad){ab[ad].fetching[W]=true});c.io(V,Y)}function r(){if(P){P.hide()}}c.shareThisV3Menu={init:N,show:function(){P.show()},hide:r,openPanel:j,disableButtons:y,refresh:R,clear:H,getMenu:function(){return P},isInitialized:function(){return m}}},"0.0.1",{requires:F.config.modules["share-this-v3-menu"].requires||[],optional:F.config.modules["share-this-v3-menu"].optional||[]});(function(){var a="refresh-sihp-comment";YUI.add(a,function(c){var r,f;var o={};var d=function(s){q(s)};c.config[a]=c.config[a]||{open_cards:{}};function q(t){var s,u;if(!c.Lang.isObject(t)){console.warn("["+a+"]","No config");return}s=t.container;if(c.Lang.isString(s)){s=c.one(s)}if(!c.Lang.isObject(s)||!s.getDOMNode){console.warn("["+a+"]","No container node");return}r=t;s.delegate("click",i,t.commentIconSelector);s.delegate("click",h,t.commentReplySelector||".comment-reply");if(c.config.flickr.flags.enable_feed_reskin){s.delegate("click",p,".reply");s.delegate("click",b,".delete")}if(!c.config.flickr.flags.enable_feed_reskin){n(s)}f="refresh-sihp-comment:dismiss-dialog";c.on(f,g)}function b(w){w.preventDefault();w.target.ancestor(".comment-wrapper").setStyle("opacity",".2");var v=w.target.getData("comment-id"),t=w.target.getData("photo-id"),u=w.target.getData("user-id"),s=w.target.getData("viewer-nsid");c.flickrAPI.callMethod("flickr.photos.comments.deleteComment",{comment_id:u+"-"+t+"-"+v,viewerNSID:s},{success:function(x){w.target.ancestor(".comment-wrapper").remove(true)},failure:function(x){console.error("Error deleting comment",x);w.target.ancestor(".comment-wrapper").setStyle("opacity","1")}})}function p(v){v.preventDefault();var t,s=v.target.ancestor(".card-comment"),x=c.config.flickr.user.icon_url;if(c.one("#comment-form")){c.one("#comment-form").remove(true)}t='<form action="photo_comments_fragment.gne?photo='+v.target.getData("photo-id")+'" method="post" id="comment-form">';t+='<img class="buddyicon" src="'+c.config.flickr.user.icon_url+' width="32" height="32">';t+='<input type="hidden" name="magic_cookie" value="'+c.config.flickr.magic_cookie+'">';t+='<input type="hidden" class="photo" name="photo" value="'+v.target.getData("photo-id")+'">';t+='<input type="hidden" name="addcomment" value="1">';t+='<textarea rows="2" cols="80" type="text" class="message" name="message" rows="8" tabindex="2" placeholder="Add a comment" aria-label="Add your comment"></textarea>';t+='<input type="submit" class="submit-comment" name="submit" value="Comment" rows="8" tabindex="2" placeholder="Add a comment" aria-label="Add your comment">';t+="</form>";s.append(t);var u=s.one("#comment-form");u.one(".message").focus();if(v.target.getData("commenter-id")){u.one(".message").set("text","[https://www.flickr.com/photos/"+v.target.getData("commenter-id")+"] ")}u.one(".message").on("keydown",function(y){if(y.keyCode===13&&(y.metaKey||y.ctrlKey)){y.target=u;w(y)}});u.on("submit",w);function w(D){D.preventDefault();var B,C,A,z,y;B=D.target.one(".photo").get("value");C=encodeURIComponent(D.target.one(".message").get("value"));y=D.target.ancestor(".card-comment").one(".action-author");A="magic_cookie="+c.config.flickr.magic_cookie+"&photo="+B+"&addcomment=1&flash_ver=unknown&hide-meta=true&sort=date-posted-desc&limit=4&feed=1&message="+C+"&page_type="+c.config.flickr.page_type;z={method:"post",data:A,on:{success:function(H,G,E){y.set("innerHTML",G.responseText);D.target.remove(true)},failure:function(E,G){console.error("Failure",E,G)}}};c.io("/photo_comments_fragment_2013.gne?cachebust="+(new Date()).getTime(),z)}}function i(z){if(z.preventDefault){z.preventDefault()}if(c.shareThisV3Menu.isInitialized()){c.shareThisV3Menu.hide()}if(z.target.ancestor(r.commentButtonNodeSelector,true).hasClass("loading")){return}var B=z.target.ancestor(r.photoContainerSelector),D=r.commentContainerSelector?B.ancestor(r.commentContainerSelector):B,E=r.photoNodeSelector?B.one(r.photoNodeSelector):B,A=z.target.ancestor(r.commentButtonNodeSelector,true),u=E.getAttribute("data-photo-id"),x=c.one(r.container).getComputedStyle("width"),C=E.get("offsetHeight"),y=(C+15)+"px",s=r.arrowOffset||39;if(z.target.ancestor(".leftPortrait")){s+=267}if(c.one(".comments-popover-"+u)){g();return}else{if(c.one(".comments-popover")){g()}}if(c.all(".comments-popover")){c.all(".comments-popover").remove()}if(c.all(r.commentIconSelector)){c.all(r.commentIconSelector).removeClass("active")}totalComments=parseInt(E.getAttribute("data-comments-total-count"),10);if(A.one(".li_icon")){A.one(".li_icon").remove()}else{if(r.onLoading){r.onLoading(A)}}if(!c.config.flickr.flags.enable_feed_reskin||c.config.flickr.page_type!=="sihp"){A.append('<span class="html5-balls"><span class="blueball"></span><span class="pinkball"></span></span>')}A.addClass("loading");var w=totalComments<=4?0:totalComments-4;var t="magic_cookie="+c.config.flickr.magic_cookie+"&photo="+u+"&offset="+w+"&limit=4&show-chrome=true&view-more-count=20&truncate-comment-body=120&hide-meta=true&is-form=true&page_type="+c.config.flickr.page_type;var v={method:"post",data:t,on:{success:function(G,H,N){c.config[a].open_cards[parseInt(u,10)]=true;var Q,M;D.append('<div id="comments" class="comments-popover comments-popover-'+u+'"><div class="arrow"></div><div class="comments-inner">'+H.responseText+"</div></div>");if(r.edgeDetection){if(A.getX()<570){D.one("#comments").setStyle("right","");D.one("#comments").setStyle("left","10px");var O=D.getComputedStyle("width");O=O.replace("px","");O=parseInt(O,10);s=O-75+10}if(A.getY()<570){var K=D.getComputedStyle("height");K=K.replace("px","");K=parseInt(K,10);D.one("#comments").setStyle("top",(K-3)+"px");D.one("#comments").setStyle("bottom","inherit");var P=D.one(".arrow");var I=P.getStyle("bottom");I=I.replace("px","");I=parseInt(I,10);P.setStyle("top",I);P.setStyle("bottom","inherit");P.setStyle("borderBottomColor",P.getStyle("borderTopColor"));P.setStyle("borderTopColor","transparent")}}else{if(B.hasClass("topRightLandscapeContainer")){var K=D.getComputedStyle("height");if(K){K=parseInt(K.replace("px",""),10);D.one("#comments").setStyle("bottom",((K/2)+37)+"px")}}else{if(B.hasClass("leftPortraitContainer")){D.one("#comments").setStyle("right","");D.one("#comments").setStyle("left","10px");var O=D.getComputedStyle("width");O=O.replace("px","");O=parseInt((O/2)+"px",10);s=O-75}}}if(A.one(".html5-balls")){A.one(".html5-balls").remove()}A.removeClass("loading");A.addClass("active");if(r.onSuccess){r.onSuccess(B,A,totalComments)}else{A.append('<span class="li_icon"></span>')}Q=D.one(".submit-comment")||D.one(".comment-button-post");if(Q){Q.on("click",function(R){k(R,u)});D.one("textarea").on("keydown",function(R){if(R.keyCode===13&&(R.ctrlKey||R.metaKey)){k(R,u)}})}if(D&&D.one("form #message")){D.one("form #message").on("keyup",function(R){o[u]=R.target.get("value")});if(o[u]){D.one("form #message").set("value",o[u])}}if(A.hasClass("counter1")){s+=5}else{if(A.hasClass("counter2")){s+=9}else{if(A.hasClass("counter3")){s+=13}}}M=D.one(".arrow");if(M){if((r.edgeDetection&&A.getX()<570)||B.hasClass("leftPortraitContainer")){M.setStyle("left",s+"px")}else{M.setStyle("right",s+"px")}}if(c.one("#load-more-next-comments")){c.one("#load-more-next-comments").hide()}var J=window.innerWidth+1000;B.append("<div class='popover-shim' style='position: fixed; top: 0; left: -500px; height: 2000px; width: "+J+"px; z-index: 1;'></div>");if(c.one(".popover-shim")){c.one(".popover-shim").on("click",g)}c.keyboardShortcutManager.register({keystring:"27",handler:g,context:"*"});try{if(r.edgeDetection&&A.getY()<570){D.one(".comment-content textarea").vis.animScrollIntoView({bottom:true,top:false,onfinish:function(){D.one(".comment-content textarea").focus()}},100,true)}else{D.one(".comment-content textarea").focus()}}catch(L){}if(D.one("form #message")){D.one("form #message").focus()}},failure:function(I,H,G){A.one(".html5-balls").remove();if(r.onSuccess){r.onSuccess(B,A,totalComments)}else{A.append('<span class="li_icon"></span>')}j(c.transjax.get("photo-comments","error_getting_comments"))}}};c.io("/photo_comments_fragment_2013.gne?cachebust="+(new Date()).getTime(),v)}function k(C,w){C.preventDefault();var x=C.target.ancestor(r.photoContainerSelector)||C.target.ancestor(r.commentContainerSelector),G=x.one(r.photoNodeSelector+"[data-photo-id="+w+"]")?x.one(r.photoNodeSelector+"[data-photo-id="+w+"]"):r.commentContainerSelector?C.target.ancestor(r.commentContainerSelector):x,E=(x.ancestor(r.commentContainerSelector)||x),z=E.one(".comments-popover, .comments-overlay"),D=G.one(r.commentButtonNodeSelector),t=(E.one(".comments-popover"))?true:false,B,s=G.getAttribute("data-comments-total-count"),v=parseInt(s===""?0:s,10);if(c.config.flickr.flags.enable_grease&&!c.config.flickr.user.nsid&&c.grease){var A=encodeURIComponent(z.one("form #message").get("value"));c.grease.postComment(A,w);c.grease.authenticate(function(H){});return false}var u="magic_cookie="+c.config.flickr.magic_cookie+"&photo="+w+"&addcomment=1flash_ver=unknown&offset="+(v-3)+"&limit=4&show-chrome=true&view-more-count=20&truncate-comment-body="+e(2)+"&hide-meta=true&message="+encodeURIComponent(z.one("form #message").get("value"));var y={method:"post",data:u,on:{success:function(O,N,J){var H;var K=N.responseText.trim().length?c.Node.create(N.responseText).one(".Problem"):undefined;if(K||N.responseText.trim().length===0||z.one("form #message").get("value").trim().length===0){if(K&&K.get("text")==="An empty comment box? That won't work!"){j(c.transjax.get("photo-comments","error_empty_body"))}else{j(c.transjax.get("photo-comments","error_add_generic"))}if(z.one(".comments-inner")){z.one(".comments-inner .html5-balls").remove();z.one(".comments-inner form").show()}else{z.one(".comment-content .html5-balls").remove();z.one(".comment-content form").show()}return}o={};if(t){var I=v,M=I+1,L;B=G.get("parentNode");D.setAttribute("class","");if(M<10){D.addClass("counter1");L="counter1"}else{if(M<100){D.addClass("counter2");L="counter2"}else{D.addClass("counter3");L="counter3";D.one(r.counterSelector||".li_counter").hide();if(D.one(".li_99_plus")){D.one(".li_99_plus").show()}}}if(c.config.flickr.flags.enable_feed_reskin){D.addClass(r.commentButtonNodeClass||" comments");D.addClass("rapidnofollow");D.removeClass("active");D.one(r.counterSelector||"span.counter").set("text",M)}else{D.addClass(r.commentButtonNodeClass||"il_comments");D.addClass("rapidnofollow");D.removeClass("active");D.one(r.counterSelector||".li_counter").set("text",M)}if(B.get("parentNode").hasClass("card-bundle")){H=G.getAttribute("data-photo-id");B.one(".id"+H).setAttribute("data-comment_class",L).setAttribute("data-comment_count",M)}g()}else{z.one(".comments-inner").set("innerHTML",N.responseText);if(z.one(".comment-button-post")){z.one(".comment-button-post").on("click",function(P){k(P,w)})}}G.setAttribute("data-comments-total-count",v+1)},failure:function(H,I){z.one(".comment-content .html5-balls").remove();z.one(".comment-content form").show();z.one(".comment-content textarea").focus();j(c.transjax.get("photo-comments","error_add_generic"))}}};if(z.one(".comments-inner form")){z.one(".comments-inner form").hide();z.one(".comments-inner").append('<span class="html5-balls"><span class="blueball"></span><span class="pinkball"></span></span>')}else{z.one(".comment-content form").hide();z.one(".add-comment-form .comment-content").append('<span class="html5-balls"><span class="blueball"></span><span class="pinkball"></span></span>')}c.io("/photo_comments_fragment_2013.gne?cachebust="+(new Date()).getTime(),y)}function n(s){s.all(".card-comment").each(function(y){if(!y.one(".comments-overlay")){var x=y,t=x.getAttribute("data-photo-id"),w=x.one(".commentsWrapper");totalComments=parseInt(x.getAttribute("data-comments-total-count"));var u="magic_cookie="+c.config.flickr.magic_cookie+"&photo="+t+"&offset="+(totalComments-4)+"&limit=4&show-chrome=true&view-more-count=20&truncate-comment-body="+e(2)+"&hide-meta=true";var v={method:"post",data:u,on:{success:function(C,B,A){if(!w){return}if(w.one(".comments-overlay")){return}var z;if(w.one(".action-view-comments")){w.one(".action-view-comments").remove()}w.append('<div id="comments" class="comments-overlay"><div class="comments-inner">'+B.responseText+"</div></div>");z=w.one(".comment-button-post");if(z){z.on("click",function(D){k(D,t)})}c.refreshSIHPSidebar.updateConfig()},failure:function(B,A,z){}}};c.io("/photo_comments_fragment_2013.gne?cachebust="+(new Date()).getTime(),v)}})}function e(s){var t=c.one(r.container).get("offsetWidth");if(t<=640){return 50*s}else{return 70*s}}function l(t){t.preventDefault();var s=t.target.ancestor("li.comment-block");s.one(".truncated-comment").hide();s.one(".whole-comment").show()}function h(u){u.preventDefault();var s,t;s=u.target.ancestor(".comment-block").one(".comment-buddy-icon-link");if(s){t="[http://www.flickr.com/photos/"+s.get("href").replace(/^.*?\/photos\/(.*?)\/$/,"$1")+"]"}if(t){var v=t+" ";u.target.ancestor(".comments-inner").one("#message").focus();u.target.ancestor(".comments-inner").one("#message").set("value",v)}}function j(s){j.alert=j.alert||new c.FlickrDialog.Alert({message:s,width:280});j.alert.show()}function m(s){i({target:s.one(".comments-inline-btn")})}var g=function(){var v=c.one(".comments-popover"),u;if(v){var w=c.one(".popover-shim"),t=v.ancestor(r.commentContainerSelector),s=t.all(r.commentButtonNodeSelector||".il_comments");v.remove();c.all(".comments-popover").remove(true);w.remove();s.removeClass("active");if(r.onDismiss){r.onDismiss(t)}delete c.config[a].open_cards[parseInt(t.getData("photo-id"),10)];o={}}};d.prototype.dismissCommentsPopover=g;d.prototype.loadCommentsCards=n;d.prototype.openForNode=m;d.prototype.getDismissEvent=function(){return f};c.refreshSIHPComment=d},"0.0.1",{requires:F.config.modules[a].requires||[],optional:F.config.modules[a].optional||[]})}());if(typeof deconcept=="undefined"){var deconcept=new Object()}if(typeof deconcept.util=="undefined"){deconcept.util=new Object()}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object()}deconcept._playerVersion=null;deconcept.SWFObject=function(f,d,m,g,j,l,o,i,a,e,n){if(!document.getElementById){return}this.DETECT_KEY=e?e:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(f){this.setAttribute("swf",f)}if(d){this.setAttribute("id",d)}if(m){this.setAttribute("width",m)}if(g){this.setAttribute("height",g)}this.setAttribute("base",(n)?n:".");if(j){this.setAttribute("version",new deconcept.PlayerVersion(j.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true}if(l){this.addParam("bgcolor",l)}var b=o?o:"high";this.addParam("quality",b);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var k=(i)?i:window.location;this.setAttribute("xiRedirectUrl",k);this.setAttribute("redirectUrl","");if(a){this.setAttribute("redirectUrl",a)}};deconcept.SWFObject.prototype={useExpressInstall:function(a){this.xiSWFPath=!a?"expressinstall.swf":a;this.setAttribute("useExpressInstall",true)},setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addParam:function(a,b){this.params[a]=b},getParams:function(){return this.params},addVariable:function(a,b){this.variables[a]=b},getVariable:function(a){return this.variables[a]},getVariables:function(){return this.variables},getVariablePairs:function(){var a=new Array();var b;var c=this.getVariables();for(b in c){a[a.length]=b+"="+c[b]}return a},getSWFHTML:function(e){var d="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}d='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';d+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" base="'+this.getAttribute("base")+'" ';var c=this.getParams();for(var a in c){d+=[a]+'="'+c[a]+'" '}var b=this.getVariablePairs().join("&");if(b.length>0){d+='flashvars="'+b+'"'}d+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}d='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';d+='<param name="movie" value="'+this.getAttribute("swf")+'" />';d+='<param name="base" value="'+this.getAttribute("base")+'" />';var c=this.getParams();for(var a in c){d+='<param name="'+a+'" value="'+c[a]+'" />'}var b=this.getVariablePairs().join("&");if(b.length>0){d+='<param name="flashvars" value="'+b+'" />'}d+="</object>"}d=(typeof e!="undefined"?e:"")+d;return d},write:function(a,d){if(this.getAttribute("useExpressInstall")){var b=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(b)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var c=(typeof a=="string")?document.getElementById(a):a;c.innerHTML=this.getSWFHTML(d);return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){if(deconcept._playerVersion){return deconcept._playerVersion}var c=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var a=navigator.plugins["Shockwave Flash"];if(a&&a.description){a.description.match(/[a-zA-Z\s]([0-9]+)\.([0-9]+)\s*[rbd]([0-9]+)/);var g=[RegExp.$1,RegExp.$2,RegExp.$3];if(navigator.platform.match(/win32/i)&&!g[0]){a.description.match(/[a-zA-Z\s]([0-9]+)\.([0-9]+|([0-9]+.[0-9]+.))\s*[rbd]([0-9]+)/);g=[RegExp.$1,RegExp.$2,RegExp.$3]}c=new deconcept.PlayerVersion(g)}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var d=1;var b=3;while(d){try{b++;d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b);c=new deconcept.PlayerVersion([b,0,0])}catch(f){d=null}}}else{try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(f){try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");c=new deconcept.PlayerVersion([6,0,21]);d.AllowScriptAccess="always"}catch(f){if(c.major==6){return c}}try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(f){}}if(d!=null){c=new deconcept.PlayerVersion(d.GetVariable("$version").split(" ")[1].split(","))}}}deconcept._playerVersion=c;return c};deconcept.PlayerVersion=function(a){this.major=a[0]!=null?parseInt(a[0]):0;this.minor=a[1]!=null?parseInt(a[1]):0;this.rev=a[2]!=null?parseInt(a[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(a){if(this.major<a.major){return false}if(this.major>a.major){return true}if(this.minor<a.minor){return false}if(this.minor>a.minor){return true}if(this.rev<a.rev){return false}return true};deconcept.util={getRequestParameter:function(d){var c=document.location.search||document.location.hash;if(d==null){return c}if(c){var b=c.substring(1).split("&");for(var a=0;a<b.length;a++){if(b[a].substring(0,b[a].indexOf("="))==d){return b[a].substring((b[a].indexOf("=")+1))}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var c=document.getElementsByTagName("OBJECT");for(var b=c.length-1;b>=0;b--){c[b].style.display="none";for(var a in c[b]){if(typeof c[b][a]=="function"){c[b][a]=function(){}}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(!document.getElementById&&document.all){document.getElementById=function(a){return document.all[a]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;function SWFMacMouseWheel(a){this.so=a;var b=navigator.appVersion.toLowerCase().indexOf("mac")!=-1;if(b){this.init()}}SWFMacMouseWheel.prototype={init:function(){SWFMacMouseWheel.instance=this;if(window.addEventListener){window.addEventListener("DOMMouseScroll",SWFMacMouseWheel.instance.wheel,false)}window.onmousewheel=document.onmousewheel=SWFMacMouseWheel.instance.wheel},handle:function(a){document[this.so.getAttribute("id")].externalMouseEvent(a)},wheel:function(a){var b=0;if(a.wheelDelta){b=a.wheelDelta/120;if(window.opera){b=-b}}else{if(a.detail){b=-a.detail/3}}if(/AppleWebKit/.test(navigator.userAgent)){b/=3}if(b){SWFMacMouseWheel.instance.handle(b)}if(a.preventDefault){a.preventDefault()}a.returnValue=false}};(function(){var a="view-count";YUI.add(a,function(g){var f;f={queued:{},logging:{},logged:{},pendingFlush:undefined};function b(k,j,h){var l,i;if(!k||!c(k)){return}if(!j||!g.Lang.isString(j)){j=document.referrer}if(j.charAt(0)==="/"){l=true}i={};i.photo_id=k;if(h){i.async=true}if(l){i.path=j}else{i.referrer=j}f.queued[k]=i;if(!f.pendingFlush){f.pendingFlush=setTimeout(e,1000)}}function e(){if(f.pendingFlush){clearTimeout(f.pendingFlush);f.pendingFlush=undefined;d()}}function d(){var i,h,j,n,k,m,l;i=g.config.flickr.max_photo_ids_per_api_call;h=f.queued;f.queued={};j=g.Object.keys(h);if(i&&i<j.length){g.Array.each(j,function(p,o){if(o>=i){b(h[p]);h[p]=undefined;delete h[p]}})}g.mix(f.logging,h);n="flickr.photos.addView";k={views:g.JSON.stringify(g.Object.values(h))};m={success:function(o){g.mix(f.logged,h);l()},failure:function(o){l()}};l=function(){g.Object.each(h,function(o,p){f.logging[p]=undefined;delete f.logging[p]})};g.flickrAPI.callMethod(n,k,m)}function c(h){if(f.queued[h]||f.logging[h]||f.logged[h]){return false}return true}g.ViewCount={canQueue:c,queue:b,flushQueue:e}},"0.0.1",{requires:F.config.modules[a].requires||[],optional:F.config.modules[a].optional||[]})}());YUI.add("playr",function(d){var n="frame",q=d.one("body"),aj,B,e,K,T=0,ab=0,I=0,f=d.config.flickr.lightbox.enable_mobile_lightbox&&(d.UA.iphone||d.UA.ipod||(d.UA.android&&d.UA.mobile)),l=(d.UA.android&&d.UA.mobile),J=window.devicePixelRatio>1?true:false,O="/apps/video/stewart.swf.v"+d.config.flickr.video_player_version,ah=[],ac=3000,ae,g=d.ViewCount,P=250,D=600,E=250,X=400,v=false,o=true,t={};function an(ap){var ar,aq,au,at,Y=64,ao=50;ap=true;if(!t.viewport||ap){if(f){ar=Math.abs(window.orientation)===90;aq=screen.width;at=screen.height;if(l){t.viewport={height:q.get("clientHeight"),width:q.get("clientWidth")}}else{t.viewport={height:q.get("clientHeight"),width:q.get("clientWidth")}}}else{t.viewport={height:q.get("clientHeight"),width:q.get("clientWidth")}}}au=t.viewport.width+200;return t.viewport}function w(ap){var aw=an().height-ab,ao=an().width-ab,au,ay,at,aq,ar,ax,Y,av,az=1;if(J&&screen&&screen.width>500){az=2}d.Object.each(ap.get("sizes"),function(aB,aA){if(aB&&aA!=="o"&&aA!=="k"){Y=parseInt(aB.width,10);av=parseInt(aB.height,10);if((Y>=ao*az||av>=aw*az)&&(!au||aB.height<parseInt(au.height,10))){au=aB;au.name=aA}if(!at||(Y>parseInt(at.width,10)||av>parseInt(at.height,10))){at=aB;at.name=aA}}ay=au||at});ar=aw/ay.height;ax=ao/ay.width;aq=(ar>ax)?ax:ar;return{height:parseInt(ay.height,10),width:parseInt(ay.width,10),url:ay.url,scale:aq,scaled_height:(aq<1)?Math.round(aq*ay.height):ay.height,scaled_width:(aq<1)?Math.round(aq*ay.width):ay.width,name:ay.name}}ae=(function(){var Y={},ao="p";return{addPosition:function(ap,aq){if(Y[ao+ap]){return false}Y[ao+ap]=aq;return true},getPosition:function(ap){if(Y[ao+ap]){return Y[ao+ap]}else{return false}},setParam:function(ap,aq,ar){var at=this.getPosition(ap);if(at){at[aq]=ar}},getParam:function(ap,aq){var ar=this.getPosition(ap);if(ar){return ar[aq]}else{return null}},each:function(ar,aq){var ap=aq||ar;d.each(Y,function(au,at){ar.call(ap,au,parseInt(at.substr(1),10))},this)}}}());function C(){return n==="slideshow"}function Q(aq,ap,ar){var ao=H(),at,au,Y;if(ae.addPosition(ap,{photo:ar})){au=ar.get("sizes").t.url;Y=new Image();Y.onload=function(){Y=null};Y.src=au;if(ap!==ao){if(d.ContextData.getPhoto(aq,ap)){at=ae.getPosition(ap).photo;y(at,function(av,aw){})}}}}function h(){d.one("html").on("mouseover",ag);d.one("html").on("mouseout",ad);R()}function R(){clearTimeout(t.fadeOutTimeout);t.fadeOutTimeout=setTimeout(ad,ac)}function ak(){clearTimeout(t.fadeInTimeout);t.fadeInTimeout=setTimeout(ag,ac)}function ad(){clearTimeout(t.fadeOutTimeout);k(H()).addClass("faded")}function ag(){clearTimeout(t.fadeInTimeout);k(H()).removeClass("faded")}function j(Y){return d.one("#photo-"+Y)}function k(ao){var Y=ae.getPosition(ao);if(Y){return j(Y.photo.get("id"))}else{return false}}function N(){return aj}function W(Y){t.openPosition=Y}function H(){return t.openPosition||0}function G(ao,Y){return(ao===N()&&Y===H())}function c(){return d.ContextData.getPhoto(aj.id,H())}function M(){var ao=c(),ap=j(ao.get("id")),Y=ap.one(".il_fav");if(!ao.get("can_fave")){return}ao.toggle_fave()}function aa(ap){var Y=ap.target,ao=j(Y.get("id"));if(ao){al(ao,Y)}}function L(ap){var Y=ap.target,ao=j(Y.get("id"));if(ao){ao.one(".il_fav .li_counter").set("innerHTML",Y.get("fave_count"));a(ao.one(".il_fav"),Y.get("fave_count"))}}function U(ao){var Y=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled;if(Y&&!t.isFullscreen){t.isFullscreen=true;i(document.documentElement)}else{t.isFullscreen=false;b()}}function af(){if(typeof document.fullscreenEnabled!=="undefined"||typeof document.mozFullScreenEnabled!=="undefined"||typeof document.webkitFullscreenEnabled!=="undefined"){q.addClass("fullScreenIsSupported")}}function i(Y){if(Y.requestFullScreen){Y.requestFullScreen()}else{if(Y.mozRequestFullScreen){Y.mozRequestFullScreen()}else{if(Y.webkitRequestFullScreen){Y.webkitRequestFullScreen()}}}}function b(){if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}}}}function r(){var ap,at,au,av,Y,ao,aq,aw,ar;ap=d.config.flickr.lightbox.position_preload_limit||0;at=d.config.flickr.lightbox.position_preload_threshold||ap;if(!d.Lang.isNumber(ap)||!d.Lang.isNumber(at)){return}au=N().id;av=H();if(I>0){ao=Math.floor(av/ap)+1;Y=av+1;aq=ao*ap;if((aq-Y)<at){aq+=at}aw=[Y,aq]}else{if(I<0){ao=Math.ceil(av/ap)-1;Y=av-1;aq=ao*ap;if(Math.abs(aq-Y)<at){aq-=at}aw=[aq,Y]}else{Y=av-Math.ceil(ap/2);aq=av-Math.floor(ap/2)+ap;aw=[Y,aq]}}for(ar=aw[0];ar<=aw[1];ar++){if(ar!==av){d.ContextData.loadPhoto(au,ar)}}}function p(Y){if(typeof Y.preventDefault==="function"){Y.preventDefault()}g.flushQueue();V(H()-1)}function m(Y){if(typeof Y.preventDefault==="function"){Y.preventDefault()}g.flushQueue();V(H()+1)}function V(av){var ao,aq,ap,aw,au,ar,ax,Y,at;if(!aj.id||!d.Lang.isNumber(av)){return}ao=d.ContextData.getPrevLimit(aj.id);if(d.Lang.isNumber(ao)&&ao>av){return V(ao)}aq=d.ContextData.getNextLimit(aj.id);if(d.Lang.isNumber(aq)&&aq<av){return V(aq)}aw=H();if(av>aw){I=1}else{if(av<aw){I=-1}else{I=0}}ap=k(av);ar=k(aw);if(I!==0){if(!ap){at=ae.getPosition(av).photo;if(at){y(at,function(ay,az){s(ay,az);ar.setStyle("display","");W(av)})}}else{s(Y,ap);ar.setStyle("display","");W(av);u()}R();r()}}function am(ap,aq){if(!ah[ap.get("id")]){return}var ao=ah[ap.get("id")],Y,ar;if(S(ap)&&typeof ao.pauseVideo==="function"){ao.pauseVideo()}else{if(aq){Y=200;ar=setInterval(function(){if(--Y<=0){clearInterval(ar)}if(typeof ao.pauseVideo==="function"){clearInterval(ar);ao.pauseVideo()}},100)}}}function S(ao){if(!ah[ao.get("id")]){return false}var Y=ah[ao.get("id")];if(typeof Y.getIsPlaying==="function"&&Y.getIsPlaying()){return true}return false}function y(ap,at){var aA=d.one("#photos"),av,az,aG,au,aD="photo-"+ap.get("id"),aE=ap.get("pathalias")?d.Escape.html(ap.get("pathalias")):ap.get("owner"),ax=ap.get("id"),aK="/photos/"+aE+"/"+ap.get("id")+"/",aF="/photos/"+aE+"/",ao=(ap.get("iconserver")&&ap.get("iconfarm"))?"https://farm"+ap.get("iconfarm")+"."+d.config.flickr.static_domain+".com/"+ap.get("iconserver")+"/buddyicons/"+ap.get("owner")+".jpg":"https://s.yimg.com/pw/images/buddyicon.gif",ay="https://s.yimg.com/pw/images/spaceout.gif",aJ,ar=ap.get("title")?d.Escape.html(ap.get("title")):d.transjax.get("photo","untitled"),aC=ap.get("description")?d.Escape.html(ap.get("description")):false,aB=w(ap),Y=an(),aI,aq,aw=ap.get("media")==="video",aH=ap.get("needs_interstitial");if(!ap){return}if(o&&aw&&ap.get("sizes").v&&ap.get("sizes").v.width){au=aA.create('<div data-photo-id="'+ap.get("id")+'" id="'+aD+'" class="card" style="width: '+aB.scaled_width+"px; height: "+(aB.scaled_height-72)+"px; margin-top: "+Math.round(((Y.height-aB.scaled_height)+72)/2)+'px;"></div>');aI=au.one(".lightbox-video");az=false;aA.append(au);aG=new deconcept.SWFObject(O,aD+"-swf","100%","100%",9,"#000000");aG.addParam("allowFullScreen","true");aG.addParam("allowScriptAccess","always");aG.addParam("bgcolor","#000000");aG.addParam("wmode","opaque");aG.addVariable("intl_lang",d.config.flickr.lang);aG.addVariable("onsite","true");aG.addVariable("intl_lang",d.config.flickr.lang);aG.addVariable("photo_secret",ap.get("secret"));aG.addVariable("photo_id",ap.get("id"));aG.addVariable("flickr_noAutoPlay",!az);aG.addVariable("hd_default",d.config.flickr.lightbox.hd_default?"true":"false");aG.write(aD);ah[ap.get("id")]=aA.one("#"+aD+"-swf").getDOMNode();if(!az&&false){am(ap,true)}}else{au=aA.create('<div data-photo-id="'+ap.get("id")+'" id="photo-'+ap.get("id")+'" class="card" style="width: '+aB.scaled_width+"px; height: "+aB.scaled_height+"px; margin-top: "+Math.round((Y.height-aB.scaled_height)/2)+'px;"><a class="photo-link" href="'+aK+'"><img src="'+(aH?ay:aB.url)+'" width="'+aB.scaled_width+'" height="'+aB.scaled_height+'" alt="'+d.Escape.html(ap.get("title"))+'"></a></div>')}aJ=!C()?"":'<ul class="nav-arrows"><li class="nav-arrow-left"><a class="arrow" href="#"><span class="marker fade-target"></span></a></li><li class="nav-arrow-right"><a class="arrow" href="#"><span class="marker fade-target"></span></a></li></ul>';av=aJ+'<div class="info-bar"><div class="opacityBackground fade-target"></div><ul class="imgLinks"><li class="il_cta il_fav counter0 fade-target"><span class="li_divider"></span><span class="li_icon"></span><span class="li_counter">'+ap.get("fave_count")+'</span><span class="li_99_plus">99+</span></li><li class="il_cta il_fullscreen fade-target"><span class="li_icon"></span></li><li><a class="logo fade-target" href="'+F.config.flickr.site_root+'" title="flickr"><img src="'+ay+'" /></a></li></ul><div class="attribution fade-target"><span class="photographer_name"><a href="'+aF+'">'+d.Escape.html(ap.get("ownername"))+'</a></span>&nbsp;<span class="title"><a href="'+aK+'">'+ar+"</a></span>&nbsp;";if(aC){av+='<br/><span class="description" style="font-size: 12px;"><a href="'+aK+'">'+aC+"</a></span>"}av+="</div></div>";au.append(av);if(aH){au.one("img").addClass("fuzzy")}a(au.one(".il_fav"),ap.get("fave_count"));z(au,Y);al(au,ap);au.one(".il_fav").on("click",M);au.one(".il_fullscreen").on("click",U);if(!aw){au.one("a.photo-link").on("click",ai)}au.one("span.title a").on("click",ai);au.one("span.photographer_name a").on("click",ai);au.one(".logo").on("click",ai);if(C()){au.one(".nav-arrow-left a.arrow").on("click",p);au.one(".nav-arrow-right a.arrow").on("click",m)}aA.appendChild(au);if(g.canQueue(ax)){g.queue(ax,"playr")}if(typeof at==="function"){at(ap,au)}return}function s(ao,ap){var Y=aj.id,aq=H();ap.setStyle("display","block")}function a(ao,Y){if(Y>0){ao.addClass("showCount")}if(Y>9){ao.addClass("showCountTwo")}if(Y>99){ao.addClass("showCountThree")}}function z(ao,Y){if(!Y){Y=an()}if(Y.width<X||Y.height<E){ao.addClass("smallest-ui")}else{if(Y.width<D||Y.height<P){ao.addClass("small-ui")}else{ao.removeClass("small-ui");ao.removeClass("smallest-ui")}}}function al(ao,Y){if(Y.get("is_fave")){ao.one(".il_fav").addClass("is_fav")}else{ao.one(".il_fav").removeClass("is_fav")}}function ai(ao){var Y=ao.target.ancestor("a",true);if(Y){ao.preventDefault();window.open(Y.get("href"),"_top")}}function u(av){var ao=c(),at=j(ao.get("id")),ay=at.one(".photo-link img"),ax=w(ao),ap=an(),aq=ao.get("needs_interstitial"),aw,ar,au,az,Y;if(o&&ao.get("media")==="video"&&ao.get("sizes").v&&ao.get("sizes").v.width){}else{if(!aq&&ay.get("src")!==ax.url){Y=new Image();Y.onload=function(aA){ay.set("src",ax.url)};Y.src=ax.url;ay.set("width",ax.scaled_width).set("height",ax.scaled_height)}}if(ao.get("media")==="video"){at.setStyle("width",ax.scaled_width+"px").setStyle("margin-top",Math.round(((ap.height-ax.scaled_height)+72)/2)+"px").setStyle("height",(ax.scaled_height-72)+"px")}else{at.setStyle("width",ax.scaled_width+"px").setStyle("margin-top",Math.round((ap.height-ax.scaled_height)/2)+"px").setStyle("height",ax.scaled_height+"px");ay.setStyle("width",ax.scaled_width+"px").setStyle("height",ax.scaled_height+"px")}z(at,ap)}function A(ao,Y){if(e){return}else{e=true}d.PageContext.set("playr");d.after("PhotoData:is_faveChange",aa);d.after("PhotoData:fave_countChange",L);d.on("resize",d.betterThrottle(u,20));if(C()){d.keyboardShortcutManager.register({keystring:"39,74",handler:m,context:"playr",legend:{key:"&rarr;",description:d.transjax.get("photo-keyboard-shortcuts","next_photo"),group:d.transjax.get("keyboard-shortcut-legend","navigation"),order:0}});d.keyboardShortcutManager.register({keystring:"37,75",handler:p,context:"playr",legend:{key:"&larr;",description:d.transjax.get("photo-keyboard-shortcuts","previous_photo"),group:d.transjax.get("keyboard-shortcut-legend","navigation"),order:0}})}d.keyboardShortcutManager.register({keystring:"70",handler:M,context:"playr",legend:{key:"F",description:d.transjax.get("photo-keyboard-shortcuts","fave_this_photo"),group:d.transjax.get("keyboard-shortcut-legend","actions"),order:0}});y(K,function(ar,at){var aq,ap;ae.addPosition(Y,{photo:ar});s(ar,at);aq={container:"#playr"};if(v){aq.commentIconSelector=".il_comments";aq.photoContainerSelector=".card";aq.commentButtonNodeSelector=".il_comments";ap=new d.refreshSIHPComment(aq)}})}function x(Y){window.addEventListener("message",function(ap){var aq=(ap.data||"").split(",");var ao=Y.get("id")+","+aq[1];if(Y.get("safety_level")!=1){ao+=",unSafe"}ap.source.postMessage(ao,ap.origin!=="null"?ap.origin:"*")},false)}function Z(Y){var ap,ao;if(Y&&Y.mode==="slideshow"){n="slideshow"}aj=d.ContextData.getContext(d.config.flickr.open_context_id);W(T);if(!aj){d.later(100,this,Z);return false}else{B=true;af();K=d.ContextData.getPhoto(aj.id,T);A(aj.id,T);window.setTimeout(ad,1000);x(K);if(C()){d.on("ContextData:photoLoaded",Q);r()}h();return K}}d.Playr={init:Z}},"0.0.1",{requires:F.config.modules.playr.requires||[],optional:F.config.modules.playr.optional||[]});